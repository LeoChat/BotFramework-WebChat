'use strict';

var cov_2qm7b6pz3h = (function() {
  var path = '/home/guy/leo/BotFramework-WebChat/packages/bundle/src/adaptiveCards/createAdaptiveCardMiddleware.js';
  var hash = '3171b35dc321c1d8c4381b4d84487c788aa827c0';
  var global = new Function('return this')();
  var gcv = '__coverage__';
  var coverageData = {
    path: '/home/guy/leo/BotFramework-WebChat/packages/bundle/src/adaptiveCards/createAdaptiveCardMiddleware.js',
    statementMap: {
      '0': {
        start: {
          line: 16,
          column: 2
        },
        end: {
          line: 49,
          column: 4
        }
      },
      '1': {
        start: {
          line: 16,
          column: 15
        },
        end: {
          line: 49,
          column: 3
        }
      },
      '2': {
        start: {
          line: 18,
          column: 6
        },
        end: {
          line: 38,
          column: 8
        }
      },
      '3': {
        start: {
          line: 41,
          column: 4
        },
        end: {
          line: 46,
          column: 6
        }
      },
      '4': {
        start: {
          line: 48,
          column: 4
        },
        end: {
          line: 48,
          column: 34
        }
      }
    },
    fnMap: {
      '0': {
        name: 'createAdaptiveCardMiddleware',
        decl: {
          start: {
            line: 15,
            column: 24
          },
          end: {
            line: 15,
            column: 52
          }
        },
        loc: {
          start: {
            line: 15,
            column: 60
          },
          end: {
            line: 50,
            column: 1
          }
        },
        line: 15
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 16,
            column: 9
          },
          end: {
            line: 16,
            column: 10
          }
        },
        loc: {
          start: {
            line: 16,
            column: 15
          },
          end: {
            line: 49,
            column: 3
          }
        },
        line: 16
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 16,
            column: 15
          },
          end: {
            line: 16,
            column: 16
          }
        },
        loc: {
          start: {
            line: 16,
            column: 23
          },
          end: {
            line: 49,
            column: 3
          }
        },
        line: 16
      },
      '3': {
        name: 'AdaptiveCardMiddleware',
        decl: {
          start: {
            line: 17,
            column: 13
          },
          end: {
            line: 17,
            column: 35
          }
        },
        loc: {
          start: {
            line: 17,
            column: 62
          },
          end: {
            line: 39,
            column: 5
          }
        },
        line: 17
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 18,
            column: 13
          },
          end: {
            line: 38,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 19,
              column: 8
            },
            end: {
              line: 19,
              column: 85
            }
          },
          {
            start: {
              line: 20,
              column: 10
            },
            end: {
              line: 38,
              column: 7
            }
          }
        ],
        line: 18
      },
      '1': {
        loc: {
          start: {
            line: 20,
            column: 10
          },
          end: {
            line: 38,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 21,
              column: 8
            },
            end: {
              line: 21,
              column: 89
            }
          },
          {
            start: {
              line: 22,
              column: 10
            },
            end: {
              line: 38,
              column: 7
            }
          }
        ],
        line: 20
      },
      '2': {
        loc: {
          start: {
            line: 22,
            column: 10
          },
          end: {
            line: 38,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 23,
              column: 8
            },
            end: {
              line: 23,
              column: 90
            }
          },
          {
            start: {
              line: 24,
              column: 10
            },
            end: {
              line: 38,
              column: 7
            }
          }
        ],
        line: 22
      },
      '3': {
        loc: {
          start: {
            line: 24,
            column: 10
          },
          end: {
            line: 38,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 25,
              column: 8
            },
            end: {
              line: 25,
              column: 86
            }
          },
          {
            start: {
              line: 26,
              column: 10
            },
            end: {
              line: 38,
              column: 7
            }
          }
        ],
        line: 24
      },
      '4': {
        loc: {
          start: {
            line: 26,
            column: 10
          },
          end: {
            line: 38,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 27,
              column: 8
            },
            end: {
              line: 27,
              column: 86
            }
          },
          {
            start: {
              line: 28,
              column: 10
            },
            end: {
              line: 38,
              column: 7
            }
          }
        ],
        line: 26
      },
      '5': {
        loc: {
          start: {
            line: 28,
            column: 10
          },
          end: {
            line: 38,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 29,
              column: 8
            },
            end: {
              line: 29,
              column: 88
            }
          },
          {
            start: {
              line: 30,
              column: 10
            },
            end: {
              line: 38,
              column: 7
            }
          }
        ],
        line: 28
      },
      '6': {
        loc: {
          start: {
            line: 30,
            column: 10
          },
          end: {
            line: 38,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 31,
              column: 8
            },
            end: {
              line: 31,
              column: 87
            }
          },
          {
            start: {
              line: 32,
              column: 10
            },
            end: {
              line: 38,
              column: 7
            }
          }
        ],
        line: 30
      },
      '7': {
        loc: {
          start: {
            line: 32,
            column: 10
          },
          end: {
            line: 38,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 33,
              column: 8
            },
            end: {
              line: 33,
              column: 90
            }
          },
          {
            start: {
              line: 34,
              column: 10
            },
            end: {
              line: 38,
              column: 7
            }
          }
        ],
        line: 32
      },
      '8': {
        loc: {
          start: {
            line: 34,
            column: 10
          },
          end: {
            line: 38,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 35,
              column: 8
            },
            end: {
              line: 35,
              column: 86
            }
          },
          {
            start: {
              line: 37,
              column: 8
            },
            end: {
              line: 37,
              column: 38
            }
          }
        ],
        line: 34
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0],
      '6': [0, 0],
      '7': [0, 0],
      '8': [0, 0]
    },
    _coverageSchema: '43e27e138ebf9cfc5966b082cf9a028302ed4184',
    hash: '3171b35dc321c1d8c4381b4d84487c788aa827c0'
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  return (coverage[path] = coverageData);
})();

var _interopRequireDefault = require('@babel/runtime/helpers/interopRequireDefault');

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = createAdaptiveCardMiddleware;

var _extends2 = _interopRequireDefault(require('@babel/runtime/helpers/extends'));

var _propTypes = _interopRequireDefault(require('prop-types'));

var _react = _interopRequireDefault(require('react'));

var _AdaptiveCardAttachment = _interopRequireDefault(require('./Attachment/AdaptiveCardAttachment'));

var _AnimationCardAttachment = _interopRequireDefault(require('./Attachment/AnimationCardAttachment'));

var _AudioCardAttachment = _interopRequireDefault(require('./Attachment/AudioCardAttachment'));

var _HeroCardAttachment = _interopRequireDefault(require('./Attachment/HeroCardAttachment'));

var _OAuthCardAttachment = _interopRequireDefault(require('./Attachment/OAuthCardAttachment'));

var _ReceiptCardAttachment = _interopRequireDefault(require('./Attachment/ReceiptCardAttachment'));

var _SignInCardAttachment = _interopRequireDefault(require('./Attachment/SignInCardAttachment'));

var _ThumbnailCardAttachment = _interopRequireDefault(require('./Attachment/ThumbnailCardAttachment'));

var _VideoCardAttachment = _interopRequireDefault(require('./Attachment/VideoCardAttachment'));

// TODO: [P4] Rename this file or the whole middleware, it looks either too simple or too comprehensive now
function createAdaptiveCardMiddleware(props) {
  cov_2qm7b6pz3h.f[0]++;
  cov_2qm7b6pz3h.s[0]++;
  return function() {
    cov_2qm7b6pz3h.f[1]++;
    cov_2qm7b6pz3h.s[1]++;
    return function(next) {
      cov_2qm7b6pz3h.f[2]++;

      function AdaptiveCardMiddleware(_ref) {
        var activity = _ref.activity,
          attachment = _ref.attachment;
        cov_2qm7b6pz3h.f[3]++;
        cov_2qm7b6pz3h.s[2]++;
        return attachment.contentType === 'application/vnd.microsoft.card.hero'
          ? (cov_2qm7b6pz3h.b[0][0]++,
            _react.default.createElement(
              _HeroCardAttachment.default,
              (0, _extends2.default)({}, props, {
                activity: activity,
                attachment: attachment
              })
            ))
          : (cov_2qm7b6pz3h.b[0][1]++,
            attachment.contentType === 'application/vnd.microsoft.card.adaptive'
              ? (cov_2qm7b6pz3h.b[1][0]++,
                _react.default.createElement(
                  _AdaptiveCardAttachment.default,
                  (0, _extends2.default)({}, props, {
                    activity: activity,
                    attachment: attachment
                  })
                ))
              : (cov_2qm7b6pz3h.b[1][1]++,
                attachment.contentType === 'application/vnd.microsoft.card.animation'
                  ? (cov_2qm7b6pz3h.b[2][0]++,
                    _react.default.createElement(
                      _AnimationCardAttachment.default,
                      (0, _extends2.default)({}, props, {
                        activity: activity,
                        attachment: attachment
                      })
                    ))
                  : (cov_2qm7b6pz3h.b[2][1]++,
                    attachment.contentType === 'application/vnd.microsoft.card.audio'
                      ? (cov_2qm7b6pz3h.b[3][0]++,
                        _react.default.createElement(
                          _AudioCardAttachment.default,
                          (0, _extends2.default)({}, props, {
                            activity: activity,
                            attachment: attachment
                          })
                        ))
                      : (cov_2qm7b6pz3h.b[3][1]++,
                        attachment.contentType === 'application/vnd.microsoft.card.oauth'
                          ? (cov_2qm7b6pz3h.b[4][0]++,
                            _react.default.createElement(
                              _OAuthCardAttachment.default,
                              (0, _extends2.default)({}, props, {
                                activity: activity,
                                attachment: attachment
                              })
                            ))
                          : (cov_2qm7b6pz3h.b[4][1]++,
                            attachment.contentType === 'application/vnd.microsoft.card.receipt'
                              ? (cov_2qm7b6pz3h.b[5][0]++,
                                _react.default.createElement(
                                  _ReceiptCardAttachment.default,
                                  (0, _extends2.default)({}, props, {
                                    activity: activity,
                                    attachment: attachment
                                  })
                                ))
                              : (cov_2qm7b6pz3h.b[5][1]++,
                                attachment.contentType === 'application/vnd.microsoft.card.signin'
                                  ? (cov_2qm7b6pz3h.b[6][0]++,
                                    _react.default.createElement(
                                      _SignInCardAttachment.default,
                                      (0, _extends2.default)({}, props, {
                                        activity: activity,
                                        attachment: attachment
                                      })
                                    ))
                                  : (cov_2qm7b6pz3h.b[6][1]++,
                                    attachment.contentType === 'application/vnd.microsoft.card.thumbnail'
                                      ? (cov_2qm7b6pz3h.b[7][0]++,
                                        _react.default.createElement(
                                          _ThumbnailCardAttachment.default,
                                          (0, _extends2.default)({}, props, {
                                            activity: activity,
                                            attachment: attachment
                                          })
                                        ))
                                      : (cov_2qm7b6pz3h.b[7][1]++,
                                        attachment.contentType === 'application/vnd.microsoft.card.video'
                                          ? (cov_2qm7b6pz3h.b[8][0]++,
                                            _react.default.createElement(
                                              _VideoCardAttachment.default,
                                              (0, _extends2.default)({}, props, {
                                                activity: activity,
                                                attachment: attachment
                                              })
                                            ))
                                          : (cov_2qm7b6pz3h.b[8][1]++,
                                            next({
                                              activity: activity,
                                              attachment: attachment
                                            }))))))))));
      }

      cov_2qm7b6pz3h.s[3]++;
      AdaptiveCardMiddleware.propTypes = {
        activity: _propTypes.default.any.isRequired,
        attachment: _propTypes.default.shape({
          contentType: _propTypes.default.string.isRequired
        }).isRequired
      };
      cov_2qm7b6pz3h.s[4]++;
      return AdaptiveCardMiddleware;
    };
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hZGFwdGl2ZUNhcmRzL2NyZWF0ZUFkYXB0aXZlQ2FyZE1pZGRsZXdhcmUuanMiXSwibmFtZXMiOlsiY3JlYXRlQWRhcHRpdmVDYXJkTWlkZGxld2FyZSIsInByb3BzIiwibmV4dCIsIkFkYXB0aXZlQ2FyZE1pZGRsZXdhcmUiLCJhY3Rpdml0eSIsImF0dGFjaG1lbnQiLCJjb250ZW50VHlwZSIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImFueSIsImlzUmVxdWlyZWQiLCJzaGFwZSIsInN0cmluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTtBQUNlLFNBQVNBLDRCQUFULENBQXNDQyxLQUF0QyxFQUE2QztBQUFBO0FBQUE7QUFDMUQsU0FBTyxZQUFNO0FBQUE7QUFBQTtBQUFBLHFCQUFBQyxJQUFJLEVBQUk7QUFBQTs7QUFDbkIsZUFBU0Msc0JBQVQsT0FBMEQ7QUFBQSxZQUF4QkMsUUFBd0IsUUFBeEJBLFFBQXdCO0FBQUEsWUFBZEMsVUFBYyxRQUFkQSxVQUFjO0FBQUE7QUFBQTtBQUN4RCxlQUFPQSxVQUFVLENBQUNDLFdBQVgsS0FBMkIscUNBQTNCLDhCQUNMLDZCQUFDLDJCQUFELDZCQUF3QkwsS0FBeEI7QUFBK0IsVUFBQSxRQUFRLEVBQUVHLFFBQXpDO0FBQW1ELFVBQUEsVUFBVSxFQUFFQztBQUEvRCxXQURLLCtCQUVIQSxVQUFVLENBQUNDLFdBQVgsS0FBMkIseUNBQTNCLDhCQUNGLDZCQUFDLCtCQUFELDZCQUE0QkwsS0FBNUI7QUFBbUMsVUFBQSxRQUFRLEVBQUVHLFFBQTdDO0FBQXVELFVBQUEsVUFBVSxFQUFFQztBQUFuRSxXQURFLCtCQUVBQSxVQUFVLENBQUNDLFdBQVgsS0FBMkIsMENBQTNCLDhCQUNGLDZCQUFDLGdDQUFELDZCQUE2QkwsS0FBN0I7QUFBb0MsVUFBQSxRQUFRLEVBQUVHLFFBQTlDO0FBQXdELFVBQUEsVUFBVSxFQUFFQztBQUFwRSxXQURFLCtCQUVBQSxVQUFVLENBQUNDLFdBQVgsS0FBMkIsc0NBQTNCLDhCQUNGLDZCQUFDLDRCQUFELDZCQUF5QkwsS0FBekI7QUFBZ0MsVUFBQSxRQUFRLEVBQUVHLFFBQTFDO0FBQW9ELFVBQUEsVUFBVSxFQUFFQztBQUFoRSxXQURFLCtCQUVBQSxVQUFVLENBQUNDLFdBQVgsS0FBMkIsc0NBQTNCLDhCQUNGLDZCQUFDLDRCQUFELDZCQUF5QkwsS0FBekI7QUFBZ0MsVUFBQSxRQUFRLEVBQUVHLFFBQTFDO0FBQW9ELFVBQUEsVUFBVSxFQUFFQztBQUFoRSxXQURFLCtCQUVBQSxVQUFVLENBQUNDLFdBQVgsS0FBMkIsd0NBQTNCLDhCQUNGLDZCQUFDLDhCQUFELDZCQUEyQkwsS0FBM0I7QUFBa0MsVUFBQSxRQUFRLEVBQUVHLFFBQTVDO0FBQXNELFVBQUEsVUFBVSxFQUFFQztBQUFsRSxXQURFLCtCQUVBQSxVQUFVLENBQUNDLFdBQVgsS0FBMkIsdUNBQTNCLDhCQUNGLDZCQUFDLDZCQUFELDZCQUEwQkwsS0FBMUI7QUFBaUMsVUFBQSxRQUFRLEVBQUVHLFFBQTNDO0FBQXFELFVBQUEsVUFBVSxFQUFFQztBQUFqRSxXQURFLCtCQUVBQSxVQUFVLENBQUNDLFdBQVgsS0FBMkIsMENBQTNCLDhCQUNGLDZCQUFDLGdDQUFELDZCQUE2QkwsS0FBN0I7QUFBb0MsVUFBQSxRQUFRLEVBQUVHLFFBQTlDO0FBQXdELFVBQUEsVUFBVSxFQUFFQztBQUFwRSxXQURFLCtCQUVBQSxVQUFVLENBQUNDLFdBQVgsS0FBMkIsc0NBQTNCLDhCQUNGLDZCQUFDLDRCQUFELDZCQUF5QkwsS0FBekI7QUFBZ0MsVUFBQSxRQUFRLEVBQUVHLFFBQTFDO0FBQW9ELFVBQUEsVUFBVSxFQUFFQztBQUFoRSxXQURFLCtCQUdGSCxJQUFJLENBQUM7QUFBRUUsVUFBQUEsUUFBUSxFQUFSQSxRQUFGO0FBQVlDLFVBQUFBLFVBQVUsRUFBVkE7QUFBWixTQUFELENBSEYsQ0FGQSxDQUZBLENBRkEsQ0FGQSxDQUZBLENBRkEsQ0FGQSxDQUZHLENBQVA7QUFxQkQ7O0FBdkJrQjtBQXlCbkJGLE1BQUFBLHNCQUFzQixDQUFDSSxTQUF2QixHQUFtQztBQUNqQ0gsUUFBQUEsUUFBUSxFQUFFSSxtQkFBVUMsR0FBVixDQUFjQyxVQURTO0FBRWpDTCxRQUFBQSxVQUFVLEVBQUVHLG1CQUFVRyxLQUFWLENBQWdCO0FBQzFCTCxVQUFBQSxXQUFXLEVBQUVFLG1CQUFVSSxNQUFWLENBQWlCRjtBQURKLFNBQWhCLEVBRVRBO0FBSjhCLE9BQW5DO0FBekJtQjtBQWdDbkIsYUFBT1Asc0JBQVA7QUFDRCxLQWpDWTtBQWlDWixHQWpDRDtBQWtDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgQWRhcHRpdmVDYXJkQXR0YWNobWVudCBmcm9tICcuL0F0dGFjaG1lbnQvQWRhcHRpdmVDYXJkQXR0YWNobWVudCc7XG5pbXBvcnQgQW5pbWF0aW9uQ2FyZEF0dGFjaG1lbnQgZnJvbSAnLi9BdHRhY2htZW50L0FuaW1hdGlvbkNhcmRBdHRhY2htZW50JztcbmltcG9ydCBBdWRpb0NhcmRBdHRhY2htZW50IGZyb20gJy4vQXR0YWNobWVudC9BdWRpb0NhcmRBdHRhY2htZW50JztcbmltcG9ydCBIZXJvQ2FyZEF0dGFjaG1lbnQgZnJvbSAnLi9BdHRhY2htZW50L0hlcm9DYXJkQXR0YWNobWVudCc7XG5pbXBvcnQgT0F1dGhDYXJkQXR0YWNobWVudCBmcm9tICcuL0F0dGFjaG1lbnQvT0F1dGhDYXJkQXR0YWNobWVudCc7XG5pbXBvcnQgUmVjZWlwdENhcmRBdHRhY2htZW50IGZyb20gJy4vQXR0YWNobWVudC9SZWNlaXB0Q2FyZEF0dGFjaG1lbnQnO1xuaW1wb3J0IFNpZ25JbkNhcmRBdHRhY2htZW50IGZyb20gJy4vQXR0YWNobWVudC9TaWduSW5DYXJkQXR0YWNobWVudCc7XG5pbXBvcnQgVGh1bWJuYWlsQ2FyZEF0dGFjaG1lbnQgZnJvbSAnLi9BdHRhY2htZW50L1RodW1ibmFpbENhcmRBdHRhY2htZW50JztcbmltcG9ydCBWaWRlb0NhcmRBdHRhY2htZW50IGZyb20gJy4vQXR0YWNobWVudC9WaWRlb0NhcmRBdHRhY2htZW50JztcblxuLy8gVE9ETzogW1A0XSBSZW5hbWUgdGhpcyBmaWxlIG9yIHRoZSB3aG9sZSBtaWRkbGV3YXJlLCBpdCBsb29rcyBlaXRoZXIgdG9vIHNpbXBsZSBvciB0b28gY29tcHJlaGVuc2l2ZSBub3dcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZUFkYXB0aXZlQ2FyZE1pZGRsZXdhcmUocHJvcHMpIHtcbiAgcmV0dXJuICgpID0+IG5leHQgPT4ge1xuICAgIGZ1bmN0aW9uIEFkYXB0aXZlQ2FyZE1pZGRsZXdhcmUoeyBhY3Rpdml0eSwgYXR0YWNobWVudCB9KSB7XG4gICAgICByZXR1cm4gYXR0YWNobWVudC5jb250ZW50VHlwZSA9PT0gJ2FwcGxpY2F0aW9uL3ZuZC5taWNyb3NvZnQuY2FyZC5oZXJvJyA/IChcbiAgICAgICAgPEhlcm9DYXJkQXR0YWNobWVudCB7Li4ucHJvcHN9IGFjdGl2aXR5PXthY3Rpdml0eX0gYXR0YWNobWVudD17YXR0YWNobWVudH0gLz5cbiAgICAgICkgOiBhdHRhY2htZW50LmNvbnRlbnRUeXBlID09PSAnYXBwbGljYXRpb24vdm5kLm1pY3Jvc29mdC5jYXJkLmFkYXB0aXZlJyA/IChcbiAgICAgICAgPEFkYXB0aXZlQ2FyZEF0dGFjaG1lbnQgey4uLnByb3BzfSBhY3Rpdml0eT17YWN0aXZpdHl9IGF0dGFjaG1lbnQ9e2F0dGFjaG1lbnR9IC8+XG4gICAgICApIDogYXR0YWNobWVudC5jb250ZW50VHlwZSA9PT0gJ2FwcGxpY2F0aW9uL3ZuZC5taWNyb3NvZnQuY2FyZC5hbmltYXRpb24nID8gKFxuICAgICAgICA8QW5pbWF0aW9uQ2FyZEF0dGFjaG1lbnQgey4uLnByb3BzfSBhY3Rpdml0eT17YWN0aXZpdHl9IGF0dGFjaG1lbnQ9e2F0dGFjaG1lbnR9IC8+XG4gICAgICApIDogYXR0YWNobWVudC5jb250ZW50VHlwZSA9PT0gJ2FwcGxpY2F0aW9uL3ZuZC5taWNyb3NvZnQuY2FyZC5hdWRpbycgPyAoXG4gICAgICAgIDxBdWRpb0NhcmRBdHRhY2htZW50IHsuLi5wcm9wc30gYWN0aXZpdHk9e2FjdGl2aXR5fSBhdHRhY2htZW50PXthdHRhY2htZW50fSAvPlxuICAgICAgKSA6IGF0dGFjaG1lbnQuY29udGVudFR5cGUgPT09ICdhcHBsaWNhdGlvbi92bmQubWljcm9zb2Z0LmNhcmQub2F1dGgnID8gKFxuICAgICAgICA8T0F1dGhDYXJkQXR0YWNobWVudCB7Li4ucHJvcHN9IGFjdGl2aXR5PXthY3Rpdml0eX0gYXR0YWNobWVudD17YXR0YWNobWVudH0gLz5cbiAgICAgICkgOiBhdHRhY2htZW50LmNvbnRlbnRUeXBlID09PSAnYXBwbGljYXRpb24vdm5kLm1pY3Jvc29mdC5jYXJkLnJlY2VpcHQnID8gKFxuICAgICAgICA8UmVjZWlwdENhcmRBdHRhY2htZW50IHsuLi5wcm9wc30gYWN0aXZpdHk9e2FjdGl2aXR5fSBhdHRhY2htZW50PXthdHRhY2htZW50fSAvPlxuICAgICAgKSA6IGF0dGFjaG1lbnQuY29udGVudFR5cGUgPT09ICdhcHBsaWNhdGlvbi92bmQubWljcm9zb2Z0LmNhcmQuc2lnbmluJyA/IChcbiAgICAgICAgPFNpZ25JbkNhcmRBdHRhY2htZW50IHsuLi5wcm9wc30gYWN0aXZpdHk9e2FjdGl2aXR5fSBhdHRhY2htZW50PXthdHRhY2htZW50fSAvPlxuICAgICAgKSA6IGF0dGFjaG1lbnQuY29udGVudFR5cGUgPT09ICdhcHBsaWNhdGlvbi92bmQubWljcm9zb2Z0LmNhcmQudGh1bWJuYWlsJyA/IChcbiAgICAgICAgPFRodW1ibmFpbENhcmRBdHRhY2htZW50IHsuLi5wcm9wc30gYWN0aXZpdHk9e2FjdGl2aXR5fSBhdHRhY2htZW50PXthdHRhY2htZW50fSAvPlxuICAgICAgKSA6IGF0dGFjaG1lbnQuY29udGVudFR5cGUgPT09ICdhcHBsaWNhdGlvbi92bmQubWljcm9zb2Z0LmNhcmQudmlkZW8nID8gKFxuICAgICAgICA8VmlkZW9DYXJkQXR0YWNobWVudCB7Li4ucHJvcHN9IGFjdGl2aXR5PXthY3Rpdml0eX0gYXR0YWNobWVudD17YXR0YWNobWVudH0gLz5cbiAgICAgICkgOiAoXG4gICAgICAgIG5leHQoeyBhY3Rpdml0eSwgYXR0YWNobWVudCB9KVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBBZGFwdGl2ZUNhcmRNaWRkbGV3YXJlLnByb3BUeXBlcyA9IHtcbiAgICAgIGFjdGl2aXR5OiBQcm9wVHlwZXMuYW55LmlzUmVxdWlyZWQsXG4gICAgICBhdHRhY2htZW50OiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICBjb250ZW50VHlwZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG4gICAgICB9KS5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIHJldHVybiBBZGFwdGl2ZUNhcmRNaWRkbGV3YXJlO1xuICB9O1xufVxuIl19
