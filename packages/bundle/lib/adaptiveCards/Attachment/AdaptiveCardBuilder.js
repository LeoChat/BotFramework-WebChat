'use strict';

var cov_233hegbr4o = (function() {
  var path =
    '/Users/guy/Work/Leo/leo/BotFramework-WebChat/packages/bundle/src/adaptiveCards/Attachment/AdaptiveCardBuilder.ts';
  var hash = '3adefd9d1c54e8b8b4e86e37b0c7cd624f33b329';
  var global = new Function('return this')();
  var gcv = '__coverage__';
  var coverageData = {
    path:
      '/Users/guy/Work/Leo/leo/BotFramework-WebChat/packages/bundle/src/adaptiveCards/Attachment/AdaptiveCardBuilder.ts',
    statementMap: {
      '0': {
        start: {
          line: 26,
          column: 19
        },
        end: {
          line: 26,
          column: 29
        }
      },
      '1': {
        start: {
          line: 29,
          column: 2
        },
        end: {
          line: 48,
          column: 3
        }
      },
      '2': {
        start: {
          line: 35,
          column: 4
        },
        end: {
          line: 35,
          column: 32
        }
      },
      '3': {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 40,
          column: 6
        }
      },
      '4': {
        start: {
          line: 42,
          column: 4
        },
        end: {
          line: 42,
          column: 36
        }
      },
      '5': {
        start: {
          line: 44,
          column: 4
        },
        end: {
          line: 44,
          column: 33
        }
      },
      '6': {
        start: {
          line: 46,
          column: 4
        },
        end: {
          line: 46,
          column: 36
        }
      },
      '7': {
        start: {
          line: 47,
          column: 4
        },
        end: {
          line: 47,
          column: 91
        }
      },
      '8': {
        start: {
          line: 50,
          column: 2
        },
        end: {
          line: 50,
          column: 16
        }
      },
      '9': {
        start: {
          line: 59,
          column: 4
        },
        end: {
          line: 59,
          column: 49
        }
      },
      '10': {
        start: {
          line: 60,
          column: 4
        },
        end: {
          line: 60,
          column: 37
        }
      },
      '11': {
        start: {
          line: 61,
          column: 4
        },
        end: {
          line: 61,
          column: 37
        }
      },
      '12': {
        start: {
          line: 63,
          column: 4
        },
        end: {
          line: 63,
          column: 38
        }
      },
      '13': {
        start: {
          line: 67,
          column: 22
        },
        end: {
          line: 67,
          column: 37
        }
      },
      '14': {
        start: {
          line: 69,
          column: 4
        },
        end: {
          line: 69,
          column: 33
        }
      },
      '15': {
        start: {
          line: 71,
          column: 4
        },
        end: {
          line: 79,
          column: 7
        }
      },
      '16': {
        start: {
          line: 72,
          column: 21
        },
        end: {
          line: 72,
          column: 33
        }
      },
      '17': {
        start: {
          line: 74,
          column: 6
        },
        end: {
          line: 74,
          column: 45
        }
      },
      '18': {
        start: {
          line: 76,
          column: 6
        },
        end: {
          line: 76,
          column: 34
        }
      },
      '19': {
        start: {
          line: 78,
          column: 6
        },
        end: {
          line: 78,
          column: 20
        }
      },
      '20': {
        start: {
          line: 83,
          column: 4
        },
        end: {
          line: 83,
          column: 72
        }
      },
      '21': {
        start: {
          line: 83,
          column: 40
        },
        end: {
          line: 83,
          column: 70
        }
      },
      '22': {
        start: {
          line: 87,
          column: 4
        },
        end: {
          line: 98,
          column: 5
        }
      },
      '23': {
        start: {
          line: 88,
          column: 24
        },
        end: {
          line: 88,
          column: 39
        }
      },
      '24': {
        start: {
          line: 91,
          column: 6
        },
        end: {
          line: 93,
          column: 7
        }
      },
      '25': {
        start: {
          line: 92,
          column: 8
        },
        end: {
          line: 92,
          column: 41
        }
      },
      '26': {
        start: {
          line: 95,
          column: 6
        },
        end: {
          line: 95,
          column: 28
        }
      },
      '27': {
        start: {
          line: 97,
          column: 6
        },
        end: {
          line: 97,
          column: 35
        }
      },
      '28': {
        start: {
          line: 102,
          column: 4
        },
        end: {
          line: 105,
          column: 9
        }
      },
      '29': {
        start: {
          line: 104,
          column: 8
        },
        end: {
          line: 104,
          column: 77
        }
      },
      '30': {
        start: {
          line: 109,
          column: 34
        },
        end: {
          line: 109,
          column: 51
        }
      },
      '31': {
        start: {
          line: 110,
          column: 4
        },
        end: {
          line: 115,
          column: 7
        }
      },
      '32': {
        start: {
          line: 116,
          column: 4
        },
        end: {
          line: 116,
          column: 108
        }
      },
      '33': {
        start: {
          line: 117,
          column: 4
        },
        end: {
          line: 117,
          column: 75
        }
      },
      '34': {
        start: {
          line: 121,
          column: 4
        },
        end: {
          line: 121,
          column: 35
        }
      },
      '35': {
        start: {
          line: 122,
          column: 4
        },
        end: {
          line: 122,
          column: 37
        }
      },
      '36': {
        start: {
          line: 126,
          column: 4
        },
        end: {
          line: 126,
          column: 44
        }
      },
      '37': {
        start: {
          line: 128,
          column: 18
        },
        end: {
          line: 128,
          column: 29
        }
      },
      '38': {
        start: {
          line: 130,
          column: 4
        },
        end: {
          line: 130,
          column: 20
        }
      },
      '39': {
        start: {
          line: 131,
          column: 4
        },
        end: {
          line: 131,
          column: 69
        }
      },
      '40': {
        start: {
          line: 132,
          column: 4
        },
        end: {
          line: 132,
          column: 30
        }
      },
      '41': {
        start: {
          line: 134,
          column: 4
        },
        end: {
          line: 134,
          column: 29
        }
      }
    },
    fnMap: {
      '0': {
        name: 'addCardAction',
        decl: {
          start: {
            line: 25,
            column: 9
          },
          end: {
            line: 25,
            column: 22
          }
        },
        loc: {
          start: {
            line: 25,
            column: 79
          },
          end: {
            line: 51,
            column: 1
          }
        },
        line: 25
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 58,
            column: 2
          },
          end: {
            line: 58,
            column: 3
          }
        },
        loc: {
          start: {
            line: 58,
            column: 43
          },
          end: {
            line: 64,
            column: 3
          }
        },
        line: 58
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 66,
            column: 2
          },
          end: {
            line: 66,
            column: 3
          }
        },
        loc: {
          start: {
            line: 66,
            column: 71
          },
          end: {
            line: 80,
            column: 3
          }
        },
        line: 66
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 71,
            column: 21
          },
          end: {
            line: 71,
            column: 22
          }
        },
        loc: {
          start: {
            line: 71,
            column: 29
          },
          end: {
            line: 79,
            column: 5
          }
        },
        line: 71
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 82,
            column: 2
          },
          end: {
            line: 82,
            column: 3
          }
        },
        loc: {
          start: {
            line: 82,
            column: 79
          },
          end: {
            line: 84,
            column: 3
          }
        },
        line: 82
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 83,
            column: 25
          },
          end: {
            line: 83,
            column: 26
          }
        },
        loc: {
          start: {
            line: 83,
            column: 40
          },
          end: {
            line: 83,
            column: 70
          }
        },
        line: 83
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 86,
            column: 2
          },
          end: {
            line: 86,
            column: 3
          }
        },
        loc: {
          start: {
            line: 86,
            column: 98
          },
          end: {
            line: 99,
            column: 3
          }
        },
        line: 86
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 101,
            column: 2
          },
          end: {
            line: 101,
            column: 3
          }
        },
        loc: {
          start: {
            line: 101,
            column: 72
          },
          end: {
            line: 106,
            column: 3
          }
        },
        line: 101
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 103,
            column: 26
          },
          end: {
            line: 103,
            column: 27
          }
        },
        loc: {
          start: {
            line: 103,
            column: 40
          },
          end: {
            line: 105,
            column: 7
          }
        },
        line: 103
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 108,
            column: 2
          },
          end: {
            line: 108,
            column: 3
          }
        },
        loc: {
          start: {
            line: 108,
            column: 44
          },
          end: {
            line: 118,
            column: 3
          }
        },
        line: 108
      },
      '10': {
        name: '(anonymous_10)',
        decl: {
          start: {
            line: 120,
            column: 2
          },
          end: {
            line: 120,
            column: 3
          }
        },
        loc: {
          start: {
            line: 120,
            column: 37
          },
          end: {
            line: 123,
            column: 3
          }
        },
        line: 120
      },
      '11': {
        name: '(anonymous_11)',
        decl: {
          start: {
            line: 125,
            column: 2
          },
          end: {
            line: 125,
            column: 3
          }
        },
        loc: {
          start: {
            line: 125,
            column: 74
          },
          end: {
            line: 135,
            column: 3
          }
        },
        line: 125
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 29,
            column: 2
          },
          end: {
            line: 48,
            column: 3
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 29,
              column: 2
            },
            end: {
              line: 48,
              column: 3
            }
          },
          {
            start: {
              line: 29,
              column: 2
            },
            end: {
              line: 48,
              column: 3
            }
          }
        ],
        line: 29
      },
      '1': {
        loc: {
          start: {
            line: 30,
            column: 4
          },
          end: {
            line: 33,
            column: 47
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 30,
              column: 4
            },
            end: {
              line: 30,
              column: 21
            }
          },
          {
            start: {
              line: 31,
              column: 4
            },
            end: {
              line: 31,
              column: 26
            }
          },
          {
            start: {
              line: 32,
              column: 4
            },
            end: {
              line: 32,
              column: 23
            }
          },
          {
            start: {
              line: 33,
              column: 5
            },
            end: {
              line: 33,
              column: 22
            }
          },
          {
            start: {
              line: 33,
              column: 26
            },
            end: {
              line: 33,
              column: 46
            }
          }
        ],
        line: 30
      },
      '2': {
        loc: {
          start: {
            line: 47,
            column: 17
          },
          end: {
            line: 47,
            column: 90
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 47,
              column: 46
            },
            end: {
              line: 47,
              column: 71
            }
          },
          {
            start: {
              line: 47,
              column: 74
            },
            end: {
              line: 47,
              column: 90
            }
          }
        ],
        line: 47
      },
      '3': {
        loc: {
          start: {
            line: 66,
            column: 32
          },
          end: {
            line: 66,
            column: 69
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 66,
              column: 55
            },
            end: {
              line: 66,
              column: 69
            }
          }
        ],
        line: 66
      },
      '4': {
        loc: {
          start: {
            line: 82,
            column: 40
          },
          end: {
            line: 82,
            column: 77
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 82,
              column: 63
            },
            end: {
              line: 82,
              column: 77
            }
          }
        ],
        line: 82
      },
      '5': {
        loc: {
          start: {
            line: 86,
            column: 59
          },
          end: {
            line: 86,
            column: 96
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 86,
              column: 82
            },
            end: {
              line: 86,
              column: 96
            }
          }
        ],
        line: 86
      },
      '6': {
        loc: {
          start: {
            line: 87,
            column: 4
          },
          end: {
            line: 98,
            column: 5
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 87,
              column: 4
            },
            end: {
              line: 98,
              column: 5
            }
          },
          {
            start: {
              line: 87,
              column: 4
            },
            end: {
              line: 98,
              column: 5
            }
          }
        ],
        line: 87
      },
      '7': {
        loc: {
          start: {
            line: 102,
            column: 4
          },
          end: {
            line: 105,
            column: 8
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 102,
              column: 4
            },
            end: {
              line: 102,
              column: 15
            }
          },
          {
            start: {
              line: 103,
              column: 6
            },
            end: {
              line: 105,
              column: 8
            }
          }
        ],
        line: 102
      },
      '8': {
        loc: {
          start: {
            line: 126,
            column: 16
          },
          end: {
            line: 126,
            column: 43
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 126,
              column: 16
            },
            end: {
              line: 126,
              column: 25
            }
          },
          {
            start: {
              line: 126,
              column: 29
            },
            end: {
              line: 126,
              column: 43
            }
          }
        ],
        line: 126
      },
      '9': {
        loc: {
          start: {
            line: 131,
            column: 25
          },
          end: {
            line: 131,
            column: 68
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 131,
              column: 25
            },
            end: {
              line: 131,
              column: 37
            }
          },
          {
            start: {
              line: 131,
              column: 41
            },
            end: {
              line: 131,
              column: 68
            }
          }
        ],
        line: 131
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0,
      '39': 0,
      '40': 0,
      '41': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0, 0, 0, 0],
      '2': [0, 0],
      '3': [0],
      '4': [0],
      '5': [0],
      '6': [0, 0],
      '7': [0, 0],
      '8': [0, 0],
      '9': [0, 0]
    },
    _coverageSchema: '43e27e138ebf9cfc5966b082cf9a028302ed4184',
    hash: '3adefd9d1c54e8b8b4e86e37b0c7cd624f33b329'
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  return (coverage[path] = coverageData);
})();

var _interopRequireDefault = require('@babel/runtime/helpers/interopRequireDefault');

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = void 0;

var _classCallCheck2 = _interopRequireDefault(require('@babel/runtime/helpers/classCallCheck'));

var _createClass2 = _interopRequireDefault(require('@babel/runtime/helpers/createClass'));

var _defineProperty2 = _interopRequireDefault(require('@babel/runtime/helpers/defineProperty'));

var _adaptivecards = require('adaptivecards');

function addCardAction(cardAction, includesOAuthButtons) {
  cov_233hegbr4o.f[0]++;

  var _ref = (cov_233hegbr4o.s[0]++, cardAction),
    type = _ref.type;

  var action;
  cov_233hegbr4o.s[1]++;

  if (
    (cov_233hegbr4o.b[1][0]++, type === 'imBack') ||
    (cov_233hegbr4o.b[1][1]++, type === 'messageBack') ||
    (cov_233hegbr4o.b[1][2]++, type === 'postBack') ||
    ((cov_233hegbr4o.b[1][3]++, type === 'signin') && (cov_233hegbr4o.b[1][4]++, includesOAuthButtons))
  ) {
    cov_233hegbr4o.b[0][0]++;
    cov_233hegbr4o.s[2]++;
    action = new _adaptivecards.SubmitAction();
    cov_233hegbr4o.s[3]++;
    action.data = {
      __isBotFrameworkCardAction: true,
      cardAction: cardAction
    };
    cov_233hegbr4o.s[4]++;
    action.title = cardAction.title;
  } else {
    cov_233hegbr4o.b[0][1]++;
    cov_233hegbr4o.s[5]++;
    action = new _adaptivecards.OpenUrlAction();
    cov_233hegbr4o.s[6]++;
    action.title = cardAction.title;
    cov_233hegbr4o.s[7]++;
    action.url =
      cardAction.type === 'call'
        ? (cov_233hegbr4o.b[2][0]++, 'tel:'.concat(cardAction.value))
        : (cov_233hegbr4o.b[2][1]++, cardAction.value);
  }

  cov_233hegbr4o.s[8]++;
  return action;
}

var AdaptiveCardBuilder =
  /*#__PURE__*/
  (function() {
    function AdaptiveCardBuilder(adaptiveCards, styleOptions) {
      (0, _classCallCheck2.default)(this, AdaptiveCardBuilder);
      (0, _defineProperty2.default)(this, 'card', void 0);
      (0, _defineProperty2.default)(this, 'container', void 0);
      (0, _defineProperty2.default)(this, 'styleOptions', void 0);
      cov_233hegbr4o.f[1]++;
      cov_233hegbr4o.s[9]++;
      this.card = new adaptiveCards.AdaptiveCard();
      cov_233hegbr4o.s[10]++;
      this.container = new _adaptivecards.Container();
      cov_233hegbr4o.s[11]++;
      this.styleOptions = styleOptions;
      cov_233hegbr4o.s[12]++;
      this.card.addItem(this.container);
    }

    (0, _createClass2.default)(AdaptiveCardBuilder, [
      {
        key: 'addColumnSet',
        value: function addColumnSet(sizes) {
          var container =
            arguments.length > 1 && arguments[1] !== undefined
              ? arguments[1]
              : (cov_233hegbr4o.b[3][0]++, this.container);
          cov_233hegbr4o.f[2]++;
          var columnSet = (cov_233hegbr4o.s[13]++, new _adaptivecards.ColumnSet());
          cov_233hegbr4o.s[14]++;
          container.addItem(columnSet);
          cov_233hegbr4o.s[15]++;
          return sizes.map(function(size) {
            cov_233hegbr4o.f[3]++;
            var column = (cov_233hegbr4o.s[16]++, new _adaptivecards.Column());
            cov_233hegbr4o.s[17]++;
            column.width = _adaptivecards.SizeAndUnit.parse(size);
            cov_233hegbr4o.s[18]++;
            columnSet.addColumn(column);
            cov_233hegbr4o.s[19]++;
            return column;
          });
        }
      },
      {
        key: 'addItems',
        value: function addItems(cardElements) {
          var container =
            arguments.length > 1 && arguments[1] !== undefined
              ? arguments[1]
              : (cov_233hegbr4o.b[4][0]++, this.container);
          cov_233hegbr4o.f[4]++;
          cov_233hegbr4o.s[20]++;
          cardElements.forEach(function(cardElement) {
            cov_233hegbr4o.f[5]++;
            cov_233hegbr4o.s[21]++;
            return container.addItem(cardElement);
          });
        }
      },
      {
        key: 'addTextBlock',
        value: function addTextBlock(text, template) {
          var container =
            arguments.length > 2 && arguments[2] !== undefined
              ? arguments[2]
              : (cov_233hegbr4o.b[5][0]++, this.container);
          cov_233hegbr4o.f[6]++;
          cov_233hegbr4o.s[22]++;

          if (typeof text !== 'undefined') {
            cov_233hegbr4o.b[6][0]++;
            var textblock = (cov_233hegbr4o.s[23]++, new _adaptivecards.TextBlock()); // tslint:disable-next-line:forin

            cov_233hegbr4o.s[24]++;

            for (var prop in template) {
              cov_233hegbr4o.s[25]++;
              textblock[prop] = template[prop];
            }

            cov_233hegbr4o.s[26]++;
            textblock.text = text;
            cov_233hegbr4o.s[27]++;
            container.addItem(textblock);
          } else {
            cov_233hegbr4o.b[6][1]++;
          }
        }
      },
      {
        key: 'addButtons',
        value: function addButtons(cardActions, includesOAuthButtons) {
          var _this = this;

          cov_233hegbr4o.f[7]++;
          cov_233hegbr4o.s[28]++;
          (cov_233hegbr4o.b[7][0]++, cardActions) &&
            (cov_233hegbr4o.b[7][1]++,
            cardActions.forEach(function(cardAction) {
              cov_233hegbr4o.f[8]++;
              cov_233hegbr4o.s[29]++;

              _this.card.addAction(addCardAction(cardAction, includesOAuthButtons));
            }));
        }
      },
      {
        key: 'addCommonHeaders',
        value: function addCommonHeaders(content) {
          cov_233hegbr4o.f[9]++;

          var _ref2 = (cov_233hegbr4o.s[30]++, this.styleOptions),
            richCardWrapTitle = _ref2.richCardWrapTitle;

          cov_233hegbr4o.s[31]++;
          this.addTextBlock(content.title, {
            color: _adaptivecards.TextColor.Dark,
            size: _adaptivecards.TextSize.Medium,
            weight: _adaptivecards.TextWeight.Bolder,
            wrap: richCardWrapTitle
          });
          cov_233hegbr4o.s[32]++;
          this.addTextBlock(content.subtitle, {
            color: _adaptivecards.TextColor.Dark,
            isSubtle: true,
            wrap: richCardWrapTitle
          });
          cov_233hegbr4o.s[33]++;
          this.addTextBlock(content.text, {
            color: _adaptivecards.TextColor.Dark,
            wrap: true
          });
        }
      },
      {
        key: 'addCommon',
        value: function addCommon(content) {
          cov_233hegbr4o.f[10]++;
          cov_233hegbr4o.s[34]++;
          this.addCommonHeaders(content);
          cov_233hegbr4o.s[35]++;
          this.addButtons(content.buttons);
        }
      },
      {
        key: 'addImage',
        value: function addImage(url, container, selectAction) {
          cov_233hegbr4o.f[11]++;
          cov_233hegbr4o.s[36]++;
          container = (cov_233hegbr4o.b[8][0]++, container) || (cov_233hegbr4o.b[8][1]++, this.container);
          var image = (cov_233hegbr4o.s[37]++, new _adaptivecards.Image());
          cov_233hegbr4o.s[38]++;
          image.url = url;
          cov_233hegbr4o.s[39]++;
          image.selectAction =
            (cov_233hegbr4o.b[9][0]++, selectAction) && (cov_233hegbr4o.b[9][1]++, addCardAction(selectAction));
          cov_233hegbr4o.s[40]++;
          image.size = _adaptivecards.Size.Stretch;
          cov_233hegbr4o.s[41]++;
          container.addItem(image);
        }
      }
    ]);
    return AdaptiveCardBuilder;
  })();

exports.default = AdaptiveCardBuilder;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hZGFwdGl2ZUNhcmRzL0F0dGFjaG1lbnQvQWRhcHRpdmVDYXJkQnVpbGRlci50cyJdLCJuYW1lcyI6WyJhZGRDYXJkQWN0aW9uIiwiY2FyZEFjdGlvbiIsImluY2x1ZGVzT0F1dGhCdXR0b25zIiwidHlwZSIsImFjdGlvbiIsIlN1Ym1pdEFjdGlvbiIsImRhdGEiLCJfX2lzQm90RnJhbWV3b3JrQ2FyZEFjdGlvbiIsInRpdGxlIiwiT3BlblVybEFjdGlvbiIsInVybCIsInZhbHVlIiwiQWRhcHRpdmVDYXJkQnVpbGRlciIsImFkYXB0aXZlQ2FyZHMiLCJzdHlsZU9wdGlvbnMiLCJjYXJkIiwiQWRhcHRpdmVDYXJkIiwiY29udGFpbmVyIiwiQ29udGFpbmVyIiwiYWRkSXRlbSIsInNpemVzIiwiY29sdW1uU2V0IiwiQ29sdW1uU2V0IiwibWFwIiwic2l6ZSIsImNvbHVtbiIsIkNvbHVtbiIsIndpZHRoIiwiU2l6ZUFuZFVuaXQiLCJwYXJzZSIsImFkZENvbHVtbiIsImNhcmRFbGVtZW50cyIsImZvckVhY2giLCJjYXJkRWxlbWVudCIsInRleHQiLCJ0ZW1wbGF0ZSIsInRleHRibG9jayIsIlRleHRCbG9jayIsInByb3AiLCJjYXJkQWN0aW9ucyIsImFkZEFjdGlvbiIsImNvbnRlbnQiLCJyaWNoQ2FyZFdyYXBUaXRsZSIsImFkZFRleHRCbG9jayIsImNvbG9yIiwiVGV4dENvbG9yIiwiRGFyayIsIlRleHRTaXplIiwiTWVkaXVtIiwid2VpZ2h0IiwiVGV4dFdlaWdodCIsIkJvbGRlciIsIndyYXAiLCJzdWJ0aXRsZSIsImlzU3VidGxlIiwiYWRkQ29tbW9uSGVhZGVycyIsImFkZEJ1dHRvbnMiLCJidXR0b25zIiwic2VsZWN0QWN0aW9uIiwiaW1hZ2UiLCJJbWFnZSIsIlNpemUiLCJTdHJldGNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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bW4sXG4gIENvbHVtblNldCxcbiAgQ29udGFpbmVyLFxuICBJbWFnZSxcbiAgT3BlblVybEFjdGlvbixcbiAgU2l6ZSxcbiAgU2l6ZUFuZFVuaXQsXG4gIFN1Ym1pdEFjdGlvbixcbiAgVGV4dEJsb2NrLFxuICBUZXh0Q29sb3IsXG4gIFRleHRTaXplLFxuICBUZXh0V2VpZ2h0XG59IGZyb20gJ2FkYXB0aXZlY2FyZHMnO1xuXG5pbXBvcnQgeyBDYXJkQWN0aW9uIH0gZnJvbSAnYm90ZnJhbWV3b3JrLWRpcmVjdGxpbmVqcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQm90RnJhbWV3b3JrQ2FyZEFjdGlvbiB7XG4gIF9faXNCb3RGcmFtZXdvcmtDYXJkQWN0aW9uOiBib29sZWFuO1xuICBjYXJkQWN0aW9uOiBDYXJkQWN0aW9uO1xufVxuXG5mdW5jdGlvbiBhZGRDYXJkQWN0aW9uKGNhcmRBY3Rpb246IENhcmRBY3Rpb24sIGluY2x1ZGVzT0F1dGhCdXR0b25zPzogYm9vbGVhbikge1xuICBjb25zdCB7IHR5cGUgfSA9IGNhcmRBY3Rpb247XG4gIGxldCBhY3Rpb247XG5cbiAgaWYgKFxuICAgIHR5cGUgPT09ICdpbUJhY2snIHx8XG4gICAgdHlwZSA9PT0gJ21lc3NhZ2VCYWNrJyB8fFxuICAgIHR5cGUgPT09ICdwb3N0QmFjaycgfHxcbiAgICAodHlwZSA9PT0gJ3NpZ25pbicgJiYgaW5jbHVkZXNPQXV0aEJ1dHRvbnMpXG4gICkge1xuICAgIGFjdGlvbiA9IG5ldyBTdWJtaXRBY3Rpb24oKTtcblxuICAgIGFjdGlvbi5kYXRhID0ge1xuICAgICAgX19pc0JvdEZyYW1ld29ya0NhcmRBY3Rpb246IHRydWUsXG4gICAgICBjYXJkQWN0aW9uXG4gICAgfTtcblxuICAgIGFjdGlvbi50aXRsZSA9IGNhcmRBY3Rpb24udGl0bGU7XG4gIH0gZWxzZSB7XG4gICAgYWN0aW9uID0gbmV3IE9wZW5VcmxBY3Rpb24oKTtcblxuICAgIGFjdGlvbi50aXRsZSA9IGNhcmRBY3Rpb24udGl0bGU7XG4gICAgYWN0aW9uLnVybCA9IGNhcmRBY3Rpb24udHlwZSA9PT0gJ2NhbGwnID8gYHRlbDoke2NhcmRBY3Rpb24udmFsdWV9YCA6IGNhcmRBY3Rpb24udmFsdWU7XG4gIH1cblxuICByZXR1cm4gYWN0aW9uO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBZGFwdGl2ZUNhcmRCdWlsZGVyIHtcbiAgY2FyZDogQWRhcHRpdmVDYXJkO1xuICBjb250YWluZXI6IENvbnRhaW5lcjtcbiAgc3R5bGVPcHRpb25zOiBhbnk7XG5cbiAgY29uc3RydWN0b3IoYWRhcHRpdmVDYXJkcywgc3R5bGVPcHRpb25zKSB7XG4gICAgdGhpcy5jYXJkID0gbmV3IGFkYXB0aXZlQ2FyZHMuQWRhcHRpdmVDYXJkKCk7XG4gICAgdGhpcy5jb250YWluZXIgPSBuZXcgQ29udGFpbmVyKCk7XG4gICAgdGhpcy5zdHlsZU9wdGlvbnMgPSBzdHlsZU9wdGlvbnM7XG5cbiAgICB0aGlzLmNhcmQuYWRkSXRlbSh0aGlzLmNvbnRhaW5lcik7XG4gIH1cblxuICBhZGRDb2x1bW5TZXQoc2l6ZXM6IG51bWJlcltdLCBjb250YWluZXI6IENvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyKSB7XG4gICAgY29uc3QgY29sdW1uU2V0ID0gbmV3IENvbHVtblNldCgpO1xuXG4gICAgY29udGFpbmVyLmFkZEl0ZW0oY29sdW1uU2V0KTtcblxuICAgIHJldHVybiBzaXplcy5tYXAoc2l6ZSA9PiB7XG4gICAgICBjb25zdCBjb2x1bW4gPSBuZXcgQ29sdW1uKCk7XG5cbiAgICAgIGNvbHVtbi53aWR0aCA9IFNpemVBbmRVbml0LnBhcnNlKHNpemUpO1xuXG4gICAgICBjb2x1bW5TZXQuYWRkQ29sdW1uKGNvbHVtbik7XG5cbiAgICAgIHJldHVybiBjb2x1bW47XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtcyhjYXJkRWxlbWVudHM6IENhcmRFbGVtZW50W10sIGNvbnRhaW5lcjogQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIpIHtcbiAgICBjYXJkRWxlbWVudHMuZm9yRWFjaChjYXJkRWxlbWVudCA9PiBjb250YWluZXIuYWRkSXRlbShjYXJkRWxlbWVudCkpO1xuICB9XG5cbiAgYWRkVGV4dEJsb2NrKHRleHQ6IHN0cmluZywgdGVtcGxhdGU6IFBhcnRpYWw8VGV4dEJsb2NrPiwgY29udGFpbmVyOiBDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcikge1xuICAgIGlmICh0eXBlb2YgdGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHRleHRibG9jayA9IG5ldyBUZXh0QmxvY2soKTtcblxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmZvcmluXG4gICAgICBmb3IgKGNvbnN0IHByb3AgaW4gdGVtcGxhdGUpIHtcbiAgICAgICAgdGV4dGJsb2NrW3Byb3BdID0gdGVtcGxhdGVbcHJvcF07XG4gICAgICB9XG5cbiAgICAgIHRleHRibG9jay50ZXh0ID0gdGV4dDtcblxuICAgICAgY29udGFpbmVyLmFkZEl0ZW0odGV4dGJsb2NrKTtcbiAgICB9XG4gIH1cblxuICBhZGRCdXR0b25zKGNhcmRBY3Rpb25zOiBDYXJkQWN0aW9uW10sIGluY2x1ZGVzT0F1dGhCdXR0b25zPzogYm9vbGVhbikge1xuICAgIGNhcmRBY3Rpb25zICYmXG4gICAgICBjYXJkQWN0aW9ucy5mb3JFYWNoKGNhcmRBY3Rpb24gPT4ge1xuICAgICAgICB0aGlzLmNhcmQuYWRkQWN0aW9uKGFkZENhcmRBY3Rpb24oY2FyZEFjdGlvbiwgaW5jbHVkZXNPQXV0aEJ1dHRvbnMpKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgYWRkQ29tbW9uSGVhZGVycyhjb250ZW50OiBJQ29tbW9uQ29udGVudCkge1xuICAgIGNvbnN0IHsgcmljaENhcmRXcmFwVGl0bGUgfSA9IHRoaXMuc3R5bGVPcHRpb25zO1xuICAgIHRoaXMuYWRkVGV4dEJsb2NrKGNvbnRlbnQudGl0bGUsIHtcbiAgICAgIGNvbG9yOiBUZXh0Q29sb3IuRGFyayxcbiAgICAgIHNpemU6IFRleHRTaXplLk1lZGl1bSxcbiAgICAgIHdlaWdodDogVGV4dFdlaWdodC5Cb2xkZXIsXG4gICAgICB3cmFwOiByaWNoQ2FyZFdyYXBUaXRsZVxuICAgIH0pO1xuICAgIHRoaXMuYWRkVGV4dEJsb2NrKGNvbnRlbnQuc3VidGl0bGUsIHsgY29sb3I6IFRleHRDb2xvci5EYXJrLCBpc1N1YnRsZTogdHJ1ZSwgd3JhcDogcmljaENhcmRXcmFwVGl0bGUgfSk7XG4gICAgdGhpcy5hZGRUZXh0QmxvY2soY29udGVudC50ZXh0LCB7IGNvbG9yOiBUZXh0Q29sb3IuRGFyaywgd3JhcDogdHJ1ZSB9KTtcbiAgfVxuXG4gIGFkZENvbW1vbihjb250ZW50OiBJQ29tbW9uQ29udGVudCkge1xuICAgIHRoaXMuYWRkQ29tbW9uSGVhZGVycyhjb250ZW50KTtcbiAgICB0aGlzLmFkZEJ1dHRvbnMoY29udGVudC5idXR0b25zKTtcbiAgfVxuXG4gIGFkZEltYWdlKHVybDogc3RyaW5nLCBjb250YWluZXI/OiBDb250YWluZXIsIHNlbGVjdEFjdGlvbj86IENhcmRBY3Rpb24pIHtcbiAgICBjb250YWluZXIgPSBjb250YWluZXIgfHwgdGhpcy5jb250YWluZXI7XG5cbiAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuXG4gICAgaW1hZ2UudXJsID0gdXJsO1xuICAgIGltYWdlLnNlbGVjdEFjdGlvbiA9IHNlbGVjdEFjdGlvbiAmJiBhZGRDYXJkQWN0aW9uKHNlbGVjdEFjdGlvbik7XG4gICAgaW1hZ2Uuc2l6ZSA9IFNpemUuU3RyZXRjaDtcblxuICAgIGNvbnRhaW5lci5hZGRJdGVtKGltYWdlKTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb21tb25Db250ZW50IHtcbiAgYnV0dG9ucz86IENhcmRBY3Rpb25bXTtcbiAgc3VidGl0bGU/OiBzdHJpbmc7XG4gIHRleHQ/OiBzdHJpbmc7XG4gIHRpdGxlPzogc3RyaW5nO1xufVxuIl19
