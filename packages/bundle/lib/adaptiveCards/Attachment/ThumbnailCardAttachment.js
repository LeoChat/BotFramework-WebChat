'use strict';

var cov_ftr49i234 = (function() {
  var path =
    '/home/guy/leo/BotFramework-WebChat/packages/bundle/src/adaptiveCards/Attachment/ThumbnailCardAttachment.js';
  var hash = '97d7b174317731672398fdbfa6d859c66f7f54a8';
  var global = new Function('return this')();
  var gcv = '__coverage__';
  var coverageData = {
    path: '/home/guy/leo/BotFramework-WebChat/packages/bundle/src/adaptiveCards/Attachment/ThumbnailCardAttachment.js',
    statementMap: {
      '0': {
        start: {
          line: 10,
          column: 28
        },
        end: {
          line: 10,
          column: 33
        }
      },
      '1': {
        start: {
          line: 12,
          column: 32
        },
        end: {
          line: 49,
          column: 1
        }
      },
      '2': {
        start: {
          line: 13,
          column: 25
        },
        end: {
          line: 13,
          column: 42
        }
      },
      '3': {
        start: {
          line: 14,
          column: 20
        },
        end: {
          line: 40,
          column: 44
        }
      },
      '4': {
        start: {
          line: 15,
          column: 4
        },
        end: {
          line: 39,
          column: 5
        }
      },
      '5': {
        start: {
          line: 16,
          column: 22
        },
        end: {
          line: 16,
          column: 74
        }
      },
      '6': {
        start: {
          line: 17,
          column: 39
        },
        end: {
          line: 17,
          column: 52
        }
      },
      '7': {
        start: {
          line: 18,
          column: 57
        },
        end: {
          line: 18,
          column: 64
        }
      },
      '8': {
        start: {
          line: 19,
          column: 36
        },
        end: {
          line: 19,
          column: 48
        }
      },
      '9': {
        start: {
          line: 21,
          column: 6
        },
        end: {
          line: 37,
          column: 7
        }
      },
      '10': {
        start: {
          line: 22,
          column: 42
        },
        end: {
          line: 22,
          column: 72
        }
      },
      '11': {
        start: {
          line: 23,
          column: 31
        },
        end: {
          line: 23,
          column: 37
        }
      },
      '12': {
        start: {
          line: 25,
          column: 8
        },
        end: {
          line: 29,
          column: 10
        }
      },
      '13': {
        start: {
          line: 31,
          column: 8
        },
        end: {
          line: 31,
          column: 97
        }
      },
      '14': {
        start: {
          line: 32,
          column: 8
        },
        end: {
          line: 32,
          column: 47
        }
      },
      '15': {
        start: {
          line: 33,
          column: 8
        },
        end: {
          line: 33,
          column: 51
        }
      },
      '16': {
        start: {
          line: 34,
          column: 8
        },
        end: {
          line: 34,
          column: 36
        }
      },
      '17': {
        start: {
          line: 36,
          column: 8
        },
        end: {
          line: 36,
          column: 35
        }
      },
      '18': {
        start: {
          line: 38,
          column: 6
        },
        end: {
          line: 38,
          column: 26
        }
      },
      '19': {
        start: {
          line: 42,
          column: 2
        },
        end: {
          line: 48,
          column: 4
        }
      },
      '20': {
        start: {
          line: 51,
          column: 0
        },
        end: {
          line: 69,
          column: 2
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 12,
            column: 32
          },
          end: {
            line: 12,
            column: 33
          }
        },
        loc: {
          start: {
            line: 12,
            column: 109
          },
          end: {
            line: 49,
            column: 1
          }
        },
        line: 12
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 14,
            column: 28
          },
          end: {
            line: 14,
            column: 29
          }
        },
        loc: {
          start: {
            line: 14,
            column: 34
          },
          end: {
            line: 40,
            column: 3
          }
        },
        line: 14
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 12,
            column: 86
          },
          end: {
            line: 12,
            column: 102
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 12,
              column: 100
            },
            end: {
              line: 12,
              column: 102
            }
          }
        ],
        line: 12
      },
      '1': {
        loc: {
          start: {
            line: 15,
            column: 4
          },
          end: {
            line: 39,
            column: 5
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 15,
              column: 4
            },
            end: {
              line: 39,
              column: 5
            }
          },
          {
            start: {
              line: 15,
              column: 4
            },
            end: {
              line: 39,
              column: 5
            }
          }
        ],
        line: 15
      },
      '2': {
        loc: {
          start: {
            line: 21,
            column: 6
          },
          end: {
            line: 37,
            column: 7
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 21,
              column: 6
            },
            end: {
              line: 37,
              column: 7
            }
          },
          {
            start: {
              line: 21,
              column: 6
            },
            end: {
              line: 37,
              column: 7
            }
          }
        ],
        line: 21
      },
      '3': {
        loc: {
          start: {
            line: 21,
            column: 10
          },
          end: {
            line: 21,
            column: 33
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 21,
              column: 10
            },
            end: {
              line: 21,
              column: 16
            }
          },
          {
            start: {
              line: 21,
              column: 20
            },
            end: {
              line: 21,
              column: 33
            }
          }
        ],
        line: 21
      },
      '4': {
        loc: {
          start: {
            line: 46,
            column: 17
          },
          end: {
            line: 46,
            column: 39
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 46,
              column: 17
            },
            end: {
              line: 46,
              column: 24
            }
          },
          {
            start: {
              line: 46,
              column: 28
            },
            end: {
              line: 46,
              column: 39
            }
          }
        ],
        line: 46
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0
    },
    f: {
      '0': 0,
      '1': 0
    },
    b: {
      '0': [0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0]
    },
    _coverageSchema: '43e27e138ebf9cfc5966b082cf9a028302ed4184',
    hash: '97d7b174317731672398fdbfa6d859c66f7f54a8'
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  return (coverage[path] = coverageData);
})();

var _interopRequireWildcard = require('@babel/runtime/helpers/interopRequireWildcard');

var _interopRequireDefault = require('@babel/runtime/helpers/interopRequireDefault');

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = void 0;

var _slicedToArray2 = _interopRequireDefault(require('@babel/runtime/helpers/slicedToArray'));

var _propTypes = _interopRequireDefault(require('prop-types'));

var _react = _interopRequireWildcard(require('react'));

var _botframeworkWebchatComponent = require('botframework-webchat-component');

var _AdaptiveCardBuilder = _interopRequireDefault(require('./AdaptiveCardBuilder'));

var _AdaptiveCardRenderer = _interopRequireDefault(require('./AdaptiveCardRenderer'));

var _ref = (cov_ftr49i234.s[0]++, _botframeworkWebchatComponent.hooks),
  useStyleOptions = _ref.useStyleOptions;

cov_ftr49i234.s[1]++;

var ThumbnailCardAttachment = function ThumbnailCardAttachment(_ref2) {
  var adaptiveCardHostConfig = _ref2.adaptiveCardHostConfig,
    adaptiveCards = _ref2.adaptiveCards,
    _ref2$attachment = _ref2.attachment;
  _ref2$attachment = _ref2$attachment === void 0 ? (cov_ftr49i234.b[0][0]++, {}) : _ref2$attachment;
  var content = _ref2$attachment.content;
  cov_ftr49i234.f[0]++;

  var _ref3 = (cov_ftr49i234.s[2]++, useStyleOptions()),
    _ref4 = (0, _slicedToArray2.default)(_ref3, 1),
    styleOptions = _ref4[0];

  var builtCard =
    (cov_ftr49i234.s[3]++,
    (0, _react.useMemo)(
      function() {
        cov_ftr49i234.f[1]++;
        cov_ftr49i234.s[4]++;

        if (content) {
          cov_ftr49i234.b[1][0]++;
          var builder = (cov_ftr49i234.s[5]++, new _AdaptiveCardBuilder.default(adaptiveCards, styleOptions));

          var _ref5 = (cov_ftr49i234.s[6]++, adaptiveCards),
            TextSize = _ref5.TextSize,
            TextWeight = _ref5.TextWeight;

          var _ref6 = (cov_ftr49i234.s[7]++, content),
            buttons = _ref6.buttons,
            images = _ref6.images,
            subtitle = _ref6.subtitle,
            text = _ref6.text,
            title = _ref6.title;

          var _ref7 = (cov_ftr49i234.s[8]++, styleOptions),
            richCardWrapTitle = _ref7.richCardWrapTitle;

          cov_ftr49i234.s[9]++;

          if ((cov_ftr49i234.b[3][0]++, images) && (cov_ftr49i234.b[3][1]++, images.length)) {
            cov_ftr49i234.b[2][0]++;

            var _ref8 = (cov_ftr49i234.s[10]++, builder.addColumnSet([75, 25])),
              _ref9 = (0, _slicedToArray2.default)(_ref8, 2),
              firstColumn = _ref9[0],
              lastColumn = _ref9[1];

            var _ref10 = (cov_ftr49i234.s[11]++, images),
              _ref11 = (0, _slicedToArray2.default)(_ref10, 1),
              _ref11$ = _ref11[0],
              tap = _ref11$.tap,
              url = _ref11$.url;

            cov_ftr49i234.s[12]++;
            builder.addTextBlock(
              title,
              {
                size: TextSize.Medium,
                weight: TextWeight.Bolder,
                wrap: richCardWrapTitle
              },
              firstColumn
            );
            cov_ftr49i234.s[13]++;
            builder.addTextBlock(
              subtitle,
              {
                isSubtle: true,
                wrap: richCardWrapTitle
              },
              firstColumn
            );
            cov_ftr49i234.s[14]++;
            builder.addImage(url, lastColumn, tap);
            cov_ftr49i234.s[15]++;
            builder.addTextBlock(text, {
              wrap: true
            });
            cov_ftr49i234.s[16]++;
            builder.addButtons(buttons);
          } else {
            cov_ftr49i234.b[2][1]++;
            cov_ftr49i234.s[17]++;
            builder.addCommon(content);
          }

          cov_ftr49i234.s[18]++;
          return builder.card;
        } else {
          cov_ftr49i234.b[1][1]++;
        }
      },
      [adaptiveCards, content, styleOptions]
    ));
  cov_ftr49i234.s[19]++;
  return _react.default.createElement(_AdaptiveCardRenderer.default, {
    adaptiveCard: builtCard,
    adaptiveCardHostConfig: adaptiveCardHostConfig,
    tapAction: (cov_ftr49i234.b[4][0]++, content) && (cov_ftr49i234.b[4][1]++, content.tap)
  });
};

cov_ftr49i234.s[20]++;
ThumbnailCardAttachment.propTypes = {
  adaptiveCardHostConfig: _propTypes.default.any.isRequired,
  adaptiveCards: _propTypes.default.any.isRequired,
  attachment: _propTypes.default.shape({
    content: _propTypes.default.shape({
      buttons: _propTypes.default.array,
      images: _propTypes.default.arrayOf(
        _propTypes.default.shape({
          tap: _propTypes.default.any,
          url: _propTypes.default.string.isRequired
        })
      ),
      subtitle: _propTypes.default.string,
      tap: _propTypes.default.any,
      text: _propTypes.default.string,
      title: _propTypes.default.string
    }).isRequired
  }).isRequired
};
var _default = ThumbnailCardAttachment;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hZGFwdGl2ZUNhcmRzL0F0dGFjaG1lbnQvVGh1bWJuYWlsQ2FyZEF0dGFjaG1lbnQuanMiXSwibmFtZXMiOlsiaG9va3MiLCJ1c2VTdHlsZU9wdGlvbnMiLCJUaHVtYm5haWxDYXJkQXR0YWNobWVudCIsImFkYXB0aXZlQ2FyZEhvc3RDb25maWciLCJhZGFwdGl2ZUNhcmRzIiwiYXR0YWNobWVudCIsImNvbnRlbnQiLCJzdHlsZU9wdGlvbnMiLCJidWlsdENhcmQiLCJidWlsZGVyIiwiQWRhcHRpdmVDYXJkQnVpbGRlciIsIlRleHRTaXplIiwiVGV4dFdlaWdodCIsImJ1dHRvbnMiLCJpbWFnZXMiLCJzdWJ0aXRsZSIsInRleHQiLCJ0aXRsZSIsInJpY2hDYXJkV3JhcFRpdGxlIiwibGVuZ3RoIiwiYWRkQ29sdW1uU2V0IiwiZmlyc3RDb2x1bW4iLCJsYXN0Q29sdW1uIiwidGFwIiwidXJsIiwiYWRkVGV4dEJsb2NrIiwic2l6ZSIsIk1lZGl1bSIsIndlaWdodCIsIkJvbGRlciIsIndyYXAiLCJpc1N1YnRsZSIsImFkZEltYWdlIiwiYWRkQnV0dG9ucyIsImFkZENvbW1vbiIsImNhcmQiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJhbnkiLCJpc1JlcXVpcmVkIiwic2hhcGUiLCJhcnJheSIsImFycmF5T2YiLCJzdHJpbmciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztrQ0FFNEJBLG1DO0lBQXBCQyxlLFFBQUFBLGU7Ozs7QUFFUixJQUFNQyx1QkFBdUIsR0FBRyxTQUExQkEsdUJBQTBCLFFBQTZFO0FBQUEsTUFBMUVDLHNCQUEwRSxTQUExRUEsc0JBQTBFO0FBQUEsTUFBbERDLGFBQWtELFNBQWxEQSxhQUFrRDtBQUFBLCtCQUFuQ0MsVUFBbUM7QUFBQSw2RUFBVCxFQUFTO0FBQUEsTUFBckJDLE9BQXFCLG9CQUFyQkEsT0FBcUI7QUFBQTs7QUFBQSxxQ0FDcEZMLGVBQWUsRUFEcUU7QUFBQTtBQUFBLE1BQ3BHTSxZQURvRzs7QUFFM0csTUFBTUMsU0FBUywwQkFBRyxvQkFBUSxZQUFNO0FBQUE7QUFBQTs7QUFDOUIsUUFBSUYsT0FBSixFQUFhO0FBQUE7QUFDWCxVQUFNRyxPQUFPLDBCQUFHLElBQUlDLDRCQUFKLENBQXdCTixhQUF4QixFQUF1Q0csWUFBdkMsQ0FBSCxDQUFiOztBQURXLHlDQUVzQkgsYUFGdEI7QUFBQSxVQUVITyxRQUZHLFNBRUhBLFFBRkc7QUFBQSxVQUVPQyxVQUZQLFNBRU9BLFVBRlA7O0FBQUEseUNBR3dDTixPQUh4QztBQUFBLFVBR0hPLE9BSEcsU0FHSEEsT0FIRztBQUFBLFVBR01DLE1BSE4sU0FHTUEsTUFITjtBQUFBLFVBR2NDLFFBSGQsU0FHY0EsUUFIZDtBQUFBLFVBR3dCQyxJQUh4QixTQUd3QkEsSUFIeEI7QUFBQSxVQUc4QkMsS0FIOUIsU0FHOEJBLEtBSDlCOztBQUFBLHlDQUltQlYsWUFKbkI7QUFBQSxVQUlIVyxpQkFKRyxTQUlIQSxpQkFKRzs7QUFBQTs7QUFNWCxVQUFJLDBCQUFBSixNQUFNLCtCQUFJQSxNQUFNLENBQUNLLE1BQVgsQ0FBVixFQUE2QjtBQUFBOztBQUFBLDRDQUNPVixPQUFPLENBQUNXLFlBQVIsQ0FBcUIsQ0FBQyxFQUFELEVBQUssRUFBTCxDQUFyQixDQURQO0FBQUE7QUFBQSxZQUNwQkMsV0FEb0I7QUFBQSxZQUNQQyxVQURPOztBQUFBLDZDQUVKUixNQUZJO0FBQUE7QUFBQTtBQUFBLFlBRWxCUyxHQUZrQixXQUVsQkEsR0FGa0I7QUFBQSxZQUViQyxHQUZhLFdBRWJBLEdBRmE7O0FBQUE7QUFJM0JmLFFBQUFBLE9BQU8sQ0FBQ2dCLFlBQVIsQ0FDRVIsS0FERixFQUVFO0FBQUVTLFVBQUFBLElBQUksRUFBRWYsUUFBUSxDQUFDZ0IsTUFBakI7QUFBeUJDLFVBQUFBLE1BQU0sRUFBRWhCLFVBQVUsQ0FBQ2lCLE1BQTVDO0FBQW9EQyxVQUFBQSxJQUFJLEVBQUVaO0FBQTFELFNBRkYsRUFHRUcsV0FIRjtBQUoyQjtBQVUzQlosUUFBQUEsT0FBTyxDQUFDZ0IsWUFBUixDQUFxQlYsUUFBckIsRUFBK0I7QUFBRWdCLFVBQUFBLFFBQVEsRUFBRSxJQUFaO0FBQWtCRCxVQUFBQSxJQUFJLEVBQUVaO0FBQXhCLFNBQS9CLEVBQTRFRyxXQUE1RTtBQVYyQjtBQVczQlosUUFBQUEsT0FBTyxDQUFDdUIsUUFBUixDQUFpQlIsR0FBakIsRUFBc0JGLFVBQXRCLEVBQWtDQyxHQUFsQztBQVgyQjtBQVkzQmQsUUFBQUEsT0FBTyxDQUFDZ0IsWUFBUixDQUFxQlQsSUFBckIsRUFBMkI7QUFBRWMsVUFBQUEsSUFBSSxFQUFFO0FBQVIsU0FBM0I7QUFaMkI7QUFhM0JyQixRQUFBQSxPQUFPLENBQUN3QixVQUFSLENBQW1CcEIsT0FBbkI7QUFDRCxPQWRELE1BY087QUFBQTtBQUFBO0FBQ0xKLFFBQUFBLE9BQU8sQ0FBQ3lCLFNBQVIsQ0FBa0I1QixPQUFsQjtBQUNEOztBQXRCVTtBQXVCWCxhQUFPRyxPQUFPLENBQUMwQixJQUFmO0FBQ0QsS0F4QkQ7QUFBQTtBQUFBO0FBeUJELEdBMUJpQixFQTBCZixDQUFDL0IsYUFBRCxFQUFnQkUsT0FBaEIsRUFBeUJDLFlBQXpCLENBMUJlLENBQUgsQ0FBZjtBQUYyRztBQThCM0csU0FDRSw2QkFBQyw2QkFBRDtBQUNFLElBQUEsWUFBWSxFQUFFQyxTQURoQjtBQUVFLElBQUEsc0JBQXNCLEVBQUVMLHNCQUYxQjtBQUdFLElBQUEsU0FBUyxFQUFFLDBCQUFBRyxPQUFPLCtCQUFJQSxPQUFPLENBQUNpQixHQUFaO0FBSHBCLElBREY7QUFPRCxDQXJDRDs7O0FBdUNBckIsdUJBQXVCLENBQUNrQyxTQUF4QixHQUFvQztBQUNsQ2pDLEVBQUFBLHNCQUFzQixFQUFFa0MsbUJBQVVDLEdBQVYsQ0FBY0MsVUFESjtBQUVsQ25DLEVBQUFBLGFBQWEsRUFBRWlDLG1CQUFVQyxHQUFWLENBQWNDLFVBRks7QUFHbENsQyxFQUFBQSxVQUFVLEVBQUVnQyxtQkFBVUcsS0FBVixDQUFnQjtBQUMxQmxDLElBQUFBLE9BQU8sRUFBRStCLG1CQUFVRyxLQUFWLENBQWdCO0FBQ3ZCM0IsTUFBQUEsT0FBTyxFQUFFd0IsbUJBQVVJLEtBREk7QUFFdkIzQixNQUFBQSxNQUFNLEVBQUV1QixtQkFBVUssT0FBVixDQUNOTCxtQkFBVUcsS0FBVixDQUFnQjtBQUNkakIsUUFBQUEsR0FBRyxFQUFFYyxtQkFBVUMsR0FERDtBQUVkZCxRQUFBQSxHQUFHLEVBQUVhLG1CQUFVTSxNQUFWLENBQWlCSjtBQUZSLE9BQWhCLENBRE0sQ0FGZTtBQVF2QnhCLE1BQUFBLFFBQVEsRUFBRXNCLG1CQUFVTSxNQVJHO0FBU3ZCcEIsTUFBQUEsR0FBRyxFQUFFYyxtQkFBVUMsR0FUUTtBQVV2QnRCLE1BQUFBLElBQUksRUFBRXFCLG1CQUFVTSxNQVZPO0FBV3ZCMUIsTUFBQUEsS0FBSyxFQUFFb0IsbUJBQVVNO0FBWE0sS0FBaEIsRUFZTko7QUFidUIsR0FBaEIsRUFjVEE7QUFqQitCLENBQXBDO2VBb0JlckMsdUIiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQgbm8tbWFnaWMtbnVtYmVyczogW1wiZXJyb3JcIiwgeyBcImlnbm9yZVwiOiBbMjUsIDc1XSB9XSAqL1xuXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IGhvb2tzIH0gZnJvbSAnYm90ZnJhbWV3b3JrLXdlYmNoYXQtY29tcG9uZW50JztcbmltcG9ydCBBZGFwdGl2ZUNhcmRCdWlsZGVyIGZyb20gJy4vQWRhcHRpdmVDYXJkQnVpbGRlcic7XG5pbXBvcnQgQWRhcHRpdmVDYXJkUmVuZGVyZXIgZnJvbSAnLi9BZGFwdGl2ZUNhcmRSZW5kZXJlcic7XG5cbmNvbnN0IHsgdXNlU3R5bGVPcHRpb25zIH0gPSBob29rcztcblxuY29uc3QgVGh1bWJuYWlsQ2FyZEF0dGFjaG1lbnQgPSAoeyBhZGFwdGl2ZUNhcmRIb3N0Q29uZmlnLCBhZGFwdGl2ZUNhcmRzLCBhdHRhY2htZW50OiB7IGNvbnRlbnQgfSA9IHt9IH0pID0+IHtcbiAgY29uc3QgW3N0eWxlT3B0aW9uc10gPSB1c2VTdHlsZU9wdGlvbnMoKTtcbiAgY29uc3QgYnVpbHRDYXJkID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIGNvbnN0IGJ1aWxkZXIgPSBuZXcgQWRhcHRpdmVDYXJkQnVpbGRlcihhZGFwdGl2ZUNhcmRzLCBzdHlsZU9wdGlvbnMpO1xuICAgICAgY29uc3QgeyBUZXh0U2l6ZSwgVGV4dFdlaWdodCB9ID0gYWRhcHRpdmVDYXJkcztcbiAgICAgIGNvbnN0IHsgYnV0dG9ucywgaW1hZ2VzLCBzdWJ0aXRsZSwgdGV4dCwgdGl0bGUgfSA9IGNvbnRlbnQ7XG4gICAgICBjb25zdCB7IHJpY2hDYXJkV3JhcFRpdGxlIH0gPSBzdHlsZU9wdGlvbnM7XG5cbiAgICAgIGlmIChpbWFnZXMgJiYgaW1hZ2VzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBbZmlyc3RDb2x1bW4sIGxhc3RDb2x1bW5dID0gYnVpbGRlci5hZGRDb2x1bW5TZXQoWzc1LCAyNV0pO1xuICAgICAgICBjb25zdCBbeyB0YXAsIHVybCB9XSA9IGltYWdlcztcblxuICAgICAgICBidWlsZGVyLmFkZFRleHRCbG9jayhcbiAgICAgICAgICB0aXRsZSxcbiAgICAgICAgICB7IHNpemU6IFRleHRTaXplLk1lZGl1bSwgd2VpZ2h0OiBUZXh0V2VpZ2h0LkJvbGRlciwgd3JhcDogcmljaENhcmRXcmFwVGl0bGUgfSxcbiAgICAgICAgICBmaXJzdENvbHVtblxuICAgICAgICApO1xuXG4gICAgICAgIGJ1aWxkZXIuYWRkVGV4dEJsb2NrKHN1YnRpdGxlLCB7IGlzU3VidGxlOiB0cnVlLCB3cmFwOiByaWNoQ2FyZFdyYXBUaXRsZSB9LCBmaXJzdENvbHVtbik7XG4gICAgICAgIGJ1aWxkZXIuYWRkSW1hZ2UodXJsLCBsYXN0Q29sdW1uLCB0YXApO1xuICAgICAgICBidWlsZGVyLmFkZFRleHRCbG9jayh0ZXh0LCB7IHdyYXA6IHRydWUgfSk7XG4gICAgICAgIGJ1aWxkZXIuYWRkQnV0dG9ucyhidXR0b25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ1aWxkZXIuYWRkQ29tbW9uKGNvbnRlbnQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJ1aWxkZXIuY2FyZDtcbiAgICB9XG4gIH0sIFthZGFwdGl2ZUNhcmRzLCBjb250ZW50LCBzdHlsZU9wdGlvbnNdKTtcblxuICByZXR1cm4gKFxuICAgIDxBZGFwdGl2ZUNhcmRSZW5kZXJlclxuICAgICAgYWRhcHRpdmVDYXJkPXtidWlsdENhcmR9XG4gICAgICBhZGFwdGl2ZUNhcmRIb3N0Q29uZmlnPXthZGFwdGl2ZUNhcmRIb3N0Q29uZmlnfVxuICAgICAgdGFwQWN0aW9uPXtjb250ZW50ICYmIGNvbnRlbnQudGFwfVxuICAgIC8+XG4gICk7XG59O1xuXG5UaHVtYm5haWxDYXJkQXR0YWNobWVudC5wcm9wVHlwZXMgPSB7XG4gIGFkYXB0aXZlQ2FyZEhvc3RDb25maWc6IFByb3BUeXBlcy5hbnkuaXNSZXF1aXJlZCxcbiAgYWRhcHRpdmVDYXJkczogUHJvcFR5cGVzLmFueS5pc1JlcXVpcmVkLFxuICBhdHRhY2htZW50OiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIGNvbnRlbnQ6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBidXR0b25zOiBQcm9wVHlwZXMuYXJyYXksXG4gICAgICBpbWFnZXM6IFByb3BUeXBlcy5hcnJheU9mKFxuICAgICAgICBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgIHRhcDogUHJvcFR5cGVzLmFueSxcbiAgICAgICAgICB1cmw6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxuICAgICAgICB9KVxuICAgICAgKSxcbiAgICAgIHN1YnRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgdGFwOiBQcm9wVHlwZXMuYW55LFxuICAgICAgdGV4dDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nXG4gICAgfSkuaXNSZXF1aXJlZFxuICB9KS5pc1JlcXVpcmVkXG59O1xuXG5leHBvcnQgZGVmYXVsdCBUaHVtYm5haWxDYXJkQXR0YWNobWVudDtcbiJdfQ==
