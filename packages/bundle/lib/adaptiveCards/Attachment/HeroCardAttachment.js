'use strict';

var _interopRequireWildcard = require('@babel/runtime/helpers/interopRequireWildcard');

var _interopRequireDefault = require('@babel/runtime/helpers/interopRequireDefault');

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = void 0;

var _slicedToArray2 = _interopRequireDefault(require('@babel/runtime/helpers/slicedToArray'));

var _propTypes = _interopRequireDefault(require('prop-types'));

var _react = _interopRequireWildcard(require('react'));

var _botframeworkWebchatComponent = require('botframework-webchat-component');

var _AdaptiveCardBuilder = _interopRequireDefault(require('./AdaptiveCardBuilder'));

var _AdaptiveCardRenderer = _interopRequireDefault(require('./AdaptiveCardRenderer'));

var useStyleOptions = _botframeworkWebchatComponent.hooks.useStyleOptions;

var HeroCardAttachment = function HeroCardAttachment(_ref) {
  var adaptiveCardHostConfig = _ref.adaptiveCardHostConfig,
    adaptiveCards = _ref.adaptiveCards,
    _ref$attachment = _ref.attachment;
  _ref$attachment = _ref$attachment === void 0 ? {} : _ref$attachment;
  var content = _ref$attachment.content;

  var _useStyleOptions = useStyleOptions(),
    _useStyleOptions2 = (0, _slicedToArray2.default)(_useStyleOptions, 1),
    styleOptions = _useStyleOptions2[0];

  var builtCard = (0, _react.useMemo)(
    function() {
      var builder = new _AdaptiveCardBuilder.default(adaptiveCards, styleOptions);

      if (content) {
        (content.images || []).forEach(function(image) {
          return builder.addImage(image.url, null, image.tap);
        });
        builder.addCommon(content);
        return builder.card;
      }
    },
    [adaptiveCards, content, styleOptions]
  );
  return _react.default.createElement(_AdaptiveCardRenderer.default, {
    adaptiveCard: builtCard,
    adaptiveCardHostConfig: adaptiveCardHostConfig,
    tapAction: content && content.tap
  });
};

HeroCardAttachment.propTypes = {
  adaptiveCardHostConfig: _propTypes.default.any.isRequired,
  adaptiveCards: _propTypes.default.any.isRequired,
  attachment: _propTypes.default.shape({
    content: _propTypes.default.shape({
      tap: _propTypes.default.any
    }).isRequired
  }).isRequired,
  styleSet: _propTypes.default.shape({
    options: _propTypes.default.any.isRequired
  }).isRequired
};
var _default = HeroCardAttachment;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hZGFwdGl2ZUNhcmRzL0F0dGFjaG1lbnQvSGVyb0NhcmRBdHRhY2htZW50LmpzIl0sIm5hbWVzIjpbInVzZVN0eWxlT3B0aW9ucyIsImhvb2tzIiwiSGVyb0NhcmRBdHRhY2htZW50IiwiYWRhcHRpdmVDYXJkSG9zdENvbmZpZyIsImFkYXB0aXZlQ2FyZHMiLCJhdHRhY2htZW50IiwiY29udGVudCIsInN0eWxlT3B0aW9ucyIsImJ1aWx0Q2FyZCIsImJ1aWxkZXIiLCJBZGFwdGl2ZUNhcmRCdWlsZGVyIiwiaW1hZ2VzIiwiZm9yRWFjaCIsImltYWdlIiwiYWRkSW1hZ2UiLCJ1cmwiLCJ0YXAiLCJhZGRDb21tb24iLCJjYXJkIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwiYW55IiwiaXNSZXF1aXJlZCIsInNoYXBlIiwic3R5bGVTZXQiLCJvcHRpb25zIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0lBRVFBLGUsR0FBb0JDLG1DLENBQXBCRCxlOztBQUVSLElBQU1FLGtCQUFrQixHQUFHLFNBQXJCQSxrQkFBcUIsT0FBNkU7QUFBQSxNQUExRUMsc0JBQTBFLFFBQTFFQSxzQkFBMEU7QUFBQSxNQUFsREMsYUFBa0QsUUFBbERBLGFBQWtEO0FBQUEsNkJBQW5DQyxVQUFtQztBQUFBLGlEQUFULEVBQVM7QUFBQSxNQUFyQkMsT0FBcUIsbUJBQXJCQSxPQUFxQjs7QUFBQSx5QkFDL0VOLGVBQWUsRUFEZ0U7QUFBQTtBQUFBLE1BQy9GTyxZQUQrRjs7QUFFdEcsTUFBTUMsU0FBUyxHQUFHLG9CQUFRLFlBQU07QUFDOUIsUUFBTUMsT0FBTyxHQUFHLElBQUlDLDRCQUFKLENBQXdCTixhQUF4QixFQUF1Q0csWUFBdkMsQ0FBaEI7O0FBRUEsUUFBSUQsT0FBSixFQUFhO0FBQ1gsT0FBQ0EsT0FBTyxDQUFDSyxNQUFSLElBQWtCLEVBQW5CLEVBQXVCQyxPQUF2QixDQUErQixVQUFBQyxLQUFLO0FBQUEsZUFBSUosT0FBTyxDQUFDSyxRQUFSLENBQWlCRCxLQUFLLENBQUNFLEdBQXZCLEVBQTRCLElBQTVCLEVBQWtDRixLQUFLLENBQUNHLEdBQXhDLENBQUo7QUFBQSxPQUFwQztBQUVBUCxNQUFBQSxPQUFPLENBQUNRLFNBQVIsQ0FBa0JYLE9BQWxCO0FBRUEsYUFBT0csT0FBTyxDQUFDUyxJQUFmO0FBQ0Q7QUFDRixHQVZpQixFQVVmLENBQUNkLGFBQUQsRUFBZ0JFLE9BQWhCLEVBQXlCQyxZQUF6QixDQVZlLENBQWxCO0FBWUEsU0FDRSw2QkFBQyw2QkFBRDtBQUNFLElBQUEsWUFBWSxFQUFFQyxTQURoQjtBQUVFLElBQUEsc0JBQXNCLEVBQUVMLHNCQUYxQjtBQUdFLElBQUEsU0FBUyxFQUFFRyxPQUFPLElBQUlBLE9BQU8sQ0FBQ1U7QUFIaEMsSUFERjtBQU9ELENBckJEOztBQXVCQWQsa0JBQWtCLENBQUNpQixTQUFuQixHQUErQjtBQUM3QmhCLEVBQUFBLHNCQUFzQixFQUFFaUIsbUJBQVVDLEdBQVYsQ0FBY0MsVUFEVDtBQUU3QmxCLEVBQUFBLGFBQWEsRUFBRWdCLG1CQUFVQyxHQUFWLENBQWNDLFVBRkE7QUFHN0JqQixFQUFBQSxVQUFVLEVBQUVlLG1CQUFVRyxLQUFWLENBQWdCO0FBQzFCakIsSUFBQUEsT0FBTyxFQUFFYyxtQkFBVUcsS0FBVixDQUFnQjtBQUN2QlAsTUFBQUEsR0FBRyxFQUFFSSxtQkFBVUM7QUFEUSxLQUFoQixFQUVOQztBQUh1QixHQUFoQixFQUlUQSxVQVAwQjtBQVE3QkUsRUFBQUEsUUFBUSxFQUFFSixtQkFBVUcsS0FBVixDQUFnQjtBQUN4QkUsSUFBQUEsT0FBTyxFQUFFTCxtQkFBVUMsR0FBVixDQUFjQztBQURDLEdBQWhCLEVBRVBBO0FBVjBCLENBQS9CO2VBYWVwQixrQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgaG9va3MgfSBmcm9tICdib3RmcmFtZXdvcmstd2ViY2hhdC1jb21wb25lbnQnO1xuaW1wb3J0IEFkYXB0aXZlQ2FyZEJ1aWxkZXIgZnJvbSAnLi9BZGFwdGl2ZUNhcmRCdWlsZGVyJztcbmltcG9ydCBBZGFwdGl2ZUNhcmRSZW5kZXJlciBmcm9tICcuL0FkYXB0aXZlQ2FyZFJlbmRlcmVyJztcblxuY29uc3QgeyB1c2VTdHlsZU9wdGlvbnMgfSA9IGhvb2tzO1xuXG5jb25zdCBIZXJvQ2FyZEF0dGFjaG1lbnQgPSAoeyBhZGFwdGl2ZUNhcmRIb3N0Q29uZmlnLCBhZGFwdGl2ZUNhcmRzLCBhdHRhY2htZW50OiB7IGNvbnRlbnQgfSA9IHt9IH0pID0+IHtcbiAgY29uc3QgW3N0eWxlT3B0aW9uc10gPSB1c2VTdHlsZU9wdGlvbnMoKTtcbiAgY29uc3QgYnVpbHRDYXJkID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgYnVpbGRlciA9IG5ldyBBZGFwdGl2ZUNhcmRCdWlsZGVyKGFkYXB0aXZlQ2FyZHMsIHN0eWxlT3B0aW9ucyk7XG5cbiAgICBpZiAoY29udGVudCkge1xuICAgICAgKGNvbnRlbnQuaW1hZ2VzIHx8IFtdKS5mb3JFYWNoKGltYWdlID0+IGJ1aWxkZXIuYWRkSW1hZ2UoaW1hZ2UudXJsLCBudWxsLCBpbWFnZS50YXApKTtcblxuICAgICAgYnVpbGRlci5hZGRDb21tb24oY29udGVudCk7XG5cbiAgICAgIHJldHVybiBidWlsZGVyLmNhcmQ7XG4gICAgfVxuICB9LCBbYWRhcHRpdmVDYXJkcywgY29udGVudCwgc3R5bGVPcHRpb25zXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8QWRhcHRpdmVDYXJkUmVuZGVyZXJcbiAgICAgIGFkYXB0aXZlQ2FyZD17YnVpbHRDYXJkfVxuICAgICAgYWRhcHRpdmVDYXJkSG9zdENvbmZpZz17YWRhcHRpdmVDYXJkSG9zdENvbmZpZ31cbiAgICAgIHRhcEFjdGlvbj17Y29udGVudCAmJiBjb250ZW50LnRhcH1cbiAgICAvPlxuICApO1xufTtcblxuSGVyb0NhcmRBdHRhY2htZW50LnByb3BUeXBlcyA9IHtcbiAgYWRhcHRpdmVDYXJkSG9zdENvbmZpZzogUHJvcFR5cGVzLmFueS5pc1JlcXVpcmVkLFxuICBhZGFwdGl2ZUNhcmRzOiBQcm9wVHlwZXMuYW55LmlzUmVxdWlyZWQsXG4gIGF0dGFjaG1lbnQ6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgY29udGVudDogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgIHRhcDogUHJvcFR5cGVzLmFueVxuICAgIH0pLmlzUmVxdWlyZWRcbiAgfSkuaXNSZXF1aXJlZCxcbiAgc3R5bGVTZXQ6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgb3B0aW9uczogUHJvcFR5cGVzLmFueS5pc1JlcXVpcmVkXG4gIH0pLmlzUmVxdWlyZWRcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEhlcm9DYXJkQXR0YWNobWVudDtcbiJdfQ==
