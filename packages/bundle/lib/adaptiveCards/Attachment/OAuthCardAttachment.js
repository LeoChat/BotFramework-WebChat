'use strict';

var _interopRequireWildcard = require('@babel/runtime/helpers/interopRequireWildcard');

var _interopRequireDefault = require('@babel/runtime/helpers/interopRequireDefault');

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = void 0;

var _slicedToArray2 = _interopRequireDefault(require('@babel/runtime/helpers/slicedToArray'));

var _propTypes = _interopRequireDefault(require('prop-types'));

var _react = _interopRequireWildcard(require('react'));

var _botframeworkWebchatComponent = require('botframework-webchat-component');

var _AdaptiveCardBuilder = _interopRequireDefault(require('./AdaptiveCardBuilder'));

var _AdaptiveCardRenderer = _interopRequireDefault(require('./AdaptiveCardRenderer'));

var useStyleOptions = _botframeworkWebchatComponent.hooks.useStyleOptions;

var OAuthCardAttachment = function OAuthCardAttachment(_ref) {
  var adaptiveCardHostConfig = _ref.adaptiveCardHostConfig,
    adaptiveCards = _ref.adaptiveCards,
    _ref$attachment = _ref.attachment;
  _ref$attachment = _ref$attachment === void 0 ? {} : _ref$attachment;
  var content = _ref$attachment.content;

  var _useStyleOptions = useStyleOptions(),
    _useStyleOptions2 = (0, _slicedToArray2.default)(_useStyleOptions, 1),
    styleOptions = _useStyleOptions2[0];

  var builtCard = (0, _react.useMemo)(
    function() {
      if (content) {
        var builder = new _AdaptiveCardBuilder.default(adaptiveCards, styleOptions);
        builder.addCommonHeaders(content);
        builder.addButtons((content || {}).buttons, true);
        return builder.card;
      }
    },
    [adaptiveCards, content, styleOptions]
  );
  return _react.default.createElement(_AdaptiveCardRenderer.default, {
    adaptiveCard: builtCard,
    adaptiveCardHostConfig: adaptiveCardHostConfig
  });
};

OAuthCardAttachment.propTypes = {
  adaptiveCardHostConfig: _propTypes.default.any.isRequired,
  adaptiveCards: _propTypes.default.any.isRequired,
  attachment: _propTypes.default.shape({
    content: _propTypes.default.shape({
      buttons: _propTypes.default.array
    }).isRequired
  }).isRequired
};
var _default = OAuthCardAttachment;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hZGFwdGl2ZUNhcmRzL0F0dGFjaG1lbnQvT0F1dGhDYXJkQXR0YWNobWVudC5qcyJdLCJuYW1lcyI6WyJ1c2VTdHlsZU9wdGlvbnMiLCJob29rcyIsIk9BdXRoQ2FyZEF0dGFjaG1lbnQiLCJhZGFwdGl2ZUNhcmRIb3N0Q29uZmlnIiwiYWRhcHRpdmVDYXJkcyIsImF0dGFjaG1lbnQiLCJjb250ZW50Iiwic3R5bGVPcHRpb25zIiwiYnVpbHRDYXJkIiwiYnVpbGRlciIsIkFkYXB0aXZlQ2FyZEJ1aWxkZXIiLCJhZGRDb21tb25IZWFkZXJzIiwiYWRkQnV0dG9ucyIsImJ1dHRvbnMiLCJjYXJkIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwiYW55IiwiaXNSZXF1aXJlZCIsInNoYXBlIiwiYXJyYXkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7SUFFUUEsZSxHQUFvQkMsbUMsQ0FBcEJELGU7O0FBRVIsSUFBTUUsbUJBQW1CLEdBQUcsU0FBdEJBLG1CQUFzQixPQUE2RTtBQUFBLE1BQTFFQyxzQkFBMEUsUUFBMUVBLHNCQUEwRTtBQUFBLE1BQWxEQyxhQUFrRCxRQUFsREEsYUFBa0Q7QUFBQSw2QkFBbkNDLFVBQW1DO0FBQUEsaURBQVQsRUFBUztBQUFBLE1BQXJCQyxPQUFxQixtQkFBckJBLE9BQXFCOztBQUFBLHlCQUNoRk4sZUFBZSxFQURpRTtBQUFBO0FBQUEsTUFDaEdPLFlBRGdHOztBQUd2RyxNQUFNQyxTQUFTLEdBQUcsb0JBQVEsWUFBTTtBQUM5QixRQUFJRixPQUFKLEVBQWE7QUFDWCxVQUFNRyxPQUFPLEdBQUcsSUFBSUMsNEJBQUosQ0FBd0JOLGFBQXhCLEVBQXVDRyxZQUF2QyxDQUFoQjtBQUVBRSxNQUFBQSxPQUFPLENBQUNFLGdCQUFSLENBQXlCTCxPQUF6QjtBQUNBRyxNQUFBQSxPQUFPLENBQUNHLFVBQVIsQ0FBbUIsQ0FBQ04sT0FBTyxJQUFJLEVBQVosRUFBZ0JPLE9BQW5DLEVBQTRDLElBQTVDO0FBRUEsYUFBT0osT0FBTyxDQUFDSyxJQUFmO0FBQ0Q7QUFDRixHQVRpQixFQVNmLENBQUNWLGFBQUQsRUFBZ0JFLE9BQWhCLEVBQXlCQyxZQUF6QixDQVRlLENBQWxCO0FBV0EsU0FBTyw2QkFBQyw2QkFBRDtBQUFzQixJQUFBLFlBQVksRUFBRUMsU0FBcEM7QUFBK0MsSUFBQSxzQkFBc0IsRUFBRUw7QUFBdkUsSUFBUDtBQUNELENBZkQ7O0FBaUJBRCxtQkFBbUIsQ0FBQ2EsU0FBcEIsR0FBZ0M7QUFDOUJaLEVBQUFBLHNCQUFzQixFQUFFYSxtQkFBVUMsR0FBVixDQUFjQyxVQURSO0FBRTlCZCxFQUFBQSxhQUFhLEVBQUVZLG1CQUFVQyxHQUFWLENBQWNDLFVBRkM7QUFHOUJiLEVBQUFBLFVBQVUsRUFBRVcsbUJBQVVHLEtBQVYsQ0FBZ0I7QUFDMUJiLElBQUFBLE9BQU8sRUFBRVUsbUJBQVVHLEtBQVYsQ0FBZ0I7QUFDdkJOLE1BQUFBLE9BQU8sRUFBRUcsbUJBQVVJO0FBREksS0FBaEIsRUFFTkY7QUFIdUIsR0FBaEIsRUFJVEE7QUFQMkIsQ0FBaEM7ZUFVZWhCLG1CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCwgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBob29rcyB9IGZyb20gJ2JvdGZyYW1ld29yay13ZWJjaGF0LWNvbXBvbmVudCc7XG5pbXBvcnQgQWRhcHRpdmVDYXJkQnVpbGRlciBmcm9tICcuL0FkYXB0aXZlQ2FyZEJ1aWxkZXInO1xuaW1wb3J0IEFkYXB0aXZlQ2FyZFJlbmRlcmVyIGZyb20gJy4vQWRhcHRpdmVDYXJkUmVuZGVyZXInO1xuXG5jb25zdCB7IHVzZVN0eWxlT3B0aW9ucyB9ID0gaG9va3M7XG5cbmNvbnN0IE9BdXRoQ2FyZEF0dGFjaG1lbnQgPSAoeyBhZGFwdGl2ZUNhcmRIb3N0Q29uZmlnLCBhZGFwdGl2ZUNhcmRzLCBhdHRhY2htZW50OiB7IGNvbnRlbnQgfSA9IHt9IH0pID0+IHtcbiAgY29uc3QgW3N0eWxlT3B0aW9uc10gPSB1c2VTdHlsZU9wdGlvbnMoKTtcblxuICBjb25zdCBidWlsdENhcmQgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoY29udGVudCkge1xuICAgICAgY29uc3QgYnVpbGRlciA9IG5ldyBBZGFwdGl2ZUNhcmRCdWlsZGVyKGFkYXB0aXZlQ2FyZHMsIHN0eWxlT3B0aW9ucyk7XG5cbiAgICAgIGJ1aWxkZXIuYWRkQ29tbW9uSGVhZGVycyhjb250ZW50KTtcbiAgICAgIGJ1aWxkZXIuYWRkQnV0dG9ucygoY29udGVudCB8fCB7fSkuYnV0dG9ucywgdHJ1ZSk7XG5cbiAgICAgIHJldHVybiBidWlsZGVyLmNhcmQ7XG4gICAgfVxuICB9LCBbYWRhcHRpdmVDYXJkcywgY29udGVudCwgc3R5bGVPcHRpb25zXSk7XG5cbiAgcmV0dXJuIDxBZGFwdGl2ZUNhcmRSZW5kZXJlciBhZGFwdGl2ZUNhcmQ9e2J1aWx0Q2FyZH0gYWRhcHRpdmVDYXJkSG9zdENvbmZpZz17YWRhcHRpdmVDYXJkSG9zdENvbmZpZ30gLz47XG59O1xuXG5PQXV0aENhcmRBdHRhY2htZW50LnByb3BUeXBlcyA9IHtcbiAgYWRhcHRpdmVDYXJkSG9zdENvbmZpZzogUHJvcFR5cGVzLmFueS5pc1JlcXVpcmVkLFxuICBhZGFwdGl2ZUNhcmRzOiBQcm9wVHlwZXMuYW55LmlzUmVxdWlyZWQsXG4gIGF0dGFjaG1lbnQ6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgY29udGVudDogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgIGJ1dHRvbnM6IFByb3BUeXBlcy5hcnJheVxuICAgIH0pLmlzUmVxdWlyZWRcbiAgfSkuaXNSZXF1aXJlZFxufTtcblxuZXhwb3J0IGRlZmF1bHQgT0F1dGhDYXJkQXR0YWNobWVudDtcbiJdfQ==
