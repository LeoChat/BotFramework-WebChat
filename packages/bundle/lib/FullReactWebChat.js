'use strict';

var cov_2i6cjj5x6x = (function() {
  var path = '/Users/guy/Work/Leo/leo/BotFramework-WebChat/packages/bundle/src/FullReactWebChat.js';
  var hash = '0bfbca1f4c0cd5903334855637dbcffbca51ba56';
  var global = new Function('return this')();
  var gcv = '__coverage__';
  var coverageData = {
    path: '/Users/guy/Work/Leo/leo/BotFramework-WebChat/packages/bundle/src/FullReactWebChat.js',
    statementMap: {
      '0': {
        start: {
          line: 15,
          column: 4
        },
        end: {
          line: 15,
          column: 17
        }
      },
      '1': {
        start: {
          line: 17,
          column: 4
        },
        end: {
          line: 27,
          column: 6
        }
      },
      '2': {
        start: {
          line: 19,
          column: 8
        },
        end: {
          line: 26,
          column: 9
        }
      },
      '3': {
        start: {
          line: 29,
          column: 4
        },
        end: {
          line: 29,
          column: 105
        }
      },
      '4': {
        start: {
          line: 29,
          column: 63
        },
        end: {
          line: 29,
          column: 103
        }
      },
      '5': {
        start: {
          line: 30,
          column: 4
        },
        end: {
          line: 32,
          column: 6
        }
      },
      '6': {
        start: {
          line: 30,
          column: 74
        },
        end: {
          line: 31,
          column: 39
        }
      },
      '7': {
        start: {
          line: 31,
          column: 6
        },
        end: {
          line: 31,
          column: 39
        }
      },
      '8': {
        start: {
          line: 43,
          column: 8
        },
        end: {
          line: 43,
          column: 18
        }
      },
      '9': {
        start: {
          line: 45,
          column: 29
        },
        end: {
          line: 45,
          column: 73
        }
      },
      '10': {
        start: {
          line: 47,
          column: 6
        },
        end: {
          line: 47,
          column: 91
        }
      },
      '11': {
        start: {
          line: 49,
          column: 4
        },
        end: {
          line: 62,
          column: 6
        }
      },
      '12': {
        start: {
          line: 66,
          column: 0
        },
        end: {
          line: 72,
          column: 2
        }
      },
      '13': {
        start: {
          line: 74,
          column: 0
        },
        end: {
          line: 80,
          column: 2
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 14,
            column: 2
          },
          end: {
            line: 14,
            column: 3
          }
        },
        loc: {
          start: {
            line: 14,
            column: 21
          },
          end: {
            line: 33,
            column: 3
          }
        },
        line: 14
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 18,
            column: 6
          },
          end: {
            line: 18,
            column: 7
          }
        },
        loc: {
          start: {
            line: 19,
            column: 8
          },
          end: {
            line: 26,
            column: 9
          }
        },
        line: 19
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 29,
            column: 35
          },
          end: {
            line: 29,
            column: 36
          }
        },
        loc: {
          start: {
            line: 29,
            column: 63
          },
          end: {
            line: 29,
            column: 103
          }
        },
        line: 29
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 30,
            column: 41
          },
          end: {
            line: 30,
            column: 42
          }
        },
        loc: {
          start: {
            line: 30,
            column: 74
          },
          end: {
            line: 31,
            column: 39
          }
        },
        line: 30
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 30,
            column: 74
          },
          end: {
            line: 30,
            column: 75
          }
        },
        loc: {
          start: {
            line: 31,
            column: 6
          },
          end: {
            line: 31,
            column: 39
          }
        },
        line: 31
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 35,
            column: 2
          },
          end: {
            line: 35,
            column: 3
          }
        },
        loc: {
          start: {
            line: 35,
            column: 11
          },
          end: {
            line: 63,
            column: 3
          }
        },
        line: 35
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 22,
            column: 36
          },
          end: {
            line: 22,
            column: 105
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 22,
              column: 36
            },
            end: {
              line: 22,
              column: 58
            }
          },
          {
            start: {
              line: 22,
              column: 62
            },
            end: {
              line: 22,
              column: 105
            }
          }
        ],
        line: 22
      },
      '1': {
        loc: {
          start: {
            line: 29,
            column: 63
          },
          end: {
            line: 29,
            column: 103
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 29,
              column: 63
            },
            end: {
              line: 29,
              column: 71
            }
          },
          {
            start: {
              line: 29,
              column: 75
            },
            end: {
              line: 29,
              column: 103
            }
          }
        ],
        line: 29
      },
      '2': {
        loc: {
          start: {
            line: 47,
            column: 6
          },
          end: {
            line: 47,
            column: 91
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 47,
              column: 6
            },
            end: {
              line: 47,
              column: 20
            }
          },
          {
            start: {
              line: 47,
              column: 24
            },
            end: {
              line: 47,
              column: 91
            }
          }
        ],
        line: 47
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0]
    },
    _coverageSchema: '43e27e138ebf9cfc5966b082cf9a028302ed4184',
    hash: '0bfbca1f4c0cd5903334855637dbcffbca51ba56'
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  return (coverage[path] = coverageData);
})();

var _interopRequireWildcard = require('@babel/runtime/helpers/interopRequireWildcard');

var _interopRequireDefault = require('@babel/runtime/helpers/interopRequireDefault');

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = void 0;

var _extends2 = _interopRequireDefault(require('@babel/runtime/helpers/extends'));

var _objectWithoutProperties2 = _interopRequireDefault(require('@babel/runtime/helpers/objectWithoutProperties'));

var _classCallCheck2 = _interopRequireDefault(require('@babel/runtime/helpers/classCallCheck'));

var _createClass2 = _interopRequireDefault(require('@babel/runtime/helpers/createClass'));

var _possibleConstructorReturn2 = _interopRequireDefault(require('@babel/runtime/helpers/possibleConstructorReturn'));

var _getPrototypeOf2 = _interopRequireDefault(require('@babel/runtime/helpers/getPrototypeOf'));

var _inherits2 = _interopRequireDefault(require('@babel/runtime/helpers/inherits'));

var adaptiveCards = _interopRequireWildcard(require('adaptivecards'));

var _botframeworkWebchatComponent = _interopRequireWildcard(require('botframework-webchat-component'));

var _memoizeOne = _interopRequireDefault(require('memoize-one'));

var _propTypes = _interopRequireDefault(require('prop-types'));

var _react = _interopRequireDefault(require('react'));

var _createAdaptiveCardMiddleware = _interopRequireDefault(require('./adaptiveCards/createAdaptiveCardMiddleware'));

var _createStyleSetWithAdaptiveCards = _interopRequireDefault(
  require('./adaptiveCards/Styles/createStyleSetWithAdaptiveCards')
);

var _adaptiveCardHostConfig = _interopRequireDefault(require('./adaptiveCards/Styles/adaptiveCardHostConfig'));

var _renderMarkdown = _interopRequireDefault(require('./renderMarkdown'));

// Add additional props to <WebChat>, so it support additional features
var FullReactWebChat =
  /*#__PURE__*/
  (function(_ref) {
    (0, _inherits2.default)(FullReactWebChat, _ref);

    function FullReactWebChat(props) {
      var _this;

      (0, _classCallCheck2.default)(this, FullReactWebChat);
      cov_2i6cjj5x6x.f[0]++;
      cov_2i6cjj5x6x.s[0]++;
      _this = (0, _possibleConstructorReturn2.default)(
        this,
        (0, _getPrototypeOf2.default)(FullReactWebChat).call(this, props)
      );
      cov_2i6cjj5x6x.s[1]++;
      _this.createAttachmentMiddleware = (0, _memoizeOne.default)(function(
        adaptiveCardHostConfig,
        middlewareFromProps,
        styleOptions,
        renderMarkdown
      ) {
        cov_2i6cjj5x6x.f[1]++;
        cov_2i6cjj5x6x.s[2]++;
        return (0, _botframeworkWebchatComponent.concatMiddleware)(
          middlewareFromProps,
          (0, _createAdaptiveCardMiddleware.default)({
            adaptiveCardHostConfig:
              (cov_2i6cjj5x6x.b[0][0]++, adaptiveCardHostConfig) ||
              (cov_2i6cjj5x6x.b[0][1]++, (0, _adaptiveCardHostConfig.default)(styleOptions)),
            adaptiveCards: adaptiveCards,
            renderMarkdown: renderMarkdown
          })
        );
      });
      cov_2i6cjj5x6x.s[3]++;
      _this.memoizeStyleSet = (0, _memoizeOne.default)(function(styleSet, styleOptions) {
        cov_2i6cjj5x6x.f[2]++;
        cov_2i6cjj5x6x.s[4]++;
        return (
          (cov_2i6cjj5x6x.b[1][0]++, styleSet) ||
          (cov_2i6cjj5x6x.b[1][1]++, (0, _createStyleSetWithAdaptiveCards.default)(styleOptions))
        );
      });
      cov_2i6cjj5x6x.s[5]++;
      _this.memoizeRenderMarkdown = (0, _memoizeOne.default)(function(renderMarkdown, _ref2) {
        var options = _ref2.options;
        cov_2i6cjj5x6x.f[3]++;
        cov_2i6cjj5x6x.s[6]++;
        return function(markdown) {
          cov_2i6cjj5x6x.f[4]++;
          cov_2i6cjj5x6x.s[7]++;
          return renderMarkdown(markdown, options);
        };
      });
      return _this;
    }

    (0, _createClass2.default)(FullReactWebChat, [
      {
        key: 'render',
        value: function render() {
          cov_2i6cjj5x6x.f[5]++;

          var _ref3 = (cov_2i6cjj5x6x.s[8]++, this.props),
            adaptiveCardHostConfig = _ref3.adaptiveCardHostConfig,
            attachmentMiddleware = _ref3.attachmentMiddleware,
            renderMarkdown = _ref3.renderMarkdown,
            styleOptions = _ref3.styleOptions,
            styleSet = _ref3.styleSet,
            otherProps = (0, _objectWithoutProperties2.default)(_ref3, [
              'adaptiveCardHostConfig',
              'attachmentMiddleware',
              'renderMarkdown',
              'styleOptions',
              'styleSet'
            ]);

          var memoizedStyleSet = (cov_2i6cjj5x6x.s[9]++, this.memoizeStyleSet(styleSet, styleOptions));
          var memoizedRenderMarkdown =
            (cov_2i6cjj5x6x.s[10]++,
            (cov_2i6cjj5x6x.b[2][0]++, renderMarkdown) ||
              (cov_2i6cjj5x6x.b[2][1]++, this.memoizeRenderMarkdown(_renderMarkdown.default, memoizedStyleSet)));
          cov_2i6cjj5x6x.s[11]++;
          return _react.default.createElement(
            _botframeworkWebchatComponent.default,
            (0, _extends2.default)(
              {
                attachmentMiddleware: this.createAttachmentMiddleware(
                  adaptiveCardHostConfig,
                  attachmentMiddleware,
                  styleOptions,
                  memoizedRenderMarkdown
                ),
                renderMarkdown: memoizedRenderMarkdown,
                styleOptions: styleOptions,
                styleSet: memoizedStyleSet
              },
              otherProps
            )
          );
        }
      }
    ]);
    return FullReactWebChat;
  })(_react.default.Component);

cov_2i6cjj5x6x.s[12]++;
FullReactWebChat.defaultProps = {
  adaptiveCardHostConfig: undefined,
  attachmentMiddleware: undefined,
  renderMarkdown: undefined,
  styleOptions: undefined,
  styleSet: undefined
};
cov_2i6cjj5x6x.s[13]++;
FullReactWebChat.propTypes = {
  adaptiveCardHostConfig: _propTypes.default.any,
  attachmentMiddleware: _propTypes.default.func,
  renderMarkdown: _propTypes.default.func,
  styleOptions: _propTypes.default.any,
  styleSet: _propTypes.default.any
};
var _default = FullReactWebChat;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9GdWxsUmVhY3RXZWJDaGF0LmpzIl0sIm5hbWVzIjpbIkZ1bGxSZWFjdFdlYkNoYXQiLCJwcm9wcyIsImNyZWF0ZUF0dGFjaG1lbnRNaWRkbGV3YXJlIiwiYWRhcHRpdmVDYXJkSG9zdENvbmZpZyIsIm1pZGRsZXdhcmVGcm9tUHJvcHMiLCJzdHlsZU9wdGlvbnMiLCJyZW5kZXJNYXJrZG93biIsImFkYXB0aXZlQ2FyZHMiLCJtZW1vaXplU3R5bGVTZXQiLCJzdHlsZVNldCIsIm1lbW9pemVSZW5kZXJNYXJrZG93biIsIm9wdGlvbnMiLCJtYXJrZG93biIsImF0dGFjaG1lbnRNaWRkbGV3YXJlIiwib3RoZXJQcm9wcyIsIm1lbW9pemVkU3R5bGVTZXQiLCJtZW1vaXplZFJlbmRlck1hcmtkb3duIiwiZGVmYXVsdFJlbmRlck1hcmtkb3duIiwiUmVhY3QiLCJDb21wb25lbnQiLCJkZWZhdWx0UHJvcHMiLCJ1bmRlZmluZWQiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJhbnkiLCJmdW5jIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QixtQkFBVUMsR0FKRztBQUszQmYsRUFBQUEsUUFBUSxFQUFFYyxtQkFBVUM7QUFMTyxDQUE3QjtlQVFleEIsZ0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBhZGFwdGl2ZUNhcmRzIGZyb20gJ2FkYXB0aXZlY2FyZHMnO1xuaW1wb3J0IEJhc2ljV2ViQ2hhdCwgeyBjb25jYXRNaWRkbGV3YXJlIH0gZnJvbSAnYm90ZnJhbWV3b3JrLXdlYmNoYXQtY29tcG9uZW50JztcbmltcG9ydCBtZW1vaXplIGZyb20gJ21lbW9pemUtb25lJztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgY3JlYXRlQWRhcHRpdmVDYXJkc0F0dGFjaG1lbnRNaWRkbGV3YXJlIGZyb20gJy4vYWRhcHRpdmVDYXJkcy9jcmVhdGVBZGFwdGl2ZUNhcmRNaWRkbGV3YXJlJztcbmltcG9ydCBjcmVhdGVTdHlsZVNldCBmcm9tICcuL2FkYXB0aXZlQ2FyZHMvU3R5bGVzL2NyZWF0ZVN0eWxlU2V0V2l0aEFkYXB0aXZlQ2FyZHMnO1xuaW1wb3J0IGRlZmF1bHRBZGFwdGl2ZUNhcmRIb3N0Q29uZmlnIGZyb20gJy4vYWRhcHRpdmVDYXJkcy9TdHlsZXMvYWRhcHRpdmVDYXJkSG9zdENvbmZpZyc7XG5pbXBvcnQgZGVmYXVsdFJlbmRlck1hcmtkb3duIGZyb20gJy4vcmVuZGVyTWFya2Rvd24nO1xuXG4vLyBBZGQgYWRkaXRpb25hbCBwcm9wcyB0byA8V2ViQ2hhdD4sIHNvIGl0IHN1cHBvcnQgYWRkaXRpb25hbCBmZWF0dXJlc1xuY2xhc3MgRnVsbFJlYWN0V2ViQ2hhdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5jcmVhdGVBdHRhY2htZW50TWlkZGxld2FyZSA9IG1lbW9pemUoXG4gICAgICAoYWRhcHRpdmVDYXJkSG9zdENvbmZpZywgbWlkZGxld2FyZUZyb21Qcm9wcywgc3R5bGVPcHRpb25zLCByZW5kZXJNYXJrZG93bikgPT5cbiAgICAgICAgY29uY2F0TWlkZGxld2FyZShcbiAgICAgICAgICBtaWRkbGV3YXJlRnJvbVByb3BzLFxuICAgICAgICAgIGNyZWF0ZUFkYXB0aXZlQ2FyZHNBdHRhY2htZW50TWlkZGxld2FyZSh7XG4gICAgICAgICAgICBhZGFwdGl2ZUNhcmRIb3N0Q29uZmlnOiBhZGFwdGl2ZUNhcmRIb3N0Q29uZmlnIHx8IGRlZmF1bHRBZGFwdGl2ZUNhcmRIb3N0Q29uZmlnKHN0eWxlT3B0aW9ucyksXG4gICAgICAgICAgICBhZGFwdGl2ZUNhcmRzLFxuICAgICAgICAgICAgcmVuZGVyTWFya2Rvd25cbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgKTtcblxuICAgIHRoaXMubWVtb2l6ZVN0eWxlU2V0ID0gbWVtb2l6ZSgoc3R5bGVTZXQsIHN0eWxlT3B0aW9ucykgPT4gc3R5bGVTZXQgfHwgY3JlYXRlU3R5bGVTZXQoc3R5bGVPcHRpb25zKSk7XG4gICAgdGhpcy5tZW1vaXplUmVuZGVyTWFya2Rvd24gPSBtZW1vaXplKChyZW5kZXJNYXJrZG93biwgeyBvcHRpb25zIH0pID0+IG1hcmtkb3duID0+XG4gICAgICByZW5kZXJNYXJrZG93bihtYXJrZG93biwgb3B0aW9ucylcbiAgICApO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGFkYXB0aXZlQ2FyZEhvc3RDb25maWcsXG4gICAgICBhdHRhY2htZW50TWlkZGxld2FyZSxcbiAgICAgIHJlbmRlck1hcmtkb3duLFxuICAgICAgc3R5bGVPcHRpb25zLFxuICAgICAgc3R5bGVTZXQsXG4gICAgICAuLi5vdGhlclByb3BzXG4gICAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBjb25zdCBtZW1vaXplZFN0eWxlU2V0ID0gdGhpcy5tZW1vaXplU3R5bGVTZXQoc3R5bGVTZXQsIHN0eWxlT3B0aW9ucyk7XG4gICAgY29uc3QgbWVtb2l6ZWRSZW5kZXJNYXJrZG93biA9XG4gICAgICByZW5kZXJNYXJrZG93biB8fCB0aGlzLm1lbW9pemVSZW5kZXJNYXJrZG93bihkZWZhdWx0UmVuZGVyTWFya2Rvd24sIG1lbW9pemVkU3R5bGVTZXQpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxCYXNpY1dlYkNoYXRcbiAgICAgICAgYXR0YWNobWVudE1pZGRsZXdhcmU9e3RoaXMuY3JlYXRlQXR0YWNobWVudE1pZGRsZXdhcmUoXG4gICAgICAgICAgYWRhcHRpdmVDYXJkSG9zdENvbmZpZyxcbiAgICAgICAgICBhdHRhY2htZW50TWlkZGxld2FyZSxcbiAgICAgICAgICBzdHlsZU9wdGlvbnMsXG4gICAgICAgICAgbWVtb2l6ZWRSZW5kZXJNYXJrZG93blxuICAgICAgICApfVxuICAgICAgICByZW5kZXJNYXJrZG93bj17bWVtb2l6ZWRSZW5kZXJNYXJrZG93bn1cbiAgICAgICAgc3R5bGVPcHRpb25zPXtzdHlsZU9wdGlvbnN9XG4gICAgICAgIHN0eWxlU2V0PXttZW1vaXplZFN0eWxlU2V0fVxuICAgICAgICB7Li4ub3RoZXJQcm9wc31cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxufVxuXG5GdWxsUmVhY3RXZWJDaGF0LmRlZmF1bHRQcm9wcyA9IHtcbiAgYWRhcHRpdmVDYXJkSG9zdENvbmZpZzogdW5kZWZpbmVkLFxuICBhdHRhY2htZW50TWlkZGxld2FyZTogdW5kZWZpbmVkLFxuICByZW5kZXJNYXJrZG93bjogdW5kZWZpbmVkLFxuICBzdHlsZU9wdGlvbnM6IHVuZGVmaW5lZCxcbiAgc3R5bGVTZXQ6IHVuZGVmaW5lZFxufTtcblxuRnVsbFJlYWN0V2ViQ2hhdC5wcm9wVHlwZXMgPSB7XG4gIGFkYXB0aXZlQ2FyZEhvc3RDb25maWc6IFByb3BUeXBlcy5hbnksXG4gIGF0dGFjaG1lbnRNaWRkbGV3YXJlOiBQcm9wVHlwZXMuZnVuYyxcbiAgcmVuZGVyTWFya2Rvd246IFByb3BUeXBlcy5mdW5jLFxuICBzdHlsZU9wdGlvbnM6IFByb3BUeXBlcy5hbnksXG4gIHN0eWxlU2V0OiBQcm9wVHlwZXMuYW55XG59O1xuXG5leHBvcnQgZGVmYXVsdCBGdWxsUmVhY3RXZWJDaGF0O1xuIl19
