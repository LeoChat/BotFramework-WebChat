'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = createStyleSet;

var _Activities = _interopRequireDefault(require('./StyleSet/Activities'));

var _Activity = _interopRequireDefault(require('./StyleSet/Activity'));

var _AudioAttachment = _interopRequireDefault(require('./StyleSet/AudioAttachment'));

var _AudioContent = _interopRequireDefault(require('./StyleSet/AudioContent'));

var _Avatar = _interopRequireDefault(require('./StyleSet/Avatar'));

var _Bubble = _interopRequireDefault(require('./StyleSet/Bubble'));

var _CarouselFilmStrip = _interopRequireDefault(require('./StyleSet/CarouselFilmStrip'));

var _CarouselFlipper = _interopRequireDefault(require('./StyleSet/CarouselFlipper'));

var _ConnectivityNotification = _interopRequireDefault(require('./StyleSet/ConnectivityNotification'));

var _DictationInterims = _interopRequireDefault(require('./StyleSet/DictationInterims'));

var _DownloadAttachment = _interopRequireDefault(require('./StyleSet/DownloadAttachment'));

var _ErrorBox = _interopRequireDefault(require('./StyleSet/ErrorBox'));

var _ErrorNotification = _interopRequireDefault(require('./StyleSet/ErrorNotification'));

var _MicrophoneButton = _interopRequireDefault(require('./StyleSet/MicrophoneButton'));

var _Root = _interopRequireDefault(require('./StyleSet/Root'));

var _ScrollToEndButton = _interopRequireDefault(require('./StyleSet/ScrollToEndButton'));

var _SendBoxButton = _interopRequireDefault(require('./StyleSet/SendBoxButton'));

var _SendBox = _interopRequireDefault(require('./StyleSet/SendBox'));

var _SendBoxTextArea = _interopRequireDefault(require('./StyleSet/SendBoxTextArea'));

var _SendBoxTextBox = _interopRequireDefault(require('./StyleSet/SendBoxTextBox'));

var _SendStatus = _interopRequireDefault(require('./StyleSet/SendStatus'));

var _SingleAttachmentActivity = _interopRequireDefault(require('./StyleSet/SingleAttachmentActivity'));

var _SpinnerAnimation = _interopRequireDefault(require('./StyleSet/SpinnerAnimation'));

var _StackedLayout = _interopRequireDefault(require('./StyleSet/StackedLayout'));

var _SuggestedActions = _interopRequireDefault(require('./StyleSet/SuggestedActions'));

var _SuggestedActionsStyleSet = _interopRequireDefault(require('./StyleSet/SuggestedActionsStyleSet'));

var _SuggestedAction = _interopRequireDefault(require('./StyleSet/SuggestedAction'));

var _TextContent = _interopRequireDefault(require('./StyleSet/TextContent'));

var _Timestamp = _interopRequireDefault(require('./StyleSet/Timestamp'));

var _TypingAnimation = _interopRequireDefault(require('./StyleSet/TypingAnimation'));

var _TypingIndicator = _interopRequireDefault(require('./StyleSet/TypingIndicator'));

var _UploadAttachment = _interopRequireDefault(require('./StyleSet/UploadAttachment'));

var _UploadButton = _interopRequireDefault(require('./StyleSet/UploadButton'));

var _VideoAttachment = _interopRequireDefault(require('./StyleSet/VideoAttachment'));

var _VideoContent = _interopRequireDefault(require('./StyleSet/VideoContent'));

var _VimeoContent = _interopRequireDefault(require('./StyleSet/VimeoContent'));

var _WarningNotification = _interopRequireDefault(require('./StyleSet/WarningNotification'));

var _YouTubeContent = _interopRequireDefault(require('./StyleSet/YouTubeContent'));

var _defaultStyleOptions = _interopRequireDefault(require('./defaultStyleOptions'));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    keys.push.apply(keys, Object.getOwnPropertySymbols(object));
  }
  if (enumerableOnly)
    keys = keys.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};
    if (i % 2) {
      ownKeys(source, true).forEach(function(key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(source).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}

// TODO: [P4] We should add a notice for people who want to use "styleSet" instead of "styleOptions".
//       "styleSet" is actually CSS stylesheet and it is based on the DOM tree.
//       DOM tree may change from time to time, thus, maintaining "styleSet" becomes a constant effort.
function parseBorder(border) {
  var dummyElement = document.createElement('div');
  dummyElement.setAttribute('style', 'border: '.concat(border));
  var _dummyElement$style = dummyElement.style,
    color = _dummyElement$style.borderColor,
    style = _dummyElement$style.borderStyle,
    width = _dummyElement$style.borderWidth;
  return {
    color: color,
    style: style,
    width: width
  };
}

var PIXEL_UNIT_PATTERN = /^[0-9]+px$/;

function createStyleSet(options) {
  options = _objectSpread({}, _defaultStyleOptions.default, {}, options); // Keep this list flat (no nested style) and serializable (no functions)
  // TODO: [P4] Deprecate this code after bump to v5

  var _options = options,
    bubbleBorder = _options.bubbleBorder,
    bubbleFromUserBorder = _options.bubbleFromUserBorder;

  if (bubbleBorder) {
    console.warn(
      'Web Chat: styleSet.bubbleBorder is being deprecated. Please use bubbleBorderColor, bubbleBorderStyle, and, bubbleBorderWidth.'
    );

    var _parseBorder = parseBorder(bubbleBorder),
      color = _parseBorder.color,
      style = _parseBorder.style,
      width = _parseBorder.width;

    if (color && color !== 'initial') {
      options.bubbleBorderColor = color;
    }

    if (style && style !== 'initial') {
      options.bubbleBorderStyle = style;
    }

    if (PIXEL_UNIT_PATTERN.test(width)) {
      options.bubbleBorderWidth = parseInt(width, 10);
    }
  }

  if (bubbleFromUserBorder) {
    console.warn(
      'Web Chat: styleSet.bubbleFromUserBorder is being deprecated. Please use bubbleFromUserBorderColor, bubbleFromUserBorderStyle, and, bubbleFromUserBorderWidth.'
    );

    var _parseBorder2 = parseBorder(bubbleFromUserBorder),
      _color = _parseBorder2.color,
      _style = _parseBorder2.style,
      _width = _parseBorder2.width;

    if (_color && _color !== 'initial') {
      options.bubbleFromUserBorderColor = _color;
    }

    if (_style && _style !== 'initial') {
      options.bubbleFromUserBorderStyle = _style;
    }

    if (PIXEL_UNIT_PATTERN.test(_width)) {
      options.bubbleFromUserBorderWidth = parseInt(_width, 10);
    }
  }

  return {
    activities: (0, _Activities.default)(options),
    activity: (0, _Activity.default)(options),
    audioAttachment: (0, _AudioAttachment.default)(options),
    audioContent: (0, _AudioContent.default)(options),
    avatar: (0, _Avatar.default)(options),
    bubble: (0, _Bubble.default)(options),
    carouselFilmStrip: (0, _CarouselFilmStrip.default)(options),
    carouselFlipper: (0, _CarouselFlipper.default)(options),
    connectivityNotification: (0, _ConnectivityNotification.default)(options),
    dictationInterims: (0, _DictationInterims.default)(options),
    downloadAttachment: (0, _DownloadAttachment.default)(options),
    errorBox: (0, _ErrorBox.default)(options),
    errorNotification: (0, _ErrorNotification.default)(options),
    microphoneButton: (0, _MicrophoneButton.default)(options),
    options: _objectSpread({}, options, {
      suggestedActionsStyleSet: (0, _SuggestedActionsStyleSet.default)(options)
    }),
    root: (0, _Root.default)(options),
    scrollToEndButton: (0, _ScrollToEndButton.default)(options),
    sendBox: (0, _SendBox.default)(options),
    sendBoxButton: (0, _SendBoxButton.default)(options),
    sendBoxTextArea: (0, _SendBoxTextArea.default)(options),
    sendBoxTextBox: (0, _SendBoxTextBox.default)(options),
    sendStatus: (0, _SendStatus.default)(options),
    singleAttachmentActivity: (0, _SingleAttachmentActivity.default)(options),
    spinnerAnimation: (0, _SpinnerAnimation.default)(options),
    stackedLayout: (0, _StackedLayout.default)(options),
    suggestedAction: (0, _SuggestedAction.default)(options),
    suggestedActions: (0, _SuggestedActions.default)(options),
    textContent: (0, _TextContent.default)(options),
    timestamp: (0, _Timestamp.default)(options),
    typingAnimation: (0, _TypingAnimation.default)(options),
    typingIndicator: (0, _TypingIndicator.default)(options),
    uploadAttachment: (0, _UploadAttachment.default)(options),
    uploadButton: (0, _UploadButton.default)(options),
    videoAttachment: (0, _VideoAttachment.default)(options),
    videoContent: (0, _VideoContent.default)(options),
    vimeoContent: (0, _VimeoContent.default)(options),
    warningNotification: (0, _WarningNotification.default)(options),
    youTubeContent: (0, _YouTubeContent.default)(options)
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9TdHlsZXMvY3JlYXRlU3R5bGVTZXQuanMiXSwibmFtZXMiOlsicGFyc2VCb3JkZXIiLCJib3JkZXIiLCJkdW1teUVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJzdHlsZSIsImNvbG9yIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJTdHlsZSIsIndpZHRoIiwiYm9yZGVyV2lkdGgiLCJQSVhFTF9VTklUX1BBVFRFUk4iLCJjcmVhdGVTdHlsZVNldCIsIm9wdGlvbnMiLCJkZWZhdWx0U3R5bGVPcHRpb25zIiwiYnViYmxlQm9yZGVyIiwiYnViYmxlRnJvbVVzZXJCb3JkZXIiLCJjb25zb2xlIiwid2FybiIsImJ1YmJsZUJvcmRlckNvbG9yIiwiYnViYmxlQm9yZGVyU3R5bGUiLCJ0ZXN0IiwiYnViYmxlQm9yZGVyV2lkdGgiLCJwYXJzZUludCIsImJ1YmJsZUZyb21Vc2VyQm9yZGVyQ29sb3IiLCJidWJibGVGcm9tVXNlckJvcmRlclN0eWxlIiwiYnViYmxlRnJvbVVzZXJCb3JkZXJXaWR0aCIsImFjdGl2aXRpZXMiLCJhY3Rpdml0eSIsImF1ZGlvQXR0YWNobWVudCIsImF1ZGlvQ29udGVudCIsImF2YXRhciIsImJ1YmJsZSIsImNhcm91c2VsRmlsbVN0cmlwIiwiY2Fyb3VzZWxGbGlwcGVyIiwiY29ubmVjdGl2aXR5Tm90aWZpY2F0aW9uIiwiZGljdGF0aW9uSW50ZXJpbXMiLCJkb3dubG9hZEF0dGFjaG1lbnQiLCJlcnJvckJveCIsImVycm9yTm90aWZpY2F0aW9uIiwibWljcm9waG9uZUJ1dHRvbiIsInN1Z2dlc3RlZEFjdGlvbnNTdHlsZVNldCIsInJvb3QiLCJzY3JvbGxUb0VuZEJ1dHRvbiIsInNlbmRCb3giLCJzZW5kQm94QnV0dG9uIiwic2VuZEJveFRleHRBcmVhIiwic2VuZEJveFRleHRCb3giLCJzZW5kU3RhdHVzIiwic2luZ2xlQXR0YWNobWVudEFjdGl2aXR5Iiwic3Bpbm5lckFuaW1hdGlvbiIsInN0YWNrZWRMYXlvdXQiLCJzdWdnZXN0ZWRBY3Rpb24iLCJzdWdnZXN0ZWRBY3Rpb25zIiwidGV4dENvbnRlbnQiLCJ0aW1lc3RhbXAiLCJ0eXBpbmdBbmltYXRpb24iLCJ0eXBpbmdJbmRpY2F0b3IiLCJ1cGxvYWRBdHRhY2htZW50IiwidXBsb2FkQnV0dG9uIiwidmlkZW9BdHRhY2htZW50IiwidmlkZW9Db250ZW50IiwidmltZW9Db250ZW50Iiwid2FybmluZ05vdGlmaWNhdGlvbiIsInlvdVR1YmVDb250ZW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFFQSxTQUFTQSxXQUFULENBQXFCQyxNQUFyQixFQUE2QjtBQUMzQixNQUFNQyxZQUFZLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixLQUF2QixDQUFyQjtBQUVBRixFQUFBQSxZQUFZLENBQUNHLFlBQWIsQ0FBMEIsT0FBMUIsb0JBQThDSixNQUE5QztBQUgyQiw0QkFPdkJDLFlBUHVCLENBTXpCSSxLQU55QjtBQUFBLE1BTUhDLEtBTkcsdUJBTWhCQyxXQU5nQjtBQUFBLE1BTWlCRixLQU5qQix1QkFNSUcsV0FOSjtBQUFBLE1BTXFDQyxLQU5yQyx1QkFNd0JDLFdBTnhCO0FBUzNCLFNBQU87QUFDTEosSUFBQUEsS0FBSyxFQUFMQSxLQURLO0FBRUxELElBQUFBLEtBQUssRUFBTEEsS0FGSztBQUdMSSxJQUFBQSxLQUFLLEVBQUxBO0FBSEssR0FBUDtBQUtEOztB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QyxPQUE1QixDQW5DYjtBQW9DTDhDLElBQUFBLFlBQVksRUFBRSwyQkFBd0I5QyxPQUF4QixDQXBDVDtBQXFDTCtDLElBQUFBLGVBQWUsRUFBRSw4QkFBMkIvQyxPQUEzQixDQXJDWjtBQXNDTGdELElBQUFBLFlBQVksRUFBRSwyQkFBd0JoRCxPQUF4QixDQXRDVDtBQXVDTGlELElBQUFBLFlBQVksRUFBRSwyQkFBd0JqRCxPQUF4QixDQXZDVDtBQXdDTGtELElBQUFBLG1CQUFtQixFQUFFLGtDQUErQmxELE9BQS9CLENBeENoQjtBQXlDTG1ELElBQUFBLGNBQWMsRUFBRSw2QkFBMEJuRCxPQUExQjtBQXpDWCxHQUFQO0FBMkNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyZWF0ZUFjdGl2aXRpZXNTdHlsZSBmcm9tICcuL1N0eWxlU2V0L0FjdGl2aXRpZXMnO1xuaW1wb3J0IGNyZWF0ZUFjdGl2aXR5U3R5bGUgZnJvbSAnLi9TdHlsZVNldC9BY3Rpdml0eSc7XG5pbXBvcnQgY3JlYXRlQXVkaW9BdHRhY2htZW50U3R5bGUgZnJvbSAnLi9TdHlsZVNldC9BdWRpb0F0dGFjaG1lbnQnO1xuaW1wb3J0IGNyZWF0ZUF1ZGlvQ29udGVudFN0eWxlIGZyb20gJy4vU3R5bGVTZXQvQXVkaW9Db250ZW50JztcbmltcG9ydCBjcmVhdGVBdmF0YXJTdHlsZSBmcm9tICcuL1N0eWxlU2V0L0F2YXRhcic7XG5pbXBvcnQgY3JlYXRlQnViYmxlU3R5bGUgZnJvbSAnLi9TdHlsZVNldC9CdWJibGUnO1xuaW1wb3J0IGNyZWF0ZUNhcm91c2VsRmlsbVN0cmlwIGZyb20gJy4vU3R5bGVTZXQvQ2Fyb3VzZWxGaWxtU3RyaXAnO1xuaW1wb3J0IGNyZWF0ZUNhcm91c2VsRmxpcHBlciBmcm9tICcuL1N0eWxlU2V0L0Nhcm91c2VsRmxpcHBlcic7XG5pbXBvcnQgY3JlYXRlQ29ubmVjdGl2aXR5Tm90aWZpY2F0aW9uIGZyb20gJy4vU3R5bGVTZXQvQ29ubmVjdGl2aXR5Tm90aWZpY2F0aW9uJztcbmltcG9ydCBjcmVhdGVEaWN0YXRpb25JbnRlcmltc1N0eWxlIGZyb20gJy4vU3R5bGVTZXQvRGljdGF0aW9uSW50ZXJpbXMnO1xuaW1wb3J0IGNyZWF0ZURvd25sb2FkQXR0YWNobWVudFN0eWxlIGZyb20gJy4vU3R5bGVTZXQvRG93bmxvYWRBdHRhY2htZW50JztcbmltcG9ydCBjcmVhdGVFcnJvckJveFN0eWxlIGZyb20gJy4vU3R5bGVTZXQvRXJyb3JCb3gnO1xuaW1wb3J0IGNyZWF0ZUVycm9yTm90aWZpY2F0aW9uU3R5bGUgZnJvbSAnLi9TdHlsZVNldC9FcnJvck5vdGlmaWNhdGlvbic7XG5pbXBvcnQgY3JlYXRlTWljcm9waG9uZUJ1dHRvblN0eWxlIGZyb20gJy4vU3R5bGVTZXQvTWljcm9waG9uZUJ1dHRvbic7XG5pbXBvcnQgY3JlYXRlUm9vdFN0eWxlIGZyb20gJy4vU3R5bGVTZXQvUm9vdCc7XG5pbXBvcnQgY3JlYXRlU2Nyb2xsVG9FbmRCdXR0b25TdHlsZSBmcm9tICcuL1N0eWxlU2V0L1Njcm9sbFRvRW5kQnV0dG9uJztcbmltcG9ydCBjcmVhdGVTZW5kQm94QnV0dG9uU3R5bGUgZnJvbSAnLi9TdHlsZVNldC9TZW5kQm94QnV0dG9uJztcbmltcG9ydCBjcmVhdGVTZW5kQm94U3R5bGUgZnJvbSAnLi9TdHlsZVNldC9TZW5kQm94JztcbmltcG9ydCBjcmVhdGVTZW5kQm94VGV4dEFyZWFTdHlsZSBmcm9tICcuL1N0eWxlU2V0L1NlbmRCb3hUZXh0QXJlYSc7XG5pbXBvcnQgY3JlYXRlU2VuZEJveFRleHRCb3hTdHlsZSBmcm9tICcuL1N0eWxlU2V0L1NlbmRCb3hUZXh0Qm94JztcbmltcG9ydCBjcmVhdGVTZW5kU3RhdHVzU3R5bGUgZnJvbSAnLi9TdHlsZVNldC9TZW5kU3RhdHVzJztcbmltcG9ydCBjcmVhdGVTaW5nbGVBdHRhY2htZW50QWN0aXZpdHlTdHlsZSBmcm9tICcuL1N0eWxlU2V0L1NpbmdsZUF0dGFjaG1lbnRBY3Rpdml0eSc7XG5pbXBvcnQgY3JlYXRlU3Bpbm5lckFuaW1hdGlvblN0eWxlIGZyb20gJy4vU3R5bGVTZXQvU3Bpbm5lckFuaW1hdGlvbic7XG5pbXBvcnQgY3JlYXRlU3RhY2tlZExheW91dFN0eWxlIGZyb20gJy4vU3R5bGVTZXQvU3RhY2tlZExheW91dCc7XG5pbXBvcnQgY3JlYXRlU3VnZ2VzdGVkQWN0aW9uc1N0eWxlIGZyb20gJy4vU3R5bGVTZXQvU3VnZ2VzdGVkQWN0aW9ucyc7XG5pbXBvcnQgY3JlYXRlU3VnZ2VzdGVkQWN0aW9uc1N0eWxlU2V0IGZyb20gJy4vU3R5bGVTZXQvU3VnZ2VzdGVkQWN0aW9uc1N0eWxlU2V0JztcbmltcG9ydCBjcmVhdGVTdWdnZXN0ZWRBY3Rpb25TdHlsZSBmcm9tICcuL1N0eWxlU2V0L1N1Z2dlc3RlZEFjdGlvbic7XG5pbXBvcnQgY3JlYXRlVGV4dENvbnRlbnRTdHlsZSBmcm9tICcuL1N0eWxlU2V0L1RleHRDb250ZW50JztcbmltcG9ydCBjcmVhdGVUaW1lc3RhbXBTdHlsZSBmcm9tICcuL1N0eWxlU2V0L1RpbWVzdGFtcCc7XG5pbXBvcnQgY3JlYXRlVHlwaW5nQW5pbWF0aW9uU3R5bGUgZnJvbSAnLi9TdHlsZVNldC9UeXBpbmdBbmltYXRpb24nO1xuaW1wb3J0IGNyZWF0ZVR5cGluZ0luZGljYXRvclN0eWxlIGZyb20gJy4vU3R5bGVTZXQvVHlwaW5nSW5kaWNhdG9yJztcbmltcG9ydCBjcmVhdGVVcGxvYWRBdHRhY2htZW50U3R5bGUgZnJvbSAnLi9TdHlsZVNldC9VcGxvYWRBdHRhY2htZW50JztcbmltcG9ydCBjcmVhdGVVcGxvYWRCdXR0b25TdHlsZSBmcm9tICcuL1N0eWxlU2V0L1VwbG9hZEJ1dHRvbic7XG5pbXBvcnQgY3JlYXRlVmlkZW9BdHRhY2htZW50U3R5bGUgZnJvbSAnLi9TdHlsZVNldC9WaWRlb0F0dGFjaG1lbnQnO1xuaW1wb3J0IGNyZWF0ZVZpZGVvQ29udGVudFN0eWxlIGZyb20gJy4vU3R5bGVTZXQvVmlkZW9Db250ZW50JztcbmltcG9ydCBjcmVhdGVWaW1lb0NvbnRlbnRTdHlsZSBmcm9tICcuL1N0eWxlU2V0L1ZpbWVvQ29udGVudCc7XG5pbXBvcnQgY3JlYXRlV2FybmluZ05vdGlmaWNhdGlvblN0eWxlIGZyb20gJy4vU3R5bGVTZXQvV2FybmluZ05vdGlmaWNhdGlvbic7XG5pbXBvcnQgY3JlYXRlWW91VHViZUNvbnRlbnRTdHlsZSBmcm9tICcuL1N0eWxlU2V0L1lvdVR1YmVDb250ZW50JztcblxuaW1wb3J0IGRlZmF1bHRTdHlsZU9wdGlvbnMgZnJvbSAnLi9kZWZhdWx0U3R5bGVPcHRpb25zJztcblxuLy8gVE9ETzogW1A0XSBXZSBzaG91bGQgYWRkIGEgbm90aWNlIGZvciBwZW9wbGUgd2hvIHdhbnQgdG8gdXNlIFwic3R5bGVTZXRcIiBpbnN0ZWFkIG9mIFwic3R5bGVPcHRpb25zXCIuXG4vLyAgICAgICBcInN0eWxlU2V0XCIgaXMgYWN0dWFsbHkgQ1NTIHN0eWxlc2hlZXQgYW5kIGl0IGlzIGJhc2VkIG9uIHRoZSBET00gdHJlZS5cbi8vICAgICAgIERPTSB0cmVlIG1heSBjaGFuZ2UgZnJvbSB0aW1lIHRvIHRpbWUsIHRodXMsIG1haW50YWluaW5nIFwic3R5bGVTZXRcIiBiZWNvbWVzIGEgY29uc3RhbnQgZWZmb3J0LlxuXG5mdW5jdGlvbiBwYXJzZUJvcmRlcihib3JkZXIpIHtcbiAgY29uc3QgZHVtbXlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgZHVtbXlFbGVtZW50LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgYm9yZGVyOiAke2JvcmRlcn1gKTtcblxuICBjb25zdCB7XG4gICAgc3R5bGU6IHsgYm9yZGVyQ29sb3I6IGNvbG9yLCBib3JkZXJTdHlsZTogc3R5bGUsIGJvcmRlcldpZHRoOiB3aWR0aCB9XG4gIH0gPSBkdW1teUVsZW1lbnQ7XG5cbiAgcmV0dXJuIHtcbiAgICBjb2xvcixcbiAgICBzdHlsZSxcbiAgICB3aWR0aFxuICB9O1xufVxuXG5jb25zdCBQSVhFTF9VTklUX1BBVFRFUk4gPSAvXlxcZCtweCQvdTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlU3R5bGVTZXQob3B0aW9ucykge1xuICBvcHRpb25zID0geyAuLi5kZWZhdWx0U3R5bGVPcHRpb25zLCAuLi5vcHRpb25zIH07XG5cbiAgLy8gS2VlcCB0aGlzIGxpc3QgZmxhdCAobm8gbmVzdGVkIHN0eWxlKSBhbmQgc2VyaWFsaXphYmxlIChubyBmdW5jdGlvbnMpXG5cbiAgLy8gVE9ETzogW1A0XSBEZXByZWNhdGUgdGhpcyBjb2RlIGFmdGVyIGJ1bXAgdG8gdjVcbiAgY29uc3QgeyBidWJibGVCb3JkZXIsIGJ1YmJsZUZyb21Vc2VyQm9yZGVyIH0gPSBvcHRpb25zO1xuXG4gIGlmIChidWJibGVCb3JkZXIpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICAnV2ViIENoYXQ6IHN0eWxlU2V0LmJ1YmJsZUJvcmRlciBpcyBiZWluZyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIGJ1YmJsZUJvcmRlckNvbG9yLCBidWJibGVCb3JkZXJTdHlsZSwgYW5kLCBidWJibGVCb3JkZXJXaWR0aC4nXG4gICAgKTtcblxuICAgIGNvbnN0IHsgY29sb3IsIHN0eWxlLCB3aWR0aCB9ID0gcGFyc2VCb3JkZXIoYnViYmxlQm9yZGVyKTtcblxuICAgIGlmIChjb2xvciAmJiBjb2xvciAhPT0gJ2luaXRpYWwnKSB7XG4gICAgICBvcHRpb25zLmJ1YmJsZUJvcmRlckNvbG9yID0gY29sb3I7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlICYmIHN0eWxlICE9PSAnaW5pdGlhbCcpIHtcbiAgICAgIG9wdGlvbnMuYnViYmxlQm9yZGVyU3R5bGUgPSBzdHlsZTtcbiAgICB9XG5cbiAgICBpZiAoUElYRUxfVU5JVF9QQVRURVJOLnRlc3Qod2lkdGgpKSB7XG4gICAgICBvcHRpb25zLmJ1YmJsZUJvcmRlcldpZHRoID0gcGFyc2VJbnQod2lkdGgsIDEwKTtcbiAgICB9XG4gIH1cblxuICBpZiAoYnViYmxlRnJvbVVzZXJCb3JkZXIpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICAnV2ViIENoYXQ6IHN0eWxlU2V0LmJ1YmJsZUZyb21Vc2VyQm9yZGVyIGlzIGJlaW5nIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgYnViYmxlRnJvbVVzZXJCb3JkZXJDb2xvciwgYnViYmxlRnJvbVVzZXJCb3JkZXJTdHlsZSwgYW5kLCBidWJibGVGcm9tVXNlckJvcmRlcldpZHRoLidcbiAgICApO1xuXG4gICAgY29uc3QgeyBjb2xvciwgc3R5bGUsIHdpZHRoIH0gPSBwYXJzZUJvcmRlcihidWJibGVGcm9tVXNlckJvcmRlcik7XG5cbiAgICBpZiAoY29sb3IgJiYgY29sb3IgIT09ICdpbml0aWFsJykge1xuICAgICAgb3B0aW9ucy5idWJibGVGcm9tVXNlckJvcmRlckNvbG9yID0gY29sb3I7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlICYmIHN0eWxlICE9PSAnaW5pdGlhbCcpIHtcbiAgICAgIG9wdGlvbnMuYnViYmxlRnJvbVVzZXJCb3JkZXJTdHlsZSA9IHN0eWxlO1xuICAgIH1cblxuICAgIGlmIChQSVhFTF9VTklUX1BBVFRFUk4udGVzdCh3aWR0aCkpIHtcbiAgICAgIG9wdGlvbnMuYnViYmxlRnJvbVVzZXJCb3JkZXJXaWR0aCA9IHBhcnNlSW50KHdpZHRoLCAxMCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBhY3Rpdml0aWVzOiBjcmVhdGVBY3Rpdml0aWVzU3R5bGUob3B0aW9ucyksXG4gICAgYWN0aXZpdHk6IGNyZWF0ZUFjdGl2aXR5U3R5bGUob3B0aW9ucyksXG4gICAgYXVkaW9BdHRhY2htZW50OiBjcmVhdGVBdWRpb0F0dGFjaG1lbnRTdHlsZShvcHRpb25zKSxcbiAgICBhdWRpb0NvbnRlbnQ6IGNyZWF0ZUF1ZGlvQ29udGVudFN0eWxlKG9wdGlvbnMpLFxuICAgIGF2YXRhcjogY3JlYXRlQXZhdGFyU3R5bGUob3B0aW9ucyksXG4gICAgYnViYmxlOiBjcmVhdGVCdWJibGVTdHlsZShvcHRpb25zKSxcbiAgICBjYXJvdXNlbEZpbG1TdHJpcDogY3JlYXRlQ2Fyb3VzZWxGaWxtU3RyaXAob3B0aW9ucyksXG4gICAgY2Fyb3VzZWxGbGlwcGVyOiBjcmVhdGVDYXJvdXNlbEZsaXBwZXIob3B0aW9ucyksXG4gICAgY29ubmVjdGl2aXR5Tm90aWZpY2F0aW9uOiBjcmVhdGVDb25uZWN0aXZpdHlOb3RpZmljYXRpb24ob3B0aW9ucyksXG4gICAgZGljdGF0aW9uSW50ZXJpbXM6IGNyZWF0ZURpY3RhdGlvbkludGVyaW1zU3R5bGUob3B0aW9ucyksXG4gICAgZG93bmxvYWRBdHRhY2htZW50OiBjcmVhdGVEb3dubG9hZEF0dGFjaG1lbnRTdHlsZShvcHRpb25zKSxcbiAgICBlcnJvckJveDogY3JlYXRlRXJyb3JCb3hTdHlsZShvcHRpb25zKSxcbiAgICBlcnJvck5vdGlmaWNhdGlvbjogY3JlYXRlRXJyb3JOb3RpZmljYXRpb25TdHlsZShvcHRpb25zKSxcbiAgICBtaWNyb3Bob25lQnV0dG9uOiBjcmVhdGVNaWNyb3Bob25lQnV0dG9uU3R5bGUob3B0aW9ucyksXG4gICAgb3B0aW9uczoge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHN1Z2dlc3RlZEFjdGlvbnNTdHlsZVNldDogY3JlYXRlU3VnZ2VzdGVkQWN0aW9uc1N0eWxlU2V0KG9wdGlvbnMpXG4gICAgfSxcbiAgICByb290OiBjcmVhdGVSb290U3R5bGUob3B0aW9ucyksXG4gICAgc2Nyb2xsVG9FbmRCdXR0b246IGNyZWF0ZVNjcm9sbFRvRW5kQnV0dG9uU3R5bGUob3B0aW9ucyksXG4gICAgc2VuZEJveDogY3JlYXRlU2VuZEJveFN0eWxlKG9wdGlvbnMpLFxuICAgIHNlbmRCb3hCdXR0b246IGNyZWF0ZVNlbmRCb3hCdXR0b25TdHlsZShvcHRpb25zKSxcbiAgICBzZW5kQm94VGV4dEFyZWE6IGNyZWF0ZVNlbmRCb3hUZXh0QXJlYVN0eWxlKG9wdGlvbnMpLFxuICAgIHNlbmRCb3hUZXh0Qm94OiBjcmVhdGVTZW5kQm94VGV4dEJveFN0eWxlKG9wdGlvbnMpLFxuICAgIHNlbmRTdGF0dXM6IGNyZWF0ZVNlbmRTdGF0dXNTdHlsZShvcHRpb25zKSxcbiAgICBzaW5nbGVBdHRhY2htZW50QWN0aXZpdHk6IGNyZWF0ZVNpbmdsZUF0dGFjaG1lbnRBY3Rpdml0eVN0eWxlKG9wdGlvbnMpLFxuICAgIHNwaW5uZXJBbmltYXRpb246IGNyZWF0ZVNwaW5uZXJBbmltYXRpb25TdHlsZShvcHRpb25zKSxcbiAgICBzdGFja2VkTGF5b3V0OiBjcmVhdGVTdGFja2VkTGF5b3V0U3R5bGUob3B0aW9ucyksXG4gICAgc3VnZ2VzdGVkQWN0aW9uOiBjcmVhdGVTdWdnZXN0ZWRBY3Rpb25TdHlsZShvcHRpb25zKSxcbiAgICBzdWdnZXN0ZWRBY3Rpb25zOiBjcmVhdGVTdWdnZXN0ZWRBY3Rpb25zU3R5bGUob3B0aW9ucyksXG4gICAgdGV4dENvbnRlbnQ6IGNyZWF0ZVRleHRDb250ZW50U3R5bGUob3B0aW9ucyksXG4gICAgdGltZXN0YW1wOiBjcmVhdGVUaW1lc3RhbXBTdHlsZShvcHRpb25zKSxcbiAgICB0eXBpbmdBbmltYXRpb246IGNyZWF0ZVR5cGluZ0FuaW1hdGlvblN0eWxlKG9wdGlvbnMpLFxuICAgIHR5cGluZ0luZGljYXRvcjogY3JlYXRlVHlwaW5nSW5kaWNhdG9yU3R5bGUob3B0aW9ucyksXG4gICAgdXBsb2FkQXR0YWNobWVudDogY3JlYXRlVXBsb2FkQXR0YWNobWVudFN0eWxlKG9wdGlvbnMpLFxuICAgIHVwbG9hZEJ1dHRvbjogY3JlYXRlVXBsb2FkQnV0dG9uU3R5bGUob3B0aW9ucyksXG4gICAgdmlkZW9BdHRhY2htZW50OiBjcmVhdGVWaWRlb0F0dGFjaG1lbnRTdHlsZShvcHRpb25zKSxcbiAgICB2aWRlb0NvbnRlbnQ6IGNyZWF0ZVZpZGVvQ29udGVudFN0eWxlKG9wdGlvbnMpLFxuICAgIHZpbWVvQ29udGVudDogY3JlYXRlVmltZW9Db250ZW50U3R5bGUob3B0aW9ucyksXG4gICAgd2FybmluZ05vdGlmaWNhdGlvbjogY3JlYXRlV2FybmluZ05vdGlmaWNhdGlvblN0eWxlKG9wdGlvbnMpLFxuICAgIHlvdVR1YmVDb250ZW50OiBjcmVhdGVZb3VUdWJlQ29udGVudFN0eWxlKG9wdGlvbnMpXG4gIH07XG59XG4iXX0=
