'use strict';

var cov_29jx4p7lqk = (function() {
  var path = '/Users/guy/Work/Leo/leo/BotFramework-WebChat/packages/component/src/connectToWebChat.js';
  var hash = 'c4b1d2bea20dc8ecceb885c3a4c79a8564ebdc76';
  var global = new Function('return this')();
  var gcv = '__coverage__';
  var coverageData = {
    path: '/Users/guy/Work/Leo/leo/BotFramework-WebChat/packages/component/src/connectToWebChat.js',
    statementMap: {
      '0': {
        start: {
          line: 8,
          column: 2
        },
        end: {
          line: 16,
          column: 9
        }
      },
      '1': {
        start: {
          line: 9,
          column: 18
        },
        end: {
          line: 9,
          column: 26
        }
      },
      '2': {
        start: {
          line: 11,
          column: 4
        },
        end: {
          line: 13,
          column: 5
        }
      },
      '3': {
        start: {
          line: 12,
          column: 6
        },
        end: {
          line: 12,
          column: 26
        }
      },
      '4': {
        start: {
          line: 15,
          column: 4
        },
        end: {
          line: 15,
          column: 18
        }
      },
      '5': {
        start: {
          line: 20,
          column: 2
        },
        end: {
          line: 27,
          column: 6
        }
      },
      '6': {
        start: {
          line: 21,
          column: 4
        },
        end: {
          line: 27,
          column: 5
        }
      },
      '7': {
        start: {
          line: 22,
          column: 29
        },
        end: {
          line: 25,
          column: 7
        }
      },
      '8': {
        start: {
          line: 31,
          column: 27
        },
        end: {
          line: 31,
          column: 57
        }
      },
      '9': {
        start: {
          line: 35,
          column: 2
        },
        end: {
          line: 50,
          column: 4
        }
      },
      '10': {
        start: {
          line: 36,
          column: 31
        },
        end: {
          line: 43,
          column: 16
        }
      },
      '11': {
        start: {
          line: 37,
          column: 43
        },
        end: {
          line: 37,
          column: 95
        }
      },
      '12': {
        start: {
          line: 45,
          column: 38
        },
        end: {
          line: 47,
          column: 5
        }
      },
      '13': {
        start: {
          line: 46,
          column: 6
        },
        end: {
          line: 46,
          column: 107
        }
      },
      '14': {
        start: {
          line: 46,
          column: 36
        },
        end: {
          line: 46,
          column: 87
        }
      },
      '15': {
        start: {
          line: 49,
          column: 4
        },
        end: {
          line: 49,
          column: 37
        }
      }
    },
    fnMap: {
      '0': {
        name: 'removeUndefinedValues',
        decl: {
          start: {
            line: 7,
            column: 9
          },
          end: {
            line: 7,
            column: 30
          }
        },
        loc: {
          start: {
            line: 7,
            column: 36
          },
          end: {
            line: 17,
            column: 1
          }
        },
        line: 7
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 8,
            column: 33
          },
          end: {
            line: 8,
            column: 34
          }
        },
        loc: {
          start: {
            line: 8,
            column: 50
          },
          end: {
            line: 16,
            column: 3
          }
        },
        line: 8
      },
      '2': {
        name: 'combineSelectors',
        decl: {
          start: {
            line: 19,
            column: 9
          },
          end: {
            line: 19,
            column: 25
          }
        },
        loc: {
          start: {
            line: 19,
            column: 40
          },
          end: {
            line: 28,
            column: 1
          }
        },
        line: 19
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 20,
            column: 9
          },
          end: {
            line: 20,
            column: 10
          }
        },
        loc: {
          start: {
            line: 21,
            column: 4
          },
          end: {
            line: 27,
            column: 5
          }
        },
        line: 21
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 22,
            column: 6
          },
          end: {
            line: 22,
            column: 7
          }
        },
        loc: {
          start: {
            line: 22,
            column: 29
          },
          end: {
            line: 25,
            column: 7
          }
        },
        line: 22
      },
      '5': {
        name: 'connectToWebChat',
        decl: {
          start: {
            line: 30,
            column: 24
          },
          end: {
            line: 30,
            column: 40
          }
        },
        loc: {
          start: {
            line: 30,
            column: 55
          },
          end: {
            line: 51,
            column: 1
          }
        },
        line: 30
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 35,
            column: 9
          },
          end: {
            line: 35,
            column: 10
          }
        },
        loc: {
          start: {
            line: 35,
            column: 22
          },
          end: {
            line: 50,
            column: 3
          }
        },
        line: 35
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 37,
            column: 6
          },
          end: {
            line: 37,
            column: 7
          }
        },
        loc: {
          start: {
            line: 37,
            column: 43
          },
          end: {
            line: 37,
            column: 95
          }
        },
        line: 37
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 45,
            column: 38
          },
          end: {
            line: 45,
            column: 39
          }
        },
        loc: {
          start: {
            line: 46,
            column: 6
          },
          end: {
            line: 46,
            column: 107
          }
        },
        line: 46
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 46,
            column: 25
          },
          end: {
            line: 46,
            column: 26
          }
        },
        loc: {
          start: {
            line: 46,
            column: 36
          },
          end: {
            line: 46,
            column: 87
          }
        },
        line: 46
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 11,
            column: 4
          },
          end: {
            line: 13,
            column: 5
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 11,
              column: 4
            },
            end: {
              line: 13,
              column: 5
            }
          },
          {
            start: {
              line: 11,
              column: 4
            },
            end: {
              line: 13,
              column: 5
            }
          }
        ],
        line: 11
      },
      '1': {
        loc: {
          start: {
            line: 24,
            column: 33
          },
          end: {
            line: 24,
            column: 70
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 24,
              column: 34
            },
            end: {
              line: 24,
              column: 42
            }
          },
          {
            start: {
              line: 24,
              column: 46
            },
            end: {
              line: 24,
              column: 63
            }
          },
          {
            start: {
              line: 24,
              column: 68
            },
            end: {
              line: 24,
              column: 70
            }
          }
        ],
        line: 24
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0, 0]
    },
    _coverageSchema: '43e27e138ebf9cfc5966b082cf9a028302ed4184',
    hash: 'c4b1d2bea20dc8ecceb885c3a4c79a8564ebdc76'
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  return (coverage[path] = coverageData);
})();

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = connectToWebChat;

var _reactRedux = require('react-redux');

var _react = _interopRequireDefault(require('react'));

var _Context = _interopRequireDefault(require('./Context'));

var _WebChatReduxContext = _interopRequireDefault(require('./WebChatReduxContext'));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

function _extends() {
  _extends =
    Object.assign ||
    function(target) {
      for (var i = 1; i < arguments.length; i++) {
        var source = arguments[i];
        for (var key in source) {
          if (Object.prototype.hasOwnProperty.call(source, key)) {
            target[key] = source[key];
          }
        }
      }
      return target;
    };
  return _extends.apply(this, arguments);
}

function _objectWithoutProperties(source, excluded) {
  if (source == null) return {};
  var target = _objectWithoutPropertiesLoose(source, excluded);
  var key, i;
  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);
    for (i = 0; i < sourceSymbolKeys.length; i++) {
      key = sourceSymbolKeys[i];
      if (excluded.indexOf(key) >= 0) continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
      target[key] = source[key];
    }
  }
  return target;
}

function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;
  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }
  return target;
}

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    keys.push.apply(keys, Object.getOwnPropertySymbols(object));
  }
  if (enumerableOnly)
    keys = keys.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};
    if (i % 2) {
      ownKeys(source, true).forEach(function(key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(source).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}

function removeUndefinedValues(map) {
  cov_29jx4p7lqk.f[0]++;
  cov_29jx4p7lqk.s[0]++;
  return Object.keys(map).reduce(function(result, key) {
    cov_29jx4p7lqk.f[1]++;
    var value = (cov_29jx4p7lqk.s[1]++, map[key]);
    cov_29jx4p7lqk.s[2]++;

    if (typeof value !== 'undefined') {
      cov_29jx4p7lqk.b[0][0]++;
      cov_29jx4p7lqk.s[3]++;
      result[key] = value;
    } else {
      cov_29jx4p7lqk.b[0][1]++;
    }

    cov_29jx4p7lqk.s[4]++;
    return result;
  }, {});
}

function combineSelectors() {
  for (var _len = arguments.length, selectors = new Array(_len), _key = 0; _key < _len; _key++) {
    selectors[_key] = arguments[_key];
  }

  cov_29jx4p7lqk.f[2]++;
  cov_29jx4p7lqk.s[5]++;
  return function() {
    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }

    cov_29jx4p7lqk.f[3]++;
    cov_29jx4p7lqk.s[6]++;
    return selectors.reduce(function(result, selector) {
      cov_29jx4p7lqk.f[4]++;
      cov_29jx4p7lqk.s[7]++;
      return _objectSpread(
        {},
        result,
        {},
        removeUndefinedValues(
          ((cov_29jx4p7lqk.b[1][0]++, selector) && (cov_29jx4p7lqk.b[1][1]++, selector.apply(void 0, args))) ||
            (cov_29jx4p7lqk.b[1][2]++, {})
        )
      );
    }, {});
  };
}

function connectToWebChat() {
  cov_29jx4p7lqk.f[5]++;
  var combinedSelector = (cov_29jx4p7lqk.s[8]++, combineSelectors.apply(void 0, arguments)); // TODO: [P1] Instead of exposing Redux store via props, we should consider exposing via Context.
  //       We should also hide dispatch function.

  cov_29jx4p7lqk.s[9]++;
  return function(Component) {
    cov_29jx4p7lqk.f[6]++;
    var ConnectedComponent =
      (cov_29jx4p7lqk.s[10]++,
      (0, _reactRedux.connect)(
        function(state, _ref) {
          var context = _ref.context,
            ownProps = _objectWithoutProperties(_ref, ['context']);

          cov_29jx4p7lqk.f[7]++;
          cov_29jx4p7lqk.s[11]++;
          return combinedSelector(_objectSpread({}, state, {}, context), ownProps);
        },
        null,
        null,
        {
          context: _WebChatReduxContext.default
        }
      )(Component));
    cov_29jx4p7lqk.s[12]++;

    var WebChatConnectedComponent = function WebChatConnectedComponent(props) {
      cov_29jx4p7lqk.f[8]++;
      cov_29jx4p7lqk.s[13]++;
      return _react.default.createElement(_Context.default.Consumer, null, function(context) {
        cov_29jx4p7lqk.f[9]++;
        cov_29jx4p7lqk.s[14]++;
        return _react.default.createElement(
          ConnectedComponent,
          _extends({}, props, {
            context: context
          })
        );
      });
    };

    cov_29jx4p7lqk.s[15]++;
    return WebChatConnectedComponent;
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb25uZWN0VG9XZWJDaGF0LmpzIl0sIm5hbWVzIjpbInJlbW92ZVVuZGVmaW5lZFZhbHVlcyIsIm1hcCIsIk9iamVjdCIsImtleXMiLCJyZWR1Y2UiLCJyZXN1bHQiLCJrZXkiLCJ2YWx1ZSIsImNvbWJpbmVTZWxlY3RvcnMiLCJzZWxlY3RvcnMiLCJhcmdzIiwic2VsZWN0b3IiLCJjb25uZWN0VG9XZWJDaGF0IiwiY29tYmluZWRTZWxlY3RvciIsIkNvbXBvbmVudCIsIkNvbm5lY3RlZENvbXBvbmVudCIsInN0YXRlIiwiY29udGV4dCIsIm93blByb3BzIiwiV2ViQ2hhdFJlZHV4Q29udGV4dCIsIldlYkNoYXRDb25uZWN0ZWRDb21wb25lbnQiLCJwcm9wcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUVBOztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7O0FBRUEsU0FBU0EscUJBQVQsQ0FBK0JDLEdBQS9CLEVBQW9DO0FBQUE7QUFBQTtBQUNsQyxTQUFPQyxNQUFNLENBQUNDLElBQVAsQ0FBWUYsR0FBWixFQUFpQkcsTUFBakIsQ0FBd0IsVUFBQ0MsTUFBRCxFQUFTQyxHQUFULEVBQWlCO0FBQUE7QUFDOUMsUUFBTUMsS0FBSywyQkFBR04sR0FBRyxDQUFDSyxHQUFELENBQU4sQ0FBWDtBQUQ4Qzs7QUFHOUMsUUFBSSxPQUFPQyxLQUFQLEtBQWlCLFdBQXJCLEVBQWtDO0FBQUE7QUFBQTtBQUNoQ0YsTUFBQUEsTUFBTSxDQUFDQyxHQUFELENBQU4sR0FBY0MsS0FBZDtBQUNELEtBRkQ7QUFBQTtBQUFBOztBQUg4QztBQU85QyxXQUFPRixNQUFQO0FBQ0QsR0FSTSxFQVFKLEVBUkksQ0FBUDtBQVNEOztBQUVELFNBQVNHLGdCQUFULEdBQXdDO0FBQUEsb0NBQVhDLFNBQVc7QUFBWEEsSUFBQUEsU0FBVztBQUFBOztBQUFBO0FBQUE7QUFDdEMsU0FBTyxZQUNMO0FBQUEsdUNBRFNDLElBQ1Q7QUFEU0EsTUFBQUEsSUFDVDtBQUFBOztBQUFBO0FBQUE7QUFBQSxXQUFBRCxTQUFTLENBQUNMLE1BQVYsQ0FDRSxVQUFDQyxNQUFELEVBQVNNLFFBQVQsRUFBdUI7QUFBQTtBQUFBO0FBQUEsK0JBQ2xCTixNQURrQixNQUVsQkwscUJBQXFCLENBQUUsMkJBQUFXLFFBQVEsZ0NBQUlBLFFBQVEsTUFBUixTQUFZRCxJQUFaLENBQUosQ0FBVCwrQkFBbUMsRUFBbkMsQ0FBRCxDQUZIO0FBR3RCLEtBSkgsRUFLRSxFQUxGO0FBTUMsR0FQSDtBQVFEOztBQUVjLFNBQVNFLGdCQUFULEdBQXdDO0FBQUE7QUFDckQsTUFBTUMsZ0JBQWdCLDJCQUFHTCxnQkFBZ0IsTUFBaEIsbUJBQUgsQ0FBdEIsQ0FEcUQsQ0FHckQ7QUFDQTs7QUFKcUQ7QUFLckQsU0FBTyxVQUFBTSxTQUFTLEVBQUk7QUFBQTtBQUNsQixRQUFNQyxrQkFBa0IsNEJBQUcseUJBQ3pCLFVBQUNDLEtBQUQsUUFBcUM7QUFBQSxVQUEzQkMsT0FBMkIsUUFBM0JBLE9BQTJCO0FBQUEsVUFBZkMsUUFBZTs7QUFBQTtBQUFBO0FBQUEsYUFBQUwsZ0JBQWdCLG1CQUFNRyxLQUFOLE1BQWdCQyxPQUFoQixHQUEyQkMsUUFBM0IsQ0FBaEI7QUFBb0QsS0FEaEUsRUFFekIsSUFGeUIsRUFHekIsSUFIeUIsRUFJekI7QUFDRUQsTUFBQUEsT0FBTyxFQUFFRTtBQURYLEtBSnlCLEVBT3pCTCxTQVB5QixDQUFILENBQXhCO0FBRGtCOztBQVVsQixRQUFNTSx5QkFBeUIsR0FBRyxTQUE1QkEseUJBQTRCLENBQUFDLEtBQUssRUFDckM7QUFBQTtBQUFBO0FBQUEsMENBQUMsZ0JBQUQsQ0FBUyxRQUFULFFBQW1CLFVBQUFKLE9BQU8sRUFBSTtBQUFBO0FBQUE7QUFBQSw0Q0FBQyxrQkFBRCxlQUF3QkksS0FBeEI7QUFBK0IsVUFBQSxPQUFPLEVBQUVKO0FBQXhDO0FBQW1ELE9BQWpGO0FBQXFHLEtBRHZHOztBQVZrQjtBQWNsQixXQUFPRyx5QkFBUDtBQUNELEdBZkQ7QUFnQkQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IENvbnRleHQgZnJvbSAnLi9Db250ZXh0JztcbmltcG9ydCBXZWJDaGF0UmVkdXhDb250ZXh0IGZyb20gJy4vV2ViQ2hhdFJlZHV4Q29udGV4dCc7XG5cbmZ1bmN0aW9uIHJlbW92ZVVuZGVmaW5lZFZhbHVlcyhtYXApIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG1hcCkucmVkdWNlKChyZXN1bHQsIGtleSkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gbWFwW2tleV07XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LCB7fSk7XG59XG5cbmZ1bmN0aW9uIGNvbWJpbmVTZWxlY3RvcnMoLi4uc2VsZWN0b3JzKSB7XG4gIHJldHVybiAoLi4uYXJncykgPT5cbiAgICBzZWxlY3RvcnMucmVkdWNlKFxuICAgICAgKHJlc3VsdCwgc2VsZWN0b3IpID0+ICh7XG4gICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgLi4ucmVtb3ZlVW5kZWZpbmVkVmFsdWVzKChzZWxlY3RvciAmJiBzZWxlY3RvciguLi5hcmdzKSkgfHwge30pXG4gICAgICB9KSxcbiAgICAgIHt9XG4gICAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29ubmVjdFRvV2ViQ2hhdCguLi5zZWxlY3RvcnMpIHtcbiAgY29uc3QgY29tYmluZWRTZWxlY3RvciA9IGNvbWJpbmVTZWxlY3RvcnMoLi4uc2VsZWN0b3JzKTtcblxuICAvLyBUT0RPOiBbUDFdIEluc3RlYWQgb2YgZXhwb3NpbmcgUmVkdXggc3RvcmUgdmlhIHByb3BzLCB3ZSBzaG91bGQgY29uc2lkZXIgZXhwb3NpbmcgdmlhIENvbnRleHQuXG4gIC8vICAgICAgIFdlIHNob3VsZCBhbHNvIGhpZGUgZGlzcGF0Y2ggZnVuY3Rpb24uXG4gIHJldHVybiBDb21wb25lbnQgPT4ge1xuICAgIGNvbnN0IENvbm5lY3RlZENvbXBvbmVudCA9IGNvbm5lY3QoXG4gICAgICAoc3RhdGUsIHsgY29udGV4dCwgLi4ub3duUHJvcHMgfSkgPT4gY29tYmluZWRTZWxlY3Rvcih7IC4uLnN0YXRlLCAuLi5jb250ZXh0IH0sIG93blByb3BzKSxcbiAgICAgIG51bGwsXG4gICAgICBudWxsLFxuICAgICAge1xuICAgICAgICBjb250ZXh0OiBXZWJDaGF0UmVkdXhDb250ZXh0XG4gICAgICB9XG4gICAgKShDb21wb25lbnQpO1xuXG4gICAgY29uc3QgV2ViQ2hhdENvbm5lY3RlZENvbXBvbmVudCA9IHByb3BzID0+IChcbiAgICAgIDxDb250ZXh0LkNvbnN1bWVyPntjb250ZXh0ID0+IDxDb25uZWN0ZWRDb21wb25lbnQgey4uLnByb3BzfSBjb250ZXh0PXtjb250ZXh0fSAvPn08L0NvbnRleHQuQ29uc3VtZXI+XG4gICAgKTtcblxuICAgIHJldHVybiBXZWJDaGF0Q29ubmVjdGVkQ29tcG9uZW50O1xuICB9O1xufVxuIl19
