'use strict';

var cov_kzv5w877h = (function() {
  var path = '/Users/guy/Work/Leo/leo/BotFramework-WebChat/packages/component/src/Attachment/VideoContent.js';
  var hash = 'a44a004f8fd426d01c9c44bd747bdbdf648336cc';
  var global = new Function('return this')();
  var gcv = '__coverage__';
  var coverageData = {
    path: '/Users/guy/Work/Leo/leo/BotFramework-WebChat/packages/component/src/Attachment/VideoContent.js',
    statementMap: {
      '0': {
        start: {
          line: 8,
          column: 23
        },
        end: {
          line: 8,
          column: 36
        }
      },
      '1': {
        start: {
          line: 9,
          column: 27
        },
        end: {
          line: 9,
          column: 44
        }
      },
      '2': {
        start: {
          line: 10,
          column: 29
        },
        end: {
          line: 10,
          column: 39
        }
      },
      '3': {
        start: {
          line: 11,
          column: 33
        },
        end: {
          line: 11,
          column: 47
        }
      },
      '4': {
        start: {
          line: 12,
          column: 21
        },
        end: {
          line: 12,
          column: 32
        }
      },
      '5': {
        start: {
          line: 13,
          column: 25
        },
        end: {
          line: 13,
          column: 40
        }
      },
      '6': {
        start: {
          line: 21,
          column: 2
        },
        end: {
          line: 26,
          column: 3
        }
      },
      '7': {
        start: {
          line: 22,
          column: 4
        },
        end: {
          line: 22,
          column: 27
        }
      },
      '8': {
        start: {
          line: 24,
          column: 4
        },
        end: {
          line: 24,
          column: 42
        }
      },
      '9': {
        start: {
          line: 25,
          column: 4
        },
        end: {
          line: 25,
          column: 38
        }
      },
      '10': {
        start: {
          line: 28,
          column: 41
        },
        end: {
          line: 28,
          column: 48
        }
      },
      '11': {
        start: {
          line: 30,
          column: 2
        },
        end: {
          line: 30,
          column: 40
        }
      },
      '12': {
        start: {
          line: 33,
          column: 21
        },
        end: {
          line: 54,
          column: 1
        }
      },
      '13': {
        start: {
          line: 34,
          column: 41
        },
        end: {
          line: 34,
          column: 54
        }
      },
      '14': {
        start: {
          line: 35,
          column: 22
        },
        end: {
          line: 35,
          column: 47
        }
      },
      '15': {
        start: {
          line: 36,
          column: 23
        },
        end: {
          line: 36,
          column: 50
        }
      },
      '16': {
        start: {
          line: 38,
          column: 2
        },
        end: {
          line: 53,
          column: 3
        }
      },
      '17': {
        start: {
          line: 41,
          column: 6
        },
        end: {
          line: 41,
          column: 94
        }
      },
      '18': {
        start: {
          line: 45,
          column: 6
        },
        end: {
          line: 45,
          column: 106
        }
      },
      '19': {
        start: {
          line: 49,
          column: 6
        },
        end: {
          line: 49,
          column: 96
        }
      },
      '20': {
        start: {
          line: 52,
          column: 6
        },
        end: {
          line: 52,
          column: 102
        }
      },
      '21': {
        start: {
          line: 56,
          column: 0
        },
        end: {
          line: 61,
          column: 2
        }
      },
      '22': {
        start: {
          line: 63,
          column: 0
        },
        end: {
          line: 69,
          column: 2
        }
      }
    },
    fnMap: {
      '0': {
        name: 'parseURL',
        decl: {
          start: {
            line: 18,
            column: 9
          },
          end: {
            line: 18,
            column: 17
          }
        },
        loc: {
          start: {
            line: 18,
            column: 23
          },
          end: {
            line: 31,
            column: 1
          }
        },
        line: 18
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 33,
            column: 21
          },
          end: {
            line: 33,
            column: 22
          }
        },
        loc: {
          start: {
            line: 33,
            column: 63
          },
          end: {
            line: 54,
            column: 1
          }
        },
        line: 33
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 21,
            column: 2
          },
          end: {
            line: 26,
            column: 3
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 21,
              column: 2
            },
            end: {
              line: 26,
              column: 3
            }
          },
          {
            start: {
              line: 21,
              column: 2
            },
            end: {
              line: 26,
              column: 3
            }
          }
        ],
        line: 21
      },
      '1': {
        loc: {
          start: {
            line: 38,
            column: 2
          },
          end: {
            line: 53,
            column: 3
          }
        },
        type: 'switch',
        locations: [
          {
            start: {
              line: 39,
              column: 4
            },
            end: {
              line: 39,
              column: 22
            }
          },
          {
            start: {
              line: 40,
              column: 4
            },
            end: {
              line: 41,
              column: 94
            }
          },
          {
            start: {
              line: 43,
              column: 4
            },
            end: {
              line: 43,
              column: 24
            }
          },
          {
            start: {
              line: 44,
              column: 4
            },
            end: {
              line: 45,
              column: 106
            }
          },
          {
            start: {
              line: 47,
              column: 4
            },
            end: {
              line: 47,
              column: 30
            }
          },
          {
            start: {
              line: 48,
              column: 4
            },
            end: {
              line: 49,
              column: 96
            }
          },
          {
            start: {
              line: 51,
              column: 4
            },
            end: {
              line: 52,
              column: 102
            }
          }
        ],
        line: 38
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0
    },
    f: {
      '0': 0,
      '1': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0, 0, 0, 0, 0, 0]
    },
    _coverageSchema: '43e27e138ebf9cfc5966b082cf9a028302ed4184',
    hash: 'a44a004f8fd426d01c9c44bd747bdbdf648336cc'
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  return (coverage[path] = coverageData);
})();

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = void 0;

var _propTypes = _interopRequireDefault(require('prop-types'));

var _react = _interopRequireDefault(require('react'));

var _HTMLVideoContent = _interopRequireDefault(require('./HTMLVideoContent'));

var _VimeoContent = _interopRequireDefault(require('./VimeoContent'));

var _YouTubeContent = _interopRequireDefault(require('./YouTubeContent'));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

var YOUTUBE_DOMAIN = (cov_kzv5w877h.s[0]++, 'youtube.com');
var YOUTUBE_WWW_DOMAIN = (cov_kzv5w877h.s[1]++, 'www.youtube.com');
var YOUTUBE_SHORT_DOMAIN = (cov_kzv5w877h.s[2]++, 'youtu.be');
var YOUTUBE_WWW_SHORT_DOMAIN = (cov_kzv5w877h.s[3]++, 'www.youtu.be');
var VIMEO_DOMAIN = (cov_kzv5w877h.s[4]++, 'vimeo.com');
var VIMEO_WWW_DOMAIN = (cov_kzv5w877h.s[5]++, 'www.vimeo.com'); // This is a workaround
// - Today, there is no good URL polyfill for older browser
// - Instead of writing a URL parser, for older browser, we will use this <a href> trick to parse the URL

function parseURL(url) {
  cov_kzv5w877h.f[0]++;
  var urlLike;
  cov_kzv5w877h.s[6]++;

  if (typeof URL === 'function') {
    cov_kzv5w877h.b[0][0]++;
    cov_kzv5w877h.s[7]++;
    urlLike = new URL(url);
  } else {
    cov_kzv5w877h.b[0][1]++;
    cov_kzv5w877h.s[8]++;
    urlLike = document.createElement('a');
    cov_kzv5w877h.s[9]++;
    urlLike.setAttribute('href', url);
  }

  var _ref = (cov_kzv5w877h.s[10]++, urlLike),
    hostname = _ref.hostname,
    pathname = _ref.pathname,
    search = _ref.search;

  cov_kzv5w877h.s[11]++;
  return {
    hostname: hostname,
    pathname: pathname,
    search: search
  };
}

cov_kzv5w877h.s[12]++;

var VideoContent = function VideoContent(_ref2) {
  var alt = _ref2.alt,
    autoPlay = _ref2.autoPlay,
    loop = _ref2.loop,
    poster = _ref2.poster,
    src = _ref2.src;
  cov_kzv5w877h.f[1]++;

  var _ref3 = (cov_kzv5w877h.s[13]++, parseURL(src)),
    hostname = _ref3.hostname,
    pathname = _ref3.pathname,
    search = _ref3.search;

  var lastSegment = (cov_kzv5w877h.s[14]++, pathname.split('/').pop());
  var searchParams = (cov_kzv5w877h.s[15]++, new URLSearchParams(search));
  cov_kzv5w877h.s[16]++;

  switch (hostname) {
    case VIMEO_DOMAIN:
      cov_kzv5w877h.b[1][0]++;

    case VIMEO_WWW_DOMAIN:
      cov_kzv5w877h.b[1][1]++;
      cov_kzv5w877h.s[17]++;
      return _react.default.createElement(_VimeoContent.default, {
        alt: alt,
        autoPlay: autoPlay,
        embedID: lastSegment,
        loop: loop
      });

    case YOUTUBE_DOMAIN:
      cov_kzv5w877h.b[1][2]++;

    case YOUTUBE_WWW_DOMAIN:
      cov_kzv5w877h.b[1][3]++;
      cov_kzv5w877h.s[18]++;
      return _react.default.createElement(_YouTubeContent.default, {
        alt: alt,
        autoPlay: autoPlay,
        embedID: searchParams.get('v'),
        loop: loop
      });

    case YOUTUBE_SHORT_DOMAIN:
      cov_kzv5w877h.b[1][4]++;

    case YOUTUBE_WWW_SHORT_DOMAIN:
      cov_kzv5w877h.b[1][5]++;
      cov_kzv5w877h.s[19]++;
      return _react.default.createElement(_YouTubeContent.default, {
        alt: alt,
        autoPlay: autoPlay,
        embedID: lastSegment,
        loop: loop
      });

    default:
      cov_kzv5w877h.b[1][6]++;
      cov_kzv5w877h.s[20]++;
      return _react.default.createElement(_HTMLVideoContent.default, {
        alt: alt,
        autoPlay: autoPlay,
        loop: loop,
        poster: poster,
        src: src
      });
  }
};

cov_kzv5w877h.s[21]++;
VideoContent.defaultProps = {
  alt: '',
  autoPlay: false,
  loop: false,
  poster: ''
};
cov_kzv5w877h.s[22]++;
VideoContent.propTypes = {
  alt: _propTypes.default.string,
  autoPlay: _propTypes.default.bool,
  loop: _propTypes.default.bool,
  poster: _propTypes.default.string,
  src: _propTypes.default.string.isRequired
};
var _default = VideoContent;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9BdHRhY2htZW50L1ZpZGVvQ29udGVudC5qcyJdLCJuYW1lcyI6WyJZT1VUVUJFX0RPTUFJTiIsIllPVVRVQkVfV1dXX0RPTUFJTiIsIllPVVRVQkVfU0hPUlRfRE9NQUlOIiwiWU9VVFVCRV9XV1dfU0hPUlRfRE9NQUlOIiwiVklNRU9fRE9NQUlOIiwiVklNRU9fV1dXX0RPTUFJTiIsInBhcnNlVVJMIiwidXJsIiwidXJsTGlrZSIsIlVSTCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImhvc3RuYW1lIiwicGF0aG5hbWUiLCJzZWFyY2giLCJWaWRlb0NvbnRlbnQiLCJhbHQiLCJhdXRvUGxheSIsImxvb3AiLCJwb3N0ZXIiLCJzcmMiLCJsYXN0U2VnbWVudCIsInNwbGl0IiwicG9wIiwic2VhcmNoUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiZ2V0IiwiZGVmYXVsdFByb3BzIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwic3RyaW5nIiwiYm9vbCIsImlzUmVxdWlyZWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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Z0IsUUFBQSxHQUFHLEVBQUVjLEdBQXJCO0FBQTBCLFFBQUEsUUFBUSxFQUFFQyxRQUFwQztBQUE4QyxRQUFBLE9BQU8sRUFBRUksV0FBdkQ7QUFBb0UsUUFBQSxJQUFJLEVBQUVIO0FBQTFFLFFBQVA7O0FBRUY7QUFBQTtBQUFBO0FBQ0UsYUFBTyw2QkFBQyx5QkFBRDtBQUFrQixRQUFBLEdBQUcsRUFBRUYsR0FBdkI7QUFBNEIsUUFBQSxRQUFRLEVBQUVDLFFBQXRDO0FBQWdELFFBQUEsSUFBSSxFQUFFQyxJQUF0RDtBQUE0RCxRQUFBLE1BQU0sRUFBRUMsTUFBcEU7QUFBNEUsUUFBQSxHQUFHLEVBQUVDO0FBQWpGLFFBQVA7QUFkSjtBQWdCRCxDQXJCRDs7O0FBdUJBTCxZQUFZLENBQUNZLFlBQWIsR0FBNEI7QUFDMUJYLEVBQUFBLEdBQUcsRUFBRSxFQURxQjtBQUUxQkMsRUFBQUEsUUFBUSxFQUFFLEtBRmdCO0FBRzFCQyxFQUFBQSxJQUFJLEVBQUUsS0FIb0I7QUFJMUJDLEVBQUFBLE1BQU0sRUFBRTtBQUprQixDQUE1Qjs7QUFPQUosWUFBWSxDQUFDYSxTQUFiLEdBQXlCO0FBQ3ZCWixFQUFBQSxHQUFHLEVBQUVhLG1CQUFVQyxNQURRO0FBRXZCYixFQUFBQSxRQUFRLEVBQUVZLG1CQUFVRSxJQUZHO0FBR3ZCYixFQUFBQSxJQUFJLEVBQUVXLG1CQUFVRSxJQUhPO0FBSXZCWixFQUFBQSxNQUFNLEVBQUVVLG1CQUFVQyxNQUpLO0FBS3ZCVixFQUFBQSxHQUFHLEVBQUVTLG1CQUFVQyxNQUFWLENBQWlCRTtBQUxDLENBQXpCO2VBUWVqQixZIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCBIVE1MVmlkZW9Db250ZW50IGZyb20gJy4vSFRNTFZpZGVvQ29udGVudCc7XG5pbXBvcnQgVmltZW9Db250ZW50IGZyb20gJy4vVmltZW9Db250ZW50JztcbmltcG9ydCBZb3VUdWJlQ29udGVudCBmcm9tICcuL1lvdVR1YmVDb250ZW50JztcblxuY29uc3QgWU9VVFVCRV9ET01BSU4gPSAneW91dHViZS5jb20nO1xuY29uc3QgWU9VVFVCRV9XV1dfRE9NQUlOID0gJ3d3dy55b3V0dWJlLmNvbSc7XG5jb25zdCBZT1VUVUJFX1NIT1JUX0RPTUFJTiA9ICd5b3V0dS5iZSc7XG5jb25zdCBZT1VUVUJFX1dXV19TSE9SVF9ET01BSU4gPSAnd3d3LnlvdXR1LmJlJztcbmNvbnN0IFZJTUVPX0RPTUFJTiA9ICd2aW1lby5jb20nO1xuY29uc3QgVklNRU9fV1dXX0RPTUFJTiA9ICd3d3cudmltZW8uY29tJztcblxuLy8gVGhpcyBpcyBhIHdvcmthcm91bmRcbi8vIC0gVG9kYXksIHRoZXJlIGlzIG5vIGdvb2QgVVJMIHBvbHlmaWxsIGZvciBvbGRlciBicm93c2VyXG4vLyAtIEluc3RlYWQgb2Ygd3JpdGluZyBhIFVSTCBwYXJzZXIsIGZvciBvbGRlciBicm93c2VyLCB3ZSB3aWxsIHVzZSB0aGlzIDxhIGhyZWY+IHRyaWNrIHRvIHBhcnNlIHRoZSBVUkxcbmZ1bmN0aW9uIHBhcnNlVVJMKHVybCkge1xuICBsZXQgdXJsTGlrZTtcblxuICBpZiAodHlwZW9mIFVSTCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHVybExpa2UgPSBuZXcgVVJMKHVybCk7XG4gIH0gZWxzZSB7XG4gICAgdXJsTGlrZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICB1cmxMaWtlLnNldEF0dHJpYnV0ZSgnaHJlZicsIHVybCk7XG4gIH1cblxuICBjb25zdCB7IGhvc3RuYW1lLCBwYXRobmFtZSwgc2VhcmNoIH0gPSB1cmxMaWtlO1xuXG4gIHJldHVybiB7IGhvc3RuYW1lLCBwYXRobmFtZSwgc2VhcmNoIH07XG59XG5cbmNvbnN0IFZpZGVvQ29udGVudCA9ICh7IGFsdCwgYXV0b1BsYXksIGxvb3AsIHBvc3Rlciwgc3JjIH0pID0+IHtcbiAgY29uc3QgeyBob3N0bmFtZSwgcGF0aG5hbWUsIHNlYXJjaCB9ID0gcGFyc2VVUkwoc3JjKTtcbiAgY29uc3QgbGFzdFNlZ21lbnQgPSBwYXRobmFtZS5zcGxpdCgnLycpLnBvcCgpO1xuICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHNlYXJjaCk7XG5cbiAgc3dpdGNoIChob3N0bmFtZSkge1xuICAgIGNhc2UgVklNRU9fRE9NQUlOOlxuICAgIGNhc2UgVklNRU9fV1dXX0RPTUFJTjpcbiAgICAgIHJldHVybiA8VmltZW9Db250ZW50IGFsdD17YWx0fSBhdXRvUGxheT17YXV0b1BsYXl9IGVtYmVkSUQ9e2xhc3RTZWdtZW50fSBsb29wPXtsb29wfSAvPjtcblxuICAgIGNhc2UgWU9VVFVCRV9ET01BSU46XG4gICAgY2FzZSBZT1VUVUJFX1dXV19ET01BSU46XG4gICAgICByZXR1cm4gPFlvdVR1YmVDb250ZW50IGFsdD17YWx0fSBhdXRvUGxheT17YXV0b1BsYXl9IGVtYmVkSUQ9e3NlYXJjaFBhcmFtcy5nZXQoJ3YnKX0gbG9vcD17bG9vcH0gLz47XG5cbiAgICBjYXNlIFlPVVRVQkVfU0hPUlRfRE9NQUlOOlxuICAgIGNhc2UgWU9VVFVCRV9XV1dfU0hPUlRfRE9NQUlOOlxuICAgICAgcmV0dXJuIDxZb3VUdWJlQ29udGVudCBhbHQ9e2FsdH0gYXV0b1BsYXk9e2F1dG9QbGF5fSBlbWJlZElEPXtsYXN0U2VnbWVudH0gbG9vcD17bG9vcH0gLz47XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIDxIVE1MVmlkZW9Db250ZW50IGFsdD17YWx0fSBhdXRvUGxheT17YXV0b1BsYXl9IGxvb3A9e2xvb3B9IHBvc3Rlcj17cG9zdGVyfSBzcmM9e3NyY30gLz47XG4gIH1cbn07XG5cblZpZGVvQ29udGVudC5kZWZhdWx0UHJvcHMgPSB7XG4gIGFsdDogJycsXG4gIGF1dG9QbGF5OiBmYWxzZSxcbiAgbG9vcDogZmFsc2UsXG4gIHBvc3RlcjogJydcbn07XG5cblZpZGVvQ29udGVudC5wcm9wVHlwZXMgPSB7XG4gIGFsdDogUHJvcFR5cGVzLnN0cmluZyxcbiAgYXV0b1BsYXk6IFByb3BUeXBlcy5ib29sLFxuICBsb29wOiBQcm9wVHlwZXMuYm9vbCxcbiAgcG9zdGVyOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBzcmM6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxufTtcblxuZXhwb3J0IGRlZmF1bHQgVmlkZW9Db250ZW50O1xuIl19
