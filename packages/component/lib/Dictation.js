'use strict';

var cov_1eclhc7bh8 = (function() {
  var path = '/home/guy/leo/BotFramework-WebChat/packages/component/src/Dictation.js';
  var hash = 'f3f3b5f57c556b3103d71615a9b5a5a4541db3cf';
  var global = new Function('return this')();
  var gcv = '__coverage__';
  var coverageData = {
    path: '/home/guy/leo/BotFramework-WebChat/packages/component/src/Dictation.js',
    statementMap: {
      '0': {
        start: {
          line: 13,
          column: 4
        },
        end: {
          line: 13,
          column: 13
        }
      },
      '1': {
        start: {
          line: 15,
          column: 18
        },
        end: {
          line: 84,
          column: 1
        }
      },
      '2': {
        start: {
          line: 29,
          column: 23
        },
        end: {
          line: 29,
          column: 38
        }
      },
      '3': {
        start: {
          line: 30,
          column: 21
        },
        end: {
          line: 30,
          column: 34
        }
      },
      '4': {
        start: {
          line: 32,
          column: 32
        },
        end: {
          line: 34,
          column: 4
        }
      },
      '5': {
        start: {
          line: 32,
          column: 46
        },
        end: {
          line: 32,
          column: 114
        }
      },
      '6': {
        start: {
          line: 32,
          column: 101
        },
        end: {
          line: 32,
          column: 106
        }
      },
      '7': {
        start: {
          line: 36,
          column: 24
        },
        end: {
          line: 51,
          column: 3
        }
      },
      '8': {
        start: {
          line: 38,
          column: 6
        },
        end: {
          line: 48,
          column: 7
        }
      },
      '9': {
        start: {
          line: 39,
          column: 8
        },
        end: {
          line: 39,
          column: 31
        }
      },
      '10': {
        start: {
          line: 40,
          column: 8
        },
        end: {
          line: 40,
          column: 30
        }
      },
      '11': {
        start: {
          line: 41,
          column: 8
        },
        end: {
          line: 41,
          column: 22
        }
      },
      '12': {
        start: {
          line: 43,
          column: 8
        },
        end: {
          line: 47,
          column: 9
        }
      },
      '13': {
        start: {
          line: 44,
          column: 10
        },
        end: {
          line: 44,
          column: 33
        }
      },
      '14': {
        start: {
          line: 45,
          column: 10
        },
        end: {
          line: 45,
          column: 34
        }
      },
      '15': {
        start: {
          line: 46,
          column: 10
        },
        end: {
          line: 46,
          column: 34
        }
      },
      '16': {
        start: {
          line: 53,
          column: 26
        },
        end: {
          line: 64,
          column: 3
        }
      },
      '17': {
        start: {
          line: 55,
          column: 6
        },
        end: {
          line: 61,
          column: 7
        }
      },
      '18': {
        start: {
          line: 56,
          column: 25
        },
        end: {
          line: 56,
          column: 68
        }
      },
      '19': {
        start: {
          line: 56,
          column: 57
        },
        end: {
          line: 56,
          column: 67
        }
      },
      '20': {
        start: {
          line: 58,
          column: 8
        },
        end: {
          line: 58,
          column: 37
        }
      },
      '21': {
        start: {
          line: 59,
          column: 8
        },
        end: {
          line: 59,
          column: 35
        }
      },
      '22': {
        start: {
          line: 60,
          column: 8
        },
        end: {
          line: 60,
          column: 53
        }
      },
      '23': {
        start: {
          line: 66,
          column: 22
        },
        end: {
          line: 71,
          column: 59
        }
      },
      '24': {
        start: {
          line: 67,
          column: 4
        },
        end: {
          line: 67,
          column: 51
        }
      },
      '25': {
        start: {
          line: 68,
          column: 4
        },
        end: {
          line: 68,
          column: 79
        }
      },
      '26': {
        start: {
          line: 70,
          column: 4
        },
        end: {
          line: 70,
          column: 30
        }
      },
      '27': {
        start: {
          line: 73,
          column: 2
        },
        end: {
          line: 83,
          column: 4
        }
      },
      '28': {
        start: {
          line: 86,
          column: 0
        },
        end: {
          line: 90,
          column: 2
        }
      },
      '29': {
        start: {
          line: 92,
          column: 0
        },
        end: {
          line: 108,
          column: 2
        }
      },
      '30': {
        start: {
          line: 124,
          column: 9
        },
        end: {
          line: 137,
          column: 3
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 15,
            column: 18
          },
          end: {
            line: 15,
            column: 19
          }
        },
        loc: {
          start: {
            line: 28,
            column: 6
          },
          end: {
            line: 84,
            column: 1
          }
        },
        line: 28
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 32,
            column: 40
          },
          end: {
            line: 32,
            column: 41
          }
        },
        loc: {
          start: {
            line: 32,
            column: 46
          },
          end: {
            line: 32,
            column: 114
          }
        },
        line: 32
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 32,
            column: 64
          },
          end: {
            line: 32,
            column: 65
          }
        },
        loc: {
          start: {
            line: 32,
            column: 101
          },
          end: {
            line: 32,
            column: 106
          }
        },
        line: 32
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 37,
            column: 4
          },
          end: {
            line: 37,
            column: 5
          }
        },
        loc: {
          start: {
            line: 37,
            column: 41
          },
          end: {
            line: 49,
            column: 5
          }
        },
        line: 37
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 54,
            column: 4
          },
          end: {
            line: 54,
            column: 5
          }
        },
        loc: {
          start: {
            line: 54,
            column: 26
          },
          end: {
            line: 62,
            column: 5
          }
        },
        line: 54
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 56,
            column: 37
          },
          end: {
            line: 56,
            column: 38
          }
        },
        loc: {
          start: {
            line: 56,
            column: 57
          },
          end: {
            line: 56,
            column: 67
          }
        },
        line: 56
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 66,
            column: 34
          },
          end: {
            line: 66,
            column: 35
          }
        },
        loc: {
          start: {
            line: 66,
            column: 40
          },
          end: {
            line: 71,
            column: 3
          }
        },
        line: 66
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 111,
            column: 2
          },
          end: {
            line: 111,
            column: 3
          }
        },
        loc: {
          start: {
            line: 124,
            column: 9
          },
          end: {
            line: 137,
            column: 3
          }
        },
        line: 124
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 27,
            column: 21
          },
          end: {
            line: 27,
            column: 66
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 27,
              column: 64
            },
            end: {
              line: 27,
              column: 66
            }
          }
        ],
        line: 27
      },
      '1': {
        loc: {
          start: {
            line: 32,
            column: 80
          },
          end: {
            line: 32,
            column: 94
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 32,
              column: 92
            },
            end: {
              line: 32,
              column: 94
            }
          }
        ],
        line: 32
      },
      '2': {
        loc: {
          start: {
            line: 37,
            column: 15
          },
          end: {
            line: 37,
            column: 34
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 37,
              column: 32
            },
            end: {
              line: 37,
              column: 34
            }
          }
        ],
        line: 37
      },
      '3': {
        loc: {
          start: {
            line: 38,
            column: 6
          },
          end: {
            line: 48,
            column: 7
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 38,
              column: 6
            },
            end: {
              line: 48,
              column: 7
            }
          },
          {
            start: {
              line: 38,
              column: 6
            },
            end: {
              line: 48,
              column: 7
            }
          }
        ],
        line: 38
      },
      '4': {
        loc: {
          start: {
            line: 38,
            column: 10
          },
          end: {
            line: 38,
            column: 65
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 38,
              column: 10
            },
            end: {
              line: 38,
              column: 36
            }
          },
          {
            start: {
              line: 38,
              column: 40
            },
            end: {
              line: 38,
              column: 65
            }
          }
        ],
        line: 38
      },
      '5': {
        loc: {
          start: {
            line: 43,
            column: 8
          },
          end: {
            line: 47,
            column: 9
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 43,
              column: 8
            },
            end: {
              line: 47,
              column: 9
            }
          },
          {
            start: {
              line: 43,
              column: 8
            },
            end: {
              line: 47,
              column: 9
            }
          }
        ],
        line: 43
      },
      '6': {
        loc: {
          start: {
            line: 54,
            column: 7
          },
          end: {
            line: 54,
            column: 19
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 54,
              column: 17
            },
            end: {
              line: 54,
              column: 19
            }
          }
        ],
        line: 54
      },
      '7': {
        loc: {
          start: {
            line: 55,
            column: 6
          },
          end: {
            line: 61,
            column: 7
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 55,
              column: 6
            },
            end: {
              line: 61,
              column: 7
            }
          },
          {
            start: {
              line: 55,
              column: 6
            },
            end: {
              line: 61,
              column: 7
            }
          }
        ],
        line: 55
      },
      '8': {
        loc: {
          start: {
            line: 55,
            column: 10
          },
          end: {
            line: 55,
            column: 65
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 55,
              column: 10
            },
            end: {
              line: 55,
              column: 36
            }
          },
          {
            start: {
              line: 55,
              column: 40
            },
            end: {
              line: 55,
              column: 65
            }
          }
        ],
        line: 55
      },
      '9': {
        loc: {
          start: {
            line: 60,
            column: 8
          },
          end: {
            line: 60,
            column: 52
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 60,
              column: 8
            },
            end: {
              line: 60,
              column: 27
            }
          },
          {
            start: {
              line: 60,
              column: 31
            },
            end: {
              line: 60,
              column: 52
            }
          }
        ],
        line: 60
      },
      '10': {
        loc: {
          start: {
            line: 67,
            column: 4
          },
          end: {
            line: 67,
            column: 50
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 67,
              column: 4
            },
            end: {
              line: 67,
              column: 25
            }
          },
          {
            start: {
              line: 67,
              column: 29
            },
            end: {
              line: 67,
              column: 50
            }
          }
        ],
        line: 67
      },
      '11': {
        loc: {
          start: {
            line: 68,
            column: 4
          },
          end: {
            line: 68,
            column: 78
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 68,
              column: 5
            },
            end: {
              line: 68,
              column: 31
            }
          },
          {
            start: {
              line: 68,
              column: 35
            },
            end: {
              line: 68,
              column: 60
            }
          },
          {
            start: {
              line: 68,
              column: 65
            },
            end: {
              line: 68,
              column: 78
            }
          }
        ],
        line: 68
      },
      '12': {
        loc: {
          start: {
            line: 70,
            column: 4
          },
          end: {
            line: 70,
            column: 29
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 70,
              column: 4
            },
            end: {
              line: 70,
              column: 11
            }
          },
          {
            start: {
              line: 70,
              column: 15
            },
            end: {
              line: 70,
              column: 29
            }
          }
        ],
        line: 70
      },
      '13': {
        loc: {
          start: {
            line: 81,
            column: 15
          },
          end: {
            line: 81,
            column: 111
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 81,
              column: 15
            },
            end: {
              line: 81,
              column: 24
            }
          },
          {
            start: {
              line: 81,
              column: 29
            },
            end: {
              line: 81,
              column: 54
            }
          },
          {
            start: {
              line: 81,
              column: 58
            },
            end: {
              line: 81,
              column: 84
            }
          },
          {
            start: {
              line: 81,
              column: 89
            },
            end: {
              line: 81,
              column: 111
            }
          }
        ],
        line: 81
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0
    },
    b: {
      '0': [0],
      '1': [0],
      '2': [0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0],
      '6': [0],
      '7': [0, 0],
      '8': [0, 0],
      '9': [0, 0],
      '10': [0, 0],
      '11': [0, 0, 0],
      '12': [0, 0],
      '13': [0, 0, 0, 0]
    },
    _coverageSchema: '43e27e138ebf9cfc5966b082cf9a028302ed4184',
    hash: 'f3f3b5f57c556b3103d71615a9b5a5a4541db3cf'
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  return (coverage[path] = coverageData);
})();

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = void 0;

var _reactDictateButton = require('react-dictate-button');

var _botframeworkWebchatCore = require('botframework-webchat-core');

var _propTypes = _interopRequireDefault(require('prop-types'));

var _react = _interopRequireWildcard(require('react'));

var _connectToWebChat = _interopRequireDefault(require('./connectToWebChat'));

var _useActivities = _interopRequireDefault(require('./hooks/useActivities'));

var _useLanguage = _interopRequireDefault(require('./hooks/useLanguage'));

function _getRequireWildcardCache() {
  if (typeof WeakMap !== 'function') return null;
  var cache = new WeakMap();
  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };
  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }
  var cache = _getRequireWildcardCache();
  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }
  var newObj = {};
  if (obj != null) {
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for (var key in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, key)) {
        var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
        if (desc && (desc.get || desc.set)) {
          Object.defineProperty(newObj, key, desc);
        } else {
          newObj[key] = obj[key];
        }
      }
    }
  }
  newObj.default = obj;
  if (cache) {
    cache.set(obj, newObj);
  }
  return newObj;
}

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();
}

function _nonIterableRest() {
  throw new TypeError('Invalid attempt to destructure non-iterable instance');
}

function _iterableToArrayLimit(arr, i) {
  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === '[object Arguments]')) {
    return;
  }
  var _arr = [];
  var _n = true;
  var _d = false;
  var _e = undefined;
  try {
    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);
      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i['return'] != null) _i['return']();
    } finally {
      if (_d) throw _e;
    }
  }
  return _arr;
}

function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}

var _ref = (cov_1eclhc7bh8.s[0]++, _botframeworkWebchatCore.Constants),
  _ref$DictateState = _ref.DictateState,
  DICTATING = _ref$DictateState.DICTATING,
  IDLE = _ref$DictateState.IDLE,
  STARTING = _ref$DictateState.STARTING;

cov_1eclhc7bh8.s[1]++;

var Dictation = function Dictation(_ref2) {
  var dictateState = _ref2.dictateState,
    disabled = _ref2.disabled,
    emitTypingIndicator = _ref2.emitTypingIndicator,
    onError = _ref2.onError,
    sendTypingIndicator = _ref2.sendTypingIndicator,
    setDictateInterims = _ref2.setDictateInterims,
    setDictateState = _ref2.setDictateState,
    setSendBox = _ref2.setSendBox,
    startSpeakingActivity = _ref2.startSpeakingActivity,
    stopDictate = _ref2.stopDictate,
    submitSendBox = _ref2.submitSendBox,
    _ref2$webSpeechPonyfi = _ref2.webSpeechPonyfill;
  _ref2$webSpeechPonyfi = _ref2$webSpeechPonyfi === void 0 ? (cov_1eclhc7bh8.b[0][0]++, {}) : _ref2$webSpeechPonyfi;
  var SpeechGrammarList = _ref2$webSpeechPonyfi.SpeechGrammarList,
    SpeechRecognition = _ref2$webSpeechPonyfi.SpeechRecognition;
  cov_1eclhc7bh8.f[0]++;

  var _ref3 = (cov_1eclhc7bh8.s[2]++, (0, _useActivities.default)()),
    _ref4 = _slicedToArray(_ref3, 1),
    activities = _ref4[0];

  var _ref5 = (cov_1eclhc7bh8.s[3]++, (0, _useLanguage.default)()),
    _ref6 = _slicedToArray(_ref5, 1),
    language = _ref6[0];

  var numSpeakingActivities =
    (cov_1eclhc7bh8.s[4]++,
    (0, _react.useMemo)(
      function() {
        cov_1eclhc7bh8.f[1]++;
        cov_1eclhc7bh8.s[5]++;
        return activities.filter(function(_ref7) {
          var _ref7$channelData = _ref7.channelData;
          _ref7$channelData = _ref7$channelData === void 0 ? (cov_1eclhc7bh8.b[1][0]++, {}) : _ref7$channelData;
          var speak = _ref7$channelData.speak;
          cov_1eclhc7bh8.f[2]++;
          cov_1eclhc7bh8.s[6]++;
          return speak;
        }).length;
      },
      [activities]
    ));
  var handleDictate =
    (cov_1eclhc7bh8.s[7]++,
    (0, _react.useCallback)(
      function(_ref8) {
        var _ref8$result = _ref8.result;
        _ref8$result = _ref8$result === void 0 ? (cov_1eclhc7bh8.b[2][0]++, {}) : _ref8$result;
        var transcript = _ref8$result.transcript;
        cov_1eclhc7bh8.f[3]++;
        cov_1eclhc7bh8.s[8]++;

        if (
          (cov_1eclhc7bh8.b[4][0]++, dictateState === DICTATING) ||
          (cov_1eclhc7bh8.b[4][1]++, dictateState === STARTING)
        ) {
          cov_1eclhc7bh8.b[3][0]++;
          cov_1eclhc7bh8.s[9]++;
          setDictateInterims([]);
          cov_1eclhc7bh8.s[10]++;
          setDictateState(IDLE);
          cov_1eclhc7bh8.s[11]++;
          stopDictate();
          cov_1eclhc7bh8.s[12]++;

          if (transcript) {
            cov_1eclhc7bh8.b[5][0]++;
            cov_1eclhc7bh8.s[13]++;
            setSendBox(transcript);
            cov_1eclhc7bh8.s[14]++;
            submitSendBox('speech');
            cov_1eclhc7bh8.s[15]++;
            startSpeakingActivity();
          } else {
            cov_1eclhc7bh8.b[5][1]++;
          }
        } else {
          cov_1eclhc7bh8.b[3][1]++;
        }
      },
      [dictateState, setDictateInterims, setDictateState, stopDictate, setSendBox, submitSendBox, startSpeakingActivity]
    ));
  var handleDictating =
    (cov_1eclhc7bh8.s[16]++,
    (0, _react.useCallback)(
      function(_ref9) {
        var _ref9$results = _ref9.results,
          results = _ref9$results === void 0 ? (cov_1eclhc7bh8.b[6][0]++, []) : _ref9$results;
        cov_1eclhc7bh8.f[4]++;
        cov_1eclhc7bh8.s[17]++;

        if (
          (cov_1eclhc7bh8.b[8][0]++, dictateState === DICTATING) ||
          (cov_1eclhc7bh8.b[8][1]++, dictateState === STARTING)
        ) {
          cov_1eclhc7bh8.b[7][0]++;
          var interims =
            (cov_1eclhc7bh8.s[18]++,
            results.map(function(_ref10) {
              var transcript = _ref10.transcript;
              cov_1eclhc7bh8.f[5]++;
              cov_1eclhc7bh8.s[19]++;
              return transcript;
            }));
          cov_1eclhc7bh8.s[20]++;
          setDictateInterims(interims);
          cov_1eclhc7bh8.s[21]++;
          setDictateState(DICTATING);
          cov_1eclhc7bh8.s[22]++;
          (cov_1eclhc7bh8.b[9][0]++, sendTypingIndicator) && (cov_1eclhc7bh8.b[9][1]++, emitTypingIndicator());
        } else {
          cov_1eclhc7bh8.b[7][1]++;
        }
      },
      [dictateState, emitTypingIndicator, sendTypingIndicator, setDictateInterims, setDictateState]
    ));
  var handleError =
    (cov_1eclhc7bh8.s[23]++,
    (0, _react.useCallback)(
      function() {
        cov_1eclhc7bh8.f[6]++;
        cov_1eclhc7bh8.s[24]++;
        (cov_1eclhc7bh8.b[10][0]++, dictateState !== IDLE) && (cov_1eclhc7bh8.b[10][1]++, setDictateState(IDLE));
        cov_1eclhc7bh8.s[25]++;
        ((cov_1eclhc7bh8.b[11][0]++, dictateState === DICTATING) ||
          (cov_1eclhc7bh8.b[11][1]++, dictateState === STARTING)) &&
          (cov_1eclhc7bh8.b[11][2]++, stopDictate());
        cov_1eclhc7bh8.s[26]++;
        (cov_1eclhc7bh8.b[12][0]++, onError) && (cov_1eclhc7bh8.b[12][1]++, onError(event));
      },
      [dictateState, onError, setDictateState, stopDictate]
    ));
  cov_1eclhc7bh8.s[27]++;
  return _react.default.createElement(_reactDictateButton.Composer, {
    lang: language,
    onDictate: handleDictate,
    onError: handleError,
    onProgress: handleDictating,
    speechGrammarList: SpeechGrammarList,
    speechRecognition: SpeechRecognition,
    started:
      (cov_1eclhc7bh8.b[13][0]++, !disabled) &&
      ((cov_1eclhc7bh8.b[13][1]++, dictateState === STARTING) ||
        (cov_1eclhc7bh8.b[13][2]++, dictateState === DICTATING)) &&
      (cov_1eclhc7bh8.b[13][3]++, !numSpeakingActivities)
  });
};

cov_1eclhc7bh8.s[28]++;
Dictation.defaultProps = {
  disabled: false,
  onError: undefined,
  webSpeechPonyfill: undefined
};
cov_1eclhc7bh8.s[29]++;
Dictation.propTypes = {
  dictateState: _propTypes.default.number.isRequired,
  disabled: _propTypes.default.bool,
  emitTypingIndicator: _propTypes.default.func.isRequired,
  onError: _propTypes.default.func,
  sendTypingIndicator: _propTypes.default.bool.isRequired,
  setDictateInterims: _propTypes.default.func.isRequired,
  setDictateState: _propTypes.default.func.isRequired,
  setSendBox: _propTypes.default.func.isRequired,
  startSpeakingActivity: _propTypes.default.func.isRequired,
  stopDictate: _propTypes.default.func.isRequired,
  submitSendBox: _propTypes.default.func.isRequired,
  webSpeechPonyfill: _propTypes.default.shape({
    SpeechGrammarList: _propTypes.default.any.isRequired,
    SpeechRecognition: _propTypes.default.any.isRequired
  })
};

var _default = (0, _connectToWebChat.default)(function(_ref11) {
  var dictateState = _ref11.dictateState,
    disabled = _ref11.disabled,
    emitTypingIndicator = _ref11.emitTypingIndicator,
    postActivity = _ref11.postActivity,
    sendTypingIndicator = _ref11.sendTypingIndicator,
    setDictateInterims = _ref11.setDictateInterims,
    setDictateState = _ref11.setDictateState,
    setSendBox = _ref11.setSendBox,
    startSpeakingActivity = _ref11.startSpeakingActivity,
    stopDictate = _ref11.stopDictate,
    submitSendBox = _ref11.submitSendBox,
    webSpeechPonyfill = _ref11.webSpeechPonyfill;
  cov_1eclhc7bh8.f[7]++;
  cov_1eclhc7bh8.s[30]++;
  return {
    dictateState: dictateState,
    disabled: disabled,
    emitTypingIndicator: emitTypingIndicator,
    postActivity: postActivity,
    sendTypingIndicator: sendTypingIndicator,
    setDictateInterims: setDictateInterims,
    setDictateState: setDictateState,
    setSendBox: setSendBox,
    startSpeakingActivity: startSpeakingActivity,
    stopDictate: stopDictate,
    submitSendBox: submitSendBox,
    webSpeechPonyfill: webSpeechPonyfill
  };
})(Dictation);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9EaWN0YXRpb24uanMiXSwibmFtZXMiOlsiQ29uc3RhbnRzIiwiRGljdGF0ZVN0YXRlIiwiRElDVEFUSU5HIiwiSURMRSIsIlNUQVJUSU5HIiwiRGljdGF0aW9uIiwiZGljdGF0ZVN0YXRlIiwiZGlzYWJsZWQiLCJlbWl0VHlwaW5nSW5kaWNhdG9yIiwib25FcnJvciIsInNlbmRUeXBpbmdJbmRpY2F0b3IiLCJzZXREaWN0YXRlSW50ZXJpbXMiLCJzZXREaWN0YXRlU3RhdGUiLCJzZXRTZW5kQm94Iiwic3RhcnRTcGVha2luZ0FjdGl2aXR5Iiwic3RvcERpY3RhdGUiLCJzdWJtaXRTZW5kQm94Iiwid2ViU3BlZWNoUG9ueWZpbGwiLCJTcGVlY2hHcmFtbWFyTGlzdCIsIlNwZWVjaFJlY29nbml0aW9uIiwiYWN0aXZpdGllcyIsImxhbmd1YWdlIiwibnVtU3BlYWtpbmdBY3Rpdml0aWVzIiwiZmlsdGVyIiwic3BlYWsiLCJjaGFubmVsRGF0YSIsImxlbmd0aCIsImhhbmRsZURpY3RhdGUiLCJyZXN1bHQiLCJ0cmFuc2NyaXB0IiwiaGFuZGxlRGljdGF0aW5nIiwicmVzdWx0cyIsImludGVyaW1zIiwibWFwIiwiaGFuZGxlRXJyb3IiLCJldmVudCIsImRlZmF1bHRQcm9wcyIsInVuZGVmaW5lZCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsIm51bWJlciIsImlzUmVxdWlyZWQiLCJib29sIiwiZnVuYyIsInNoYXBlIiwiYW55IiwicG9zdEFjdGl2aXR5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUVBOztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7O21DQUlJ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TEMsUUFXSyxVQVhMQSxRQVdLO0FBQUEsTUFWTEMsbUJBVUssVUFWTEEsbUJBVUs7QUFBQSxNQVRMc0MsWUFTSyxVQVRMQSxZQVNLO0FBQUEsTUFSTHBDLG1CQVFLLFVBUkxBLG1CQVFLO0FBQUEsTUFQTEMsa0JBT0ssVUFQTEEsa0JBT0s7QUFBQSxNQU5MQyxlQU1LLFVBTkxBLGVBTUs7QUFBQSxNQUxMQyxVQUtLLFVBTExBLFVBS0s7QUFBQSxNQUpMQyxxQkFJSyxVQUpMQSxxQkFJSztBQUFBLE1BSExDLFdBR0ssVUFITEEsV0FHSztBQUFBLE1BRkxDLGFBRUssVUFGTEEsYUFFSztBQUFBLE1BRExDLGlCQUNLLFVBRExBLGlCQUNLO0FBQUE7QUFBQTtBQUFBO0FBQ0xYLElBQUFBLFlBQVksRUFBWkEsWUFESztBQUVMQyxJQUFBQSxRQUFRLEVBQVJBLFFBRks7QUFHTEMsSUFBQUEsbUJBQW1CLEVBQW5CQSxtQkFISztBQUlMc0MsSUFBQUEsWUFBWSxFQUFaQSxZQUpLO0FBS0xwQyxJQUFBQSxtQkFBbUIsRUFBbkJBLG1CQUxLO0FBTUxDLElBQUFBLGtCQUFrQixFQUFsQkEsa0JBTks7QUFPTEMsSUFBQUEsZUFBZSxFQUFmQSxlQVBLO0FBUUxDLElBQUFBLFVBQVUsRUFBVkEsVUFSSztBQVNMQyxJQUFBQSxxQkFBcUIsRUFBckJBLHFCQVRLO0FBVUxDLElBQUFBLFdBQVcsRUFBWEEsV0FWSztBQVdMQyxJQUFBQSxhQUFhLEVBQWJBLGFBWEs7QUFZTEMsSUFBQUEsaUJBQWlCLEVBQWpCQTtBQVpLO0FBYU4sQ0EzQlksRUE0QmJaLFNBNUJhLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb3NlciBhcyBEaWN0YXRlQ29tcG9zZXIgfSBmcm9tICdyZWFjdC1kaWN0YXRlLWJ1dHRvbic7XG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tICdib3RmcmFtZXdvcmstd2ViY2hhdC1jb3JlJztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCBjb25uZWN0VG9XZWJDaGF0IGZyb20gJy4vY29ubmVjdFRvV2ViQ2hhdCc7XG5cbmltcG9ydCB1c2VBY3Rpdml0aWVzIGZyb20gJy4vaG9va3MvdXNlQWN0aXZpdGllcyc7XG5pbXBvcnQgdXNlTGFuZ3VhZ2UgZnJvbSAnLi9ob29rcy91c2VMYW5ndWFnZSc7XG5cbmNvbnN0IHtcbiAgRGljdGF0ZVN0YXRlOiB7IERJQ1RBVElORywgSURMRSwgU1RBUlRJTkcgfVxufSA9IENvbnN0YW50cztcblxuY29uc3QgRGljdGF0aW9uID0gKHtcbiAgZGljdGF0ZVN0YXRlLFxuICBkaXNhYmxlZCxcbiAgZW1pdFR5cGluZ0luZGljYXRvcixcbiAgb25FcnJvcixcbiAgc2VuZFR5cGluZ0luZGljYXRvcixcbiAgc2V0RGljdGF0ZUludGVyaW1zLFxuICBzZXREaWN0YXRlU3RhdGUsXG4gIHNldFNlbmRCb3gsXG4gIHN0YXJ0U3BlYWtpbmdBY3Rpdml0eSxcbiAgc3RvcERpY3RhdGUsXG4gIHN1Ym1pdFNlbmRCb3gsXG4gIHdlYlNwZWVjaFBvbnlmaWxsOiB7IFNwZWVjaEdyYW1tYXJMaXN0LCBTcGVlY2hSZWNvZ25pdGlvbiB9ID0ge31cbn0pID0+IHtcbiAgY29uc3QgW2FjdGl2aXRpZXNdID0gdXNlQWN0aXZpdGllcygpO1xuICBjb25zdCBbbGFuZ3VhZ2VdID0gdXNlTGFuZ3VhZ2UoKTtcblxuICBjb25zdCBudW1TcGVha2luZ0FjdGl2aXRpZXMgPSB1c2VNZW1vKCgpID0+IGFjdGl2aXRpZXMuZmlsdGVyKCh7IGNoYW5uZWxEYXRhOiB7IHNwZWFrIH0gPSB7fSB9KSA9PiBzcGVhaykubGVuZ3RoLCBbXG4gICAgYWN0aXZpdGllc1xuICBdKTtcblxuICBjb25zdCBoYW5kbGVEaWN0YXRlID0gdXNlQ2FsbGJhY2soXG4gICAgKHsgcmVzdWx0OiB7IHRyYW5zY3JpcHQgfSA9IHt9IH0pID0+IHtcbiAgICAgIGlmIChkaWN0YXRlU3RhdGUgPT09IERJQ1RBVElORyB8fCBkaWN0YXRlU3RhdGUgPT09IFNUQVJUSU5HKSB7XG4gICAgICAgIHNldERpY3RhdGVJbnRlcmltcyhbXSk7XG4gICAgICAgIHNldERpY3RhdGVTdGF0ZShJRExFKTtcbiAgICAgICAgc3RvcERpY3RhdGUoKTtcblxuICAgICAgICBpZiAodHJhbnNjcmlwdCkge1xuICAgICAgICAgIHNldFNlbmRCb3godHJhbnNjcmlwdCk7XG4gICAgICAgICAgc3VibWl0U2VuZEJveCgnc3BlZWNoJyk7XG4gICAgICAgICAgc3RhcnRTcGVha2luZ0FjdGl2aXR5KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIFtkaWN0YXRlU3RhdGUsIHNldERpY3RhdGVJbnRlcmltcywgc2V0RGljdGF0ZVN0YXRlLCBzdG9wRGljdGF0ZSwgc2V0U2VuZEJveCwgc3VibWl0U2VuZEJveCwgc3RhcnRTcGVha2luZ0FjdGl2aXR5XVxuICApO1xuXG4gIGNvbnN0IGhhbmRsZURpY3RhdGluZyA9IHVzZUNhbGxiYWNrKFxuICAgICh7IHJlc3VsdHMgPSBbXSB9KSA9PiB7XG4gICAgICBpZiAoZGljdGF0ZVN0YXRlID09PSBESUNUQVRJTkcgfHwgZGljdGF0ZVN0YXRlID09PSBTVEFSVElORykge1xuICAgICAgICBjb25zdCBpbnRlcmltcyA9IHJlc3VsdHMubWFwKCh7IHRyYW5zY3JpcHQgfSkgPT4gdHJhbnNjcmlwdCk7XG5cbiAgICAgICAgc2V0RGljdGF0ZUludGVyaW1zKGludGVyaW1zKTtcbiAgICAgICAgc2V0RGljdGF0ZVN0YXRlKERJQ1RBVElORyk7XG4gICAgICAgIHNlbmRUeXBpbmdJbmRpY2F0b3IgJiYgZW1pdFR5cGluZ0luZGljYXRvcigpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2RpY3RhdGVTdGF0ZSwgZW1pdFR5cGluZ0luZGljYXRvciwgc2VuZFR5cGluZ0luZGljYXRvciwgc2V0RGljdGF0ZUludGVyaW1zLCBzZXREaWN0YXRlU3RhdGVdXG4gICk7XG5cbiAgY29uc3QgaGFuZGxlRXJyb3IgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZGljdGF0ZVN0YXRlICE9PSBJRExFICYmIHNldERpY3RhdGVTdGF0ZShJRExFKTtcbiAgICAoZGljdGF0ZVN0YXRlID09PSBESUNUQVRJTkcgfHwgZGljdGF0ZVN0YXRlID09PSBTVEFSVElORykgJiYgc3RvcERpY3RhdGUoKTtcblxuICAgIG9uRXJyb3IgJiYgb25FcnJvcihldmVudCk7XG4gIH0sIFtkaWN0YXRlU3RhdGUsIG9uRXJyb3IsIHNldERpY3RhdGVTdGF0ZSwgc3RvcERpY3RhdGVdKTtcblxuICByZXR1cm4gKFxuICAgIDxEaWN0YXRlQ29tcG9zZXJcbiAgICAgIGxhbmc9e2xhbmd1YWdlfVxuICAgICAgb25EaWN0YXRlPXtoYW5kbGVEaWN0YXRlfVxuICAgICAgb25FcnJvcj17aGFuZGxlRXJyb3J9XG4gICAgICBvblByb2dyZXNzPXtoYW5kbGVEaWN0YXRpbmd9XG4gICAgICBzcGVlY2hHcmFtbWFyTGlzdD17U3BlZWNoR3JhbW1hckxpc3R9XG4gICAgICBzcGVlY2hSZWNvZ25pdGlvbj17U3BlZWNoUmVjb2duaXRpb259XG4gICAgICBzdGFydGVkPXshZGlzYWJsZWQgJiYgKGRpY3RhdGVTdGF0ZSA9PT0gU1RBUlRJTkcgfHwgZGljdGF0ZVN0YXRlID09PSBESUNUQVRJTkcpICYmICFudW1TcGVha2luZ0FjdGl2aXRpZXN9XG4gICAgLz5cbiAgKTtcbn07XG5cbkRpY3RhdGlvbi5kZWZhdWx0UHJvcHMgPSB7XG4gIGRpc2FibGVkOiBmYWxzZSxcbiAgb25FcnJvcjogdW5kZWZpbmVkLFxuICB3ZWJTcGVlY2hQb255ZmlsbDogdW5kZWZpbmVkXG59O1xuXG5EaWN0YXRpb24ucHJvcFR5cGVzID0ge1xuICBkaWN0YXRlU3RhdGU6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuICBlbWl0VHlwaW5nSW5kaWNhdG9yOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBvbkVycm9yOiBQcm9wVHlwZXMuZnVuYyxcbiAgc2VuZFR5cGluZ0luZGljYXRvcjogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgc2V0RGljdGF0ZUludGVyaW1zOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBzZXREaWN0YXRlU3RhdGU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIHNldFNlbmRCb3g6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIHN0YXJ0U3BlYWtpbmdBY3Rpdml0eTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgc3RvcERpY3RhdGU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIHN1Ym1pdFNlbmRCb3g6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIHdlYlNwZWVjaFBvbnlmaWxsOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIFNwZWVjaEdyYW1tYXJMaXN0OiBQcm9wVHlwZXMuYW55LmlzUmVxdWlyZWQsXG4gICAgU3BlZWNoUmVjb2duaXRpb246IFByb3BUeXBlcy5hbnkuaXNSZXF1aXJlZFxuICB9KVxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdFRvV2ViQ2hhdChcbiAgKHtcbiAgICBkaWN0YXRlU3RhdGUsXG4gICAgZGlzYWJsZWQsXG4gICAgZW1pdFR5cGluZ0luZGljYXRvcixcbiAgICBwb3N0QWN0aXZpdHksXG4gICAgc2VuZFR5cGluZ0luZGljYXRvcixcbiAgICBzZXREaWN0YXRlSW50ZXJpbXMsXG4gICAgc2V0RGljdGF0ZVN0YXRlLFxuICAgIHNldFNlbmRCb3gsXG4gICAgc3RhcnRTcGVha2luZ0FjdGl2aXR5LFxuICAgIHN0b3BEaWN0YXRlLFxuICAgIHN1Ym1pdFNlbmRCb3gsXG4gICAgd2ViU3BlZWNoUG9ueWZpbGxcbiAgfSkgPT4gKHtcbiAgICBkaWN0YXRlU3RhdGUsXG4gICAgZGlzYWJsZWQsXG4gICAgZW1pdFR5cGluZ0luZGljYXRvcixcbiAgICBwb3N0QWN0aXZpdHksXG4gICAgc2VuZFR5cGluZ0luZGljYXRvcixcbiAgICBzZXREaWN0YXRlSW50ZXJpbXMsXG4gICAgc2V0RGljdGF0ZVN0YXRlLFxuICAgIHNldFNlbmRCb3gsXG4gICAgc3RhcnRTcGVha2luZ0FjdGl2aXR5LFxuICAgIHN0b3BEaWN0YXRlLFxuICAgIHN1Ym1pdFNlbmRCb3gsXG4gICAgd2ViU3BlZWNoUG9ueWZpbGxcbiAgfSlcbikoRGljdGF0aW9uKTtcbiJdfQ==
