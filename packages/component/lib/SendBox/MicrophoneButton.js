'use strict';

var cov_1p9fawf1uf = (function() {
  var path = '/home/guy/leo/BotFramework-WebChat/packages/component/src/SendBox/MicrophoneButton.js';
  var hash = 'ea61b28e0bc52eeabac43c585030e3549569f3b4';
  var global = new Function('return this')();
  var gcv = '__coverage__';
  var coverageData = {
    path: '/home/guy/leo/BotFramework-WebChat/packages/component/src/SendBox/MicrophoneButton.js',
    statementMap: {
      '0': {
        start: {
          line: 17,
          column: 25
        },
        end: {
          line: 17,
          column: 34
        }
      },
      '1': {
        start: {
          line: 19,
          column: 17
        },
        end: {
          line: 35,
          column: 2
        }
      },
      '2': {
        start: {
          line: 37,
          column: 32
        },
        end: {
          line: 78,
          column: 1
        }
      },
      '3': {
        start: {
          line: 38,
          column: 31
        },
        end: {
          line: 45,
          column: 4
        }
      },
      '4': {
        start: {
          line: 39,
          column: 4
        },
        end: {
          line: 44,
          column: 5
        }
      },
      '5': {
        start: {
          line: 40,
          column: 24
        },
        end: {
          line: 40,
          column: 56
        }
      },
      '6': {
        start: {
          line: 42,
          column: 6
        },
        end: {
          line: 42,
          column: 54
        }
      },
      '7': {
        start: {
          line: 43,
          column: 6
        },
        end: {
          line: 43,
          column: 39
        }
      },
      '8': {
        start: {
          line: 47,
          column: 2
        },
        end: {
          line: 77,
          column: 4
        }
      },
      '9': {
        start: {
          line: 58,
          column: 11
        },
        end: {
          line: 75,
          column: 5
        }
      },
      '10': {
        start: {
          line: 60,
          column: 8
        },
        end: {
          line: 68,
          column: 9
        }
      },
      '11': {
        start: {
          line: 61,
          column: 10
        },
        end: {
          line: 61,
          column: 33
        }
      },
      '12': {
        start: {
          line: 62,
          column: 15
        },
        end: {
          line: 68,
          column: 9
        }
      },
      '13': {
        start: {
          line: 63,
          column: 10
        },
        end: {
          line: 63,
          column: 24
        }
      },
      '14': {
        start: {
          line: 64,
          column: 10
        },
        end: {
          line: 64,
          column: 48
        }
      },
      '15': {
        start: {
          line: 66,
          column: 10
        },
        end: {
          line: 66,
          column: 33
        }
      },
      '16': {
        start: {
          line: 67,
          column: 10
        },
        end: {
          line: 67,
          column: 25
        }
      },
      '17': {
        start: {
          line: 70,
          column: 8
        },
        end: {
          line: 70,
          column: 72
        }
      },
      '18': {
        start: {
          line: 80,
          column: 25
        },
        end: {
          line: 98,
          column: 1
        }
      },
      '19': {
        start: {
          line: 81,
          column: 59
        },
        end: {
          line: 81,
          column: 72
        }
      },
      '20': {
        start: {
          line: 82,
          column: 28
        },
        end: {
          line: 82,
          column: 48
        }
      },
      '21': {
        start: {
          line: 83,
          column: 27
        },
        end: {
          line: 83,
          column: 86
        }
      },
      '22': {
        start: {
          line: 85,
          column: 2
        },
        end: {
          line: 97,
          column: 4
        }
      },
      '23': {
        start: {
          line: 100,
          column: 0
        },
        end: {
          line: 104,
          column: 2
        }
      },
      '24': {
        start: {
          line: 106,
          column: 0
        },
        end: {
          line: 111,
          column: 2
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 37,
            column: 32
          },
          end: {
            line: 37,
            column: 33
          }
        },
        loc: {
          start: {
            line: 37,
            column: 50
          },
          end: {
            line: 78,
            column: 1
          }
        },
        line: 37
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 38,
            column: 39
          },
          end: {
            line: 38,
            column: 40
          }
        },
        loc: {
          start: {
            line: 38,
            column: 86
          },
          end: {
            line: 45,
            column: 3
          }
        },
        line: 38
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 48,
            column: 4
          },
          end: {
            line: 48,
            column: 5
          }
        },
        loc: {
          start: {
            line: 58,
            column: 11
          },
          end: {
            line: 75,
            column: 5
          }
        },
        line: 58
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 59,
            column: 13
          },
          end: {
            line: 59,
            column: 14
          }
        },
        loc: {
          start: {
            line: 59,
            column: 19
          },
          end: {
            line: 71,
            column: 7
          }
        },
        line: 59
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 80,
            column: 25
          },
          end: {
            line: 80,
            column: 26
          }
        },
        loc: {
          start: {
            line: 80,
            column: 72
          },
          end: {
            line: 98,
            column: 1
          }
        },
        line: 80
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 39,
            column: 4
          },
          end: {
            line: 44,
            column: 5
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 39,
              column: 4
            },
            end: {
              line: 44,
              column: 5
            }
          },
          {
            start: {
              line: 39,
              column: 4
            },
            end: {
              line: 44,
              column: 5
            }
          }
        ],
        line: 39
      },
      '1': {
        loc: {
          start: {
            line: 39,
            column: 8
          },
          end: {
            line: 39,
            column: 51
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 39,
              column: 8
            },
            end: {
              line: 39,
              column: 23
            }
          },
          {
            start: {
              line: 39,
              column: 27
            },
            end: {
              line: 39,
              column: 51
            }
          }
        ],
        line: 39
      },
      '2': {
        loc: {
          start: {
            line: 57,
            column: 25
          },
          end: {
            line: 57,
            column: 75
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 57,
              column: 73
            },
            end: {
              line: 57,
              column: 75
            }
          }
        ],
        line: 57
      },
      '3': {
        loc: {
          start: {
            line: 60,
            column: 8
          },
          end: {
            line: 68,
            column: 9
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 60,
              column: 8
            },
            end: {
              line: 68,
              column: 9
            }
          },
          {
            start: {
              line: 60,
              column: 8
            },
            end: {
              line: 68,
              column: 9
            }
          }
        ],
        line: 60
      },
      '4': {
        loc: {
          start: {
            line: 62,
            column: 15
          },
          end: {
            line: 68,
            column: 9
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 62,
              column: 15
            },
            end: {
              line: 68,
              column: 9
            }
          },
          {
            start: {
              line: 62,
              column: 15
            },
            end: {
              line: 68,
              column: 9
            }
          }
        ],
        line: 62
      },
      '5': {
        loc: {
          start: {
            line: 73,
            column: 16
          },
          end: {
            line: 73,
            column: 110
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 73,
              column: 16
            },
            end: {
              line: 73,
              column: 24
            }
          },
          {
            start: {
              line: 73,
              column: 29
            },
            end: {
              line: 73,
              column: 67
            }
          },
          {
            start: {
              line: 73,
              column: 71
            },
            end: {
              line: 73,
              column: 109
            }
          }
        ],
        line: 73
      },
      '6': {
        loc: {
          start: {
            line: 83,
            column: 39
          },
          end: {
            line: 83,
            column: 85
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 83,
              column: 51
            },
            end: {
              line: 83,
              column: 66
            }
          },
          {
            start: {
              line: 83,
              column: 69
            },
            end: {
              line: 83,
              column: 85
            }
          }
        ],
        line: 83
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0, 0],
      '6': [0, 0]
    },
    _coverageSchema: '43e27e138ebf9cfc5966b082cf9a028302ed4184',
    hash: 'ea61b28e0bc52eeabac43c585030e3549569f3b4'
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  return (coverage[path] = coverageData);
})();

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.connectMicrophoneButton = exports.default = void 0;

var _botframeworkWebchatCore = require('botframework-webchat-core');

var _glamor = require('glamor');

var _classnames = _interopRequireDefault(require('classnames'));

var _memoizeOne = _interopRequireDefault(require('memoize-one'));

var _propTypes = _interopRequireDefault(require('prop-types'));

var _react = _interopRequireDefault(require('react'));

var _connectToWebChat = _interopRequireDefault(require('../connectToWebChat'));

var _IconButton = _interopRequireDefault(require('./IconButton'));

var _MicrophoneIcon = _interopRequireDefault(require('./Assets/MicrophoneIcon'));

var _useLocalize = _interopRequireDefault(require('../hooks/useLocalize'));

var _useStyleSet = _interopRequireDefault(require('../hooks/useStyleSet'));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();
}

function _nonIterableRest() {
  throw new TypeError('Invalid attempt to destructure non-iterable instance');
}

function _iterableToArrayLimit(arr, i) {
  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === '[object Arguments]')) {
    return;
  }
  var _arr = [];
  var _n = true;
  var _d = false;
  var _e = undefined;
  try {
    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);
      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i['return'] != null) _i['return']();
    } finally {
      if (_d) throw _e;
    }
  }
  return _arr;
}

function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}

var _ref = (cov_1p9fawf1uf.s[0]++, _botframeworkWebchatCore.Constants),
  DictateState = _ref.DictateState;

var ROOT_CSS =
  (cov_1p9fawf1uf.s[1]++,
  (0, _glamor.css)({
    display: 'flex',
    height: '100%',
    // .sr-only - This component is intended to be invisible to the visual Web Chat user, but read by the AT when using a screen reader
    '& > .sr-only': {
      color: 'transparent',
      height: 1,
      left: -10000,
      overflow: 'hidden',
      position: 'absolute',
      top: 0,
      whiteSpace: 'nowrap',
      width: 1
    }
  }));
cov_1p9fawf1uf.s[2]++;

var connectMicrophoneButton = function connectMicrophoneButton() {
  cov_1p9fawf1uf.f[0]++;
  var primeSpeechSynthesis =
    (cov_1p9fawf1uf.s[3]++,
    (0, _memoizeOne.default)(function(speechSynthesis, SpeechSynthesisUtterance) {
      cov_1p9fawf1uf.f[1]++;
      cov_1p9fawf1uf.s[4]++;

      if ((cov_1p9fawf1uf.b[1][0]++, speechSynthesis) && (cov_1p9fawf1uf.b[1][1]++, SpeechSynthesisUtterance)) {
        cov_1p9fawf1uf.b[0][0]++;
        var utterance = (cov_1p9fawf1uf.s[5]++, new SpeechSynthesisUtterance(''));
        cov_1p9fawf1uf.s[6]++;

        var _speechSynthesis$getV = speechSynthesis.getVoices();

        var _speechSynthesis$getV2 = _slicedToArray(_speechSynthesis$getV, 1);

        utterance.voice = _speechSynthesis$getV2[0];
        cov_1p9fawf1uf.s[7]++;
        speechSynthesis.speak(utterance);
      } else {
        cov_1p9fawf1uf.b[0][1]++;
      }
    }));
  cov_1p9fawf1uf.s[8]++;

  for (var _len = arguments.length, selectors = new Array(_len), _key = 0; _key < _len; _key++) {
    selectors[_key] = arguments[_key];
  }

  return _connectToWebChat.default.apply(
    void 0,
    [
      function(_ref2) {
        var disabled = _ref2.disabled,
          dictateInterims = _ref2.dictateInterims,
          dictateState = _ref2.dictateState,
          language = _ref2.language,
          setSendBox = _ref2.setSendBox,
          startDictate = _ref2.startDictate,
          stopDictate = _ref2.stopDictate,
          stopSpeakingActivity = _ref2.stopSpeakingActivity,
          _ref2$webSpeechPonyfi = _ref2.webSpeechPonyfill;
        _ref2$webSpeechPonyfi =
          _ref2$webSpeechPonyfi === void 0 ? (cov_1p9fawf1uf.b[2][0]++, {}) : _ref2$webSpeechPonyfi;
        var speechSynthesis = _ref2$webSpeechPonyfi.speechSynthesis,
          SpeechSynthesisUtterance = _ref2$webSpeechPonyfi.SpeechSynthesisUtterance;
        cov_1p9fawf1uf.f[2]++;
        cov_1p9fawf1uf.s[9]++;
        return {
          click: function click() {
            cov_1p9fawf1uf.f[3]++;
            cov_1p9fawf1uf.s[10]++;

            if (dictateState === DictateState.WILL_START) {
              cov_1p9fawf1uf.b[3][0]++;
              cov_1p9fawf1uf.s[11]++;
              stopSpeakingActivity();
            } else {
              cov_1p9fawf1uf.b[3][1]++;
              cov_1p9fawf1uf.s[12]++;

              if (dictateState === DictateState.DICTATING) {
                cov_1p9fawf1uf.b[4][0]++;
                cov_1p9fawf1uf.s[13]++;
                stopDictate();
                cov_1p9fawf1uf.s[14]++;
                setSendBox(dictateInterims.join(' '));
              } else {
                cov_1p9fawf1uf.b[4][1]++;
                cov_1p9fawf1uf.s[15]++;
                stopSpeakingActivity();
                cov_1p9fawf1uf.s[16]++;
                startDictate();
              }
            }

            cov_1p9fawf1uf.s[17]++;
            primeSpeechSynthesis(speechSynthesis, SpeechSynthesisUtterance);
          },
          dictating: dictateState === DictateState.DICTATING,
          disabled:
            (cov_1p9fawf1uf.b[5][0]++, disabled) ||
            ((cov_1p9fawf1uf.b[5][1]++, dictateState === DictateState.STARTING) &&
              (cov_1p9fawf1uf.b[5][2]++, dictateState === DictateState.STOPPING)),
          language: language
        };
      }
    ].concat(selectors)
  );
};

exports.connectMicrophoneButton = connectMicrophoneButton;
cov_1p9fawf1uf.s[18]++;

var MicrophoneButton = function MicrophoneButton(_ref3) {
  var className = _ref3.className,
    click = _ref3.click,
    dictating = _ref3.dictating,
    disabled = _ref3.disabled;
  cov_1p9fawf1uf.f[4]++;

  var _ref4 = (cov_1p9fawf1uf.s[19]++, (0, _useStyleSet.default)()),
    _ref5 = _slicedToArray(_ref4, 1),
    microphoneButtonStyleSet = _ref5[0].microphoneButton;

  var iconButtonAltText = (cov_1p9fawf1uf.s[20]++, (0, _useLocalize.default)('Speak'));
  var screenReaderText =
    (cov_1p9fawf1uf.s[21]++,
    (0, _useLocalize.default)(
      dictating ? (cov_1p9fawf1uf.b[6][0]++, 'Microphone on') : (cov_1p9fawf1uf.b[6][1]++, 'Microphone off')
    ));
  cov_1p9fawf1uf.s[22]++;
  return _react.default.createElement(
    'div',
    {
      'aria-controls': 'webchatSendBoxMicrophoneButton',
      className: (0, _classnames.default)(microphoneButtonStyleSet + '', ROOT_CSS + '', className + '', {
        dictating: dictating
      })
    },
    _react.default.createElement(
      _IconButton.default,
      {
        alt: iconButtonAltText,
        disabled: disabled,
        onClick: click
      },
      _react.default.createElement(_MicrophoneIcon.default, null)
    ),
    _react.default.createElement(
      'div',
      {
        'aria-live': 'polite',
        className: 'sr-only',
        id: 'webchatSendBoxMicrophoneButton',
        role: 'status'
      },
      screenReaderText
    )
  );
};

cov_1p9fawf1uf.s[23]++;
MicrophoneButton.defaultProps = {
  className: '',
  dictating: false,
  disabled: false
};
cov_1p9fawf1uf.s[24]++;
MicrophoneButton.propTypes = {
  className: _propTypes.default.string,
  click: _propTypes.default.func.isRequired,
  dictating: _propTypes.default.bool,
  disabled: _propTypes.default.bool
};

var _default = connectMicrophoneButton()(MicrophoneButton);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9TZW5kQm94L01pY3JvcGhvbmVCdXR0b24uanMiXSwibmFtZXMiOlsiQ29uc3RhbnRzIiwiRGljdGF0ZVN0YXRlIiwiUk9PVF9DU1MiLCJkaXNwbGF5IiwiaGVpZ2h0IiwiY29sb3IiLCJsZWZ0Iiwib3ZlcmZsb3ciLCJwb3NpdGlvbiIsInRvcCIsIndoaXRlU3BhY2UiLCJ3aWR0aCIsImNvbm5lY3RNaWNyb3Bob25lQnV0dG9uIiwicHJpbWVTcGVlY2hTeW50aGVzaXMiLCJzcGVlY2hTeW50aGVzaXMiLCJTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UiLCJ1dHRlcmFuY2UiLCJnZXRWb2ljZXMiLCJ2b2ljZSIsInNwZWFrIiwic2VsZWN0b3JzIiwiY29ubmVjdFRvV2ViQ2hhdCIsImRpc2FibGVkIiwiZGljdGF0ZUludGVyaW1zIiwiZGljdGF0ZVN0YXRlIiwibGFuZ3VhZ2UiLCJzZXRTZW5kQm94Iiwic3RhcnREaWN0YXRlIiwic3RvcERpY3RhdGUiLCJzdG9wU3BlYWtpbmdBY3Rpdml0eSIsIndlYlNwZWVjaFBvbnlmaWxsIiwiY2xpY2siLCJXSUxMX1NUQVJUIiwiRElDVEFUSU5HIiwiam9pbiIsImRpY3RhdGluZyIsIlNUQVJUSU5HIiwiU1RPUFBJTkciLCJNaWNyb3Bob25lQnV0dG9uIiwiY2xhc3NOYW1lIiwibWljcm9waG9uZUJ1dHRvblN0eWxlU2V0IiwibWljcm9waG9uZUJ1dHRvbiIsImljb25CdXR0b25BbHRUZXh0Iiwic2NyZWVuUmVhZGVyVGV4dCIsImRlZmF1bHRQcm9wcyIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsInN0cmluZyIsImZ1bmMiLCJpc1JlcXVpcmVkIiwiYm9vbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7Ozs7Ozs7bUNBRXlCQSxrQztJQUFqQkMsWSxRQUFBQSxZOztBQUVSLElBQU1DLFFBQVEsMkJBQUcsaUJBQUk7QUFDbkJDLEVBQUFBLE9BQU8sRUFBRSxNQURVO0FBRW5CQyxFQUFBQSxNQUFNLEVBQUUsTUFGVztBQUluQjtBQUVBLGtCQUFnQjtBQUNkQyxJQUFBQSxLQUFLLEVBQUUsYUFETztBQUVkRCxJQUFBQSxNQUFNLEVBQUUsQ0FGTTtBQUdkRSxJQUFBQSxJQUFJLEVBQUUsQ0FBQyxLQUhPO0FBSWRDLElBQUFBLFFBQVEsRUFBRSxRQUpJO0FBS2RDLElBQUFBLFFBQVEsRUFBRSxVQUxJO0FBTWRDLElBQUFBLEdBQUcsRUFBRSxDQU5TO0FBT2RDLElBQUFBLFVBQVUsRUFBRSxRQVBFO0FBUWRDLElBQUFBLEtBQUssRUFBRTtBQVJPO0FBTkcsQ0FBSixDQUFILENBQWQ7OztBQWtCQSxJQUFNQyx1QkFBdUIsR0FBRyxTQUExQkEsdUJBQTBCLEdBQWtCO0FBQUE7QUFDaEQsTUFBTUMsb0JBQW9CLDJCQUFHLHlCQUFRLFVBQUNDLGVBQUQsRUFBa0JDLHdCQUFsQixFQUErQztBQUFBO0FBQUE7O0FBQ2xGLFFBQUksMkJBQUFELGVBQWUsZ0NBQUlDLHdCQUFKLENBQW5CLEVBQWlEO0FBQUE7QUFDL0MsVUFBTUMsU0FBUywyQkFBRyxJQUFJRCx3QkFBSixDQUE2QixFQUE3QixDQUFILENBQWY7QUFEK0M7O0FBQUEsa0NBRzNCRCxlQUFlLENBQUNHLFNBQWhCLEVBSDJCOztBQUFBOztBQUc5Q0QsTUFBQUEsU0FBUyxDQUFDRSxLQUhvQztBQUFBO0FBSS9DSixNQUFBQSxlQUFlLENBQUNLLEtBQWhCLENBQXNCSCxTQUF0QjtBQUNELEtBTEQ7QUFBQTtBQUFBO0FBTUQsR0FQNEIsQ0FBSCxDQUExQjtBQURnRDs7QUFBQSxvQ0FBZEksU0FBYztBQUFkQSxJQUFBQSxTQUFjO0FBQUE7O0FBVWhELFNBQU9DLHlDQUNMLGlCQVVPO0FBQUEsUUFUTEMsUUFTSyxTQVRMQSxRQVNLO0FBQUEsUUFSTEMsZUFRSyxTQVJMQSxlQVFLO0FBQUEsUUFQTEMsWUFPSyxTQVBMQSxZQU9LO0FBQUEsUUFOTEMsUUFNSyxTQU5MQSxRQU1LO0FBQUEsUUFMTEMsVUFLSyxTQUxMQSxVQUtLO0FBQUEsUUFKTEMsWUFJSyxTQUpMQSxZQUlLO0FBQUEsUUFITEMsV0FHSyxTQUhMQSxXQUdLO0FBQUEsUUFGTEMsb0JBRUssU0FGTEEsb0JBRUs7QUFBQSxzQ0FETEMsaUJBQ0s7QUFBQSwwRkFEOEQsRUFDOUQ7QUFBQSxRQURnQmhCLGVBQ2hCLHlCQURnQkEsZUFDaEI7QUFBQSxRQURpQ0Msd0JBQ2pDLHlCQURpQ0Esd0JBQ2pDO0FBQUE7QUFBQTtBQUFBO0FBQ0xnQixNQUFBQSxLQUFLLEVBQUUsaUJBQU07QUFBQTtBQUFBOztBQUNYLFlBQUlQLFlBQVksS0FBS3ZCLFlBQVksQ0FBQytCLFVBQWxDLEVBQThDO0FBQUE7QUFBQTtBQUM1Q0gsVUFBQUEsb0JBQW9CO0FBQ3JCLFNBRkQsTUFFTztBQUFBO0FBQUE7O0FBQUEsY0FBSUwsWUFBWSxLQUFLdkIsWUFBWSxDQUFDZ0MsU0FBbEMsRUFBNkM7QUFBQTtBQUFBO0FBQ2xETCxZQUFBQSxXQUFXO0FBRHVDO0FBRWxERixZQUFBQSxVQUFVLENBQUNILGVBQWUsQ0FBQ1csSUFBaEIsQ0FBcUIsR0FBckIsQ0FBRCxDQUFWO0FBQ0QsV0FITSxNQUdBO0FBQUE7QUFBQTtBQUNMTCxZQUFBQSxvQkFBb0I7QUFEZjtBQUVMRixZQUFBQSxZQUFZO0FBQ2I7QUFBQTs7QUFUVTtBQVdYZCxRQUFBQSxvQkFBb0IsQ0FBQ0MsZUFBRCxFQUFrQkMsd0JBQWxCLENBQXBCO0FBQ0QsT0FiSTtBQWNMb0IsTUFBQUEsU0FBUyxFQUFFWCxZQUFZLEtBQUt2QixZQUFZLENBQUNnQyxTQWRwQztBQWVMWCxNQUFBQSxRQUFRLEVBQUUsMkJBQUFBLFFBQVEsS0FBSywyQkFBQUUsWUFBWSxLQUFLdkIsWUFBWSxDQUFDbUMsUUFBOUIsZ0NBQTBDWixZQUFZLEtBQUt2QixZQUFZLENBQUNvQyxRQUF4RSxDQWZsQjtBQWdCTFosTUFBQUEsUUFBUSxFQUFSQTtBQWhCSztBQWlCTixHQTVCSSxTQTZCRkwsU0E3QkUsRUFBUDtBQStCRCxDQXpDRDs7Ozs7QUEyQ0EsSUFBTWtCLGdCQUFnQixHQUFHLFNBQW5CQSxnQkFBbUIsUUFBK0M7QUFBQSxNQUE1Q0MsU0FBNEMsU0FBNUNBLFNBQTRDO0FBQUEsTUFBakNSLEtBQWlDLFNBQWpDQSxLQUFpQztBQUFBLE1BQTFCSSxTQUEwQixTQUExQkEsU0FBMEI7QUFBQSxNQUFmYixRQUFlLFNBQWZBLFFBQWU7QUFBQTs7QUFBQSx1Q0FDYiwyQkFEYTtBQUFBO0FBQUEsTUFDM0NrQix3QkFEMkMsWUFDN0RDLGdCQUQ2RDs7QUFFdEUsTUFBTUMsaUJBQWlCLDRCQUFHLDBCQUFZLE9BQVosQ0FBSCxDQUF2QjtBQUNBLE1BQU1DLGdCQUFnQiw0QkFBRywwQkFBWVIsU0FBUyw4QkFBRyxlQUFILCtCQUFxQixnQkFBckIsQ0FBckIsQ0FBSCxDQUF0QjtBQUhzRTtBQUt0RSxTQUNFO0FBQ0UscUJBQWMsZ0NBRGhCO0FBRUUsSUFBQSxTQUFTLEVBQUUseUJBQVdLLHdCQUF3QixHQUFHLEVBQXRDLEVBQTBDdEMsUUFBUSxHQUFHLEVBQXJELEVBQXlEcUMsU0FBUyxHQUFHLEVBQXJFLEVBQXlFO0FBQUVKLE1BQUFBLFNBQVMsRUFBVEE7QUFBRixLQUF6RTtBQUZiLEtBSUUsNkJBQUMsbUJBQUQ7QUFBWSxJQUFBLEdBQUcsRUFBRU8saUJBQWpCO0FBQW9DLElBQUEsUUFBUSxFQUFFcEIsUUFBOUM7QUFBd0QsSUFBQSxPQUFPLEVBQUVTO0FBQWpFLEtBQ0UsNkJBQUMsdUJBQUQsT0FERixDQUpGLEVBT0U7QUFBSyxpQkFBVSxRQUFmO0FBQXdCLElBQUEsU0FBUyxFQUFDLFNBQWxDO0FBQTRDLElBQUEsRUFBRSxFQUFDLGdDQUEvQztBQUFnRixJQUFBLElBQUksRUFBQztBQUFyRixLQUNHWSxnQkFESCxDQVBGLENBREY7QUFhRCxDQWxCRDs7O0FBb0JBTCxnQkFBZ0IsQ0FBQ00sWUFBakIsR0FBZ0M7QUFDOUJMLEVBQUFBLFNBQVMsRUFBRSxFQURtQjtBQUU5QkosRUFBQUEsU0FBUyxFQUFFLEtBRm1CO0FBRzlCYixFQUFBQSxRQUFRLEVBQUU7QUFIb0IsQ0FBaEM7O0FBTUFnQixnQkFBZ0IsQ0FBQ08sU0FBakIsR0FBNkI7QUFDM0JOLEVBQUFBLFNBQVMsRUFBRU8sbUJBQVVDLE1BRE07QUFFM0JoQixFQUFBQSxLQUFLLEVBQUVlLG1CQUFVRSxJQUFWLENBQWVDLFVBRks7QUFHM0JkLEVBQUFBLFNBQVMsRUFBRVcsbUJBQVVJLElBSE07QUFJM0I1QixFQUFBQSxRQUFRLEVBQUV3QixtQkFBVUk7QUFKTyxDQUE3Qjs7ZUFPZXRDLHVCQUF1QixHQUFHMEIsZ0JBQUgsQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgaXMgcmVxdWlyZWQgZm9yIGFyaWEtY29udHJvbHMuXG4vKiBlc2xpbnQgcmVhY3QvZm9yYmlkLWRvbS1wcm9wczogXCJvZmZcIiAqL1xuXG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tICdib3RmcmFtZXdvcmstd2ViY2hhdC1jb3JlJztcbmltcG9ydCB7IGNzcyB9IGZyb20gJ2dsYW1vcic7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBtZW1vaXplIGZyb20gJ21lbW9pemUtb25lJztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgY29ubmVjdFRvV2ViQ2hhdCBmcm9tICcuLi9jb25uZWN0VG9XZWJDaGF0JztcbmltcG9ydCBJY29uQnV0dG9uIGZyb20gJy4vSWNvbkJ1dHRvbic7XG5pbXBvcnQgTWljcm9waG9uZUljb24gZnJvbSAnLi9Bc3NldHMvTWljcm9waG9uZUljb24nO1xuaW1wb3J0IHVzZUxvY2FsaXplIGZyb20gJy4uL2hvb2tzL3VzZUxvY2FsaXplJztcbmltcG9ydCB1c2VTdHlsZVNldCBmcm9tICcuLi9ob29rcy91c2VTdHlsZVNldCc7XG5cbmNvbnN0IHsgRGljdGF0ZVN0YXRlIH0gPSBDb25zdGFudHM7XG5cbmNvbnN0IFJPT1RfQ1NTID0gY3NzKHtcbiAgZGlzcGxheTogJ2ZsZXgnLFxuICBoZWlnaHQ6ICcxMDAlJyxcblxuICAvLyAuc3Itb25seSAtIFRoaXMgY29tcG9uZW50IGlzIGludGVuZGVkIHRvIGJlIGludmlzaWJsZSB0byB0aGUgdmlzdWFsIFdlYiBDaGF0IHVzZXIsIGJ1dCByZWFkIGJ5IHRoZSBBVCB3aGVuIHVzaW5nIGEgc2NyZWVuIHJlYWRlclxuXG4gICcmID4gLnNyLW9ubHknOiB7XG4gICAgY29sb3I6ICd0cmFuc3BhcmVudCcsXG4gICAgaGVpZ2h0OiAxLFxuICAgIGxlZnQ6IC0xMDAwMCxcbiAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgdG9wOiAwLFxuICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnLFxuICAgIHdpZHRoOiAxXG4gIH1cbn0pO1xuXG5jb25zdCBjb25uZWN0TWljcm9waG9uZUJ1dHRvbiA9ICguLi5zZWxlY3RvcnMpID0+IHtcbiAgY29uc3QgcHJpbWVTcGVlY2hTeW50aGVzaXMgPSBtZW1vaXplKChzcGVlY2hTeW50aGVzaXMsIFNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSkgPT4ge1xuICAgIGlmIChzcGVlY2hTeW50aGVzaXMgJiYgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlKSB7XG4gICAgICBjb25zdCB1dHRlcmFuY2UgPSBuZXcgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlKCcnKTtcblxuICAgICAgW3V0dGVyYW5jZS52b2ljZV0gPSBzcGVlY2hTeW50aGVzaXMuZ2V0Vm9pY2VzKCk7XG4gICAgICBzcGVlY2hTeW50aGVzaXMuc3BlYWsodXR0ZXJhbmNlKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBjb25uZWN0VG9XZWJDaGF0KFxuICAgICh7XG4gICAgICBkaXNhYmxlZCxcbiAgICAgIGRpY3RhdGVJbnRlcmltcyxcbiAgICAgIGRpY3RhdGVTdGF0ZSxcbiAgICAgIGxhbmd1YWdlLFxuICAgICAgc2V0U2VuZEJveCxcbiAgICAgIHN0YXJ0RGljdGF0ZSxcbiAgICAgIHN0b3BEaWN0YXRlLFxuICAgICAgc3RvcFNwZWFraW5nQWN0aXZpdHksXG4gICAgICB3ZWJTcGVlY2hQb255ZmlsbDogeyBzcGVlY2hTeW50aGVzaXMsIFNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSB9ID0ge31cbiAgICB9KSA9PiAoe1xuICAgICAgY2xpY2s6ICgpID0+IHtcbiAgICAgICAgaWYgKGRpY3RhdGVTdGF0ZSA9PT0gRGljdGF0ZVN0YXRlLldJTExfU1RBUlQpIHtcbiAgICAgICAgICBzdG9wU3BlYWtpbmdBY3Rpdml0eSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGRpY3RhdGVTdGF0ZSA9PT0gRGljdGF0ZVN0YXRlLkRJQ1RBVElORykge1xuICAgICAgICAgIHN0b3BEaWN0YXRlKCk7XG4gICAgICAgICAgc2V0U2VuZEJveChkaWN0YXRlSW50ZXJpbXMuam9pbignICcpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdG9wU3BlYWtpbmdBY3Rpdml0eSgpO1xuICAgICAgICAgIHN0YXJ0RGljdGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpbWVTcGVlY2hTeW50aGVzaXMoc3BlZWNoU3ludGhlc2lzLCBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UpO1xuICAgICAgfSxcbiAgICAgIGRpY3RhdGluZzogZGljdGF0ZVN0YXRlID09PSBEaWN0YXRlU3RhdGUuRElDVEFUSU5HLFxuICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkIHx8IChkaWN0YXRlU3RhdGUgPT09IERpY3RhdGVTdGF0ZS5TVEFSVElORyAmJiBkaWN0YXRlU3RhdGUgPT09IERpY3RhdGVTdGF0ZS5TVE9QUElORyksXG4gICAgICBsYW5ndWFnZVxuICAgIH0pLFxuICAgIC4uLnNlbGVjdG9yc1xuICApO1xufTtcblxuY29uc3QgTWljcm9waG9uZUJ1dHRvbiA9ICh7IGNsYXNzTmFtZSwgY2xpY2ssIGRpY3RhdGluZywgZGlzYWJsZWQgfSkgPT4ge1xuICBjb25zdCBbeyBtaWNyb3Bob25lQnV0dG9uOiBtaWNyb3Bob25lQnV0dG9uU3R5bGVTZXQgfV0gPSB1c2VTdHlsZVNldCgpO1xuICBjb25zdCBpY29uQnV0dG9uQWx0VGV4dCA9IHVzZUxvY2FsaXplKCdTcGVhaycpO1xuICBjb25zdCBzY3JlZW5SZWFkZXJUZXh0ID0gdXNlTG9jYWxpemUoZGljdGF0aW5nID8gJ01pY3JvcGhvbmUgb24nIDogJ01pY3JvcGhvbmUgb2ZmJyk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBhcmlhLWNvbnRyb2xzPVwid2ViY2hhdFNlbmRCb3hNaWNyb3Bob25lQnV0dG9uXCJcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhtaWNyb3Bob25lQnV0dG9uU3R5bGVTZXQgKyAnJywgUk9PVF9DU1MgKyAnJywgY2xhc3NOYW1lICsgJycsIHsgZGljdGF0aW5nIH0pfVxuICAgID5cbiAgICAgIDxJY29uQnV0dG9uIGFsdD17aWNvbkJ1dHRvbkFsdFRleHR9IGRpc2FibGVkPXtkaXNhYmxlZH0gb25DbGljaz17Y2xpY2t9PlxuICAgICAgICA8TWljcm9waG9uZUljb24gLz5cbiAgICAgIDwvSWNvbkJ1dHRvbj5cbiAgICAgIDxkaXYgYXJpYS1saXZlPVwicG9saXRlXCIgY2xhc3NOYW1lPVwic3Itb25seVwiIGlkPVwid2ViY2hhdFNlbmRCb3hNaWNyb3Bob25lQnV0dG9uXCIgcm9sZT1cInN0YXR1c1wiPlxuICAgICAgICB7c2NyZWVuUmVhZGVyVGV4dH1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuTWljcm9waG9uZUJ1dHRvbi5kZWZhdWx0UHJvcHMgPSB7XG4gIGNsYXNzTmFtZTogJycsXG4gIGRpY3RhdGluZzogZmFsc2UsXG4gIGRpc2FibGVkOiBmYWxzZVxufTtcblxuTWljcm9waG9uZUJ1dHRvbi5wcm9wVHlwZXMgPSB7XG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgY2xpY2s6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGRpY3RhdGluZzogUHJvcFR5cGVzLmJvb2wsXG4gIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdE1pY3JvcGhvbmVCdXR0b24oKShNaWNyb3Bob25lQnV0dG9uKTtcblxuZXhwb3J0IHsgY29ubmVjdE1pY3JvcGhvbmVCdXR0b24gfTtcbiJdfQ==
