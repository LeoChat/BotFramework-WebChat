'use strict';

var cov_1pox2976ep = (function() {
  var path = '/Users/guy/Work/Leo/leo/BotFramework-WebChat/packages/component/src/SendBox/TextBox.js';
  var hash = '4de07297358948e397d8af63f8d726eac6c23e37';
  var global = new Function('return this')();
  var gcv = '__coverage__';
  var coverageData = {
    path: '/Users/guy/Work/Leo/leo/BotFramework-WebChat/packages/component/src/SendBox/TextBox.js',
    statementMap: {
      '0': {
        start: {
          line: 10,
          column: 17
        },
        end: {
          line: 16,
          column: 2
        }
      },
      '1': {
        start: {
          line: 18,
          column: 27
        },
        end: {
          line: 65,
          column: 3
        }
      },
      '2': {
        start: {
          line: 19,
          column: 2
        },
        end: {
          line: 65,
          column: 3
        }
      },
      '3': {
        start: {
          line: 30,
          column: 11
        },
        end: {
          line: 63,
          column: 5
        }
      },
      '4': {
        start: {
          line: 35,
          column: 8
        },
        end: {
          line: 35,
          column: 26
        }
      },
      '5': {
        start: {
          line: 36,
          column: 8
        },
        end: {
          line: 36,
          column: 22
        }
      },
      '6': {
        start: {
          line: 39,
          column: 34
        },
        end: {
          line: 39,
          column: 39
        }
      },
      '7': {
        start: {
          line: 41,
          column: 8
        },
        end: {
          line: 49,
          column: 9
        }
      },
      '8': {
        start: {
          line: 42,
          column: 10
        },
        end: {
          line: 42,
          column: 33
        }
      },
      '9': {
        start: {
          line: 44,
          column: 10
        },
        end: {
          line: 48,
          column: 11
        }
      },
      '10': {
        start: {
          line: 45,
          column: 12
        },
        end: {
          line: 45,
          column: 26
        }
      },
      '11': {
        start: {
          line: 46,
          column: 12
        },
        end: {
          line: 46,
          column: 28
        }
      },
      '12': {
        start: {
          line: 47,
          column: 12
        },
        end: {
          line: 47,
          column: 27
        }
      },
      '13': {
        start: {
          line: 52,
          column: 8
        },
        end: {
          line: 52,
          column: 31
        }
      },
      '14': {
        start: {
          line: 57,
          column: 8
        },
        end: {
          line: 60,
          column: 9
        }
      },
      '15': {
        start: {
          line: 58,
          column: 10
        },
        end: {
          line: 58,
          column: 24
        }
      },
      '16': {
        start: {
          line: 59,
          column: 10
        },
        end: {
          line: 59,
          column: 26
        }
      },
      '17': {
        start: {
          line: 67,
          column: 16
        },
        end: {
          line: 113,
          column: 1
        }
      },
      '18': {
        start: {
          line: 68,
          column: 32
        },
        end: {
          line: 68,
          column: 71
        }
      },
      '19': {
        start: {
          line: 71,
          column: 6
        },
        end: {
          line: 71,
          column: 14
        }
      },
      '20': {
        start: {
          line: 73,
          column: 2
        },
        end: {
          line: 112,
          column: 4
        }
      },
      '21': {
        start: {
          line: 81,
          column: 12
        },
        end: {
          line: 107,
          column: 13
        }
      },
      '22': {
        start: {
          line: 115,
          column: 0
        },
        end: {
          line: 120,
          column: 2
        }
      },
      '23': {
        start: {
          line: 122,
          column: 0
        },
        end: {
          line: 138,
          column: 2
        }
      },
      '24': {
        start: {
          line: 140,
          column: 53
        },
        end: {
          line: 140,
          column: 65
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 18,
            column: 27
          },
          end: {
            line: 18,
            column: 28
          }
        },
        loc: {
          start: {
            line: 19,
            column: 2
          },
          end: {
            line: 65,
            column: 3
          }
        },
        line: 19
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 20,
            column: 4
          },
          end: {
            line: 20,
            column: 5
          }
        },
        loc: {
          start: {
            line: 30,
            column: 11
          },
          end: {
            line: 63,
            column: 5
          }
        },
        line: 30
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 34,
            column: 16
          },
          end: {
            line: 34,
            column: 17
          }
        },
        loc: {
          start: {
            line: 34,
            column: 43
          },
          end: {
            line: 37,
            column: 7
          }
        },
        line: 34
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 38,
            column: 18
          },
          end: {
            line: 38,
            column: 19
          }
        },
        loc: {
          start: {
            line: 38,
            column: 27
          },
          end: {
            line: 50,
            column: 7
          }
        },
        line: 38
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 51,
            column: 16
          },
          end: {
            line: 51,
            column: 17
          }
        },
        loc: {
          start: {
            line: 51,
            column: 25
          },
          end: {
            line: 61,
            column: 7
          }
        },
        line: 51
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 67,
            column: 16
          },
          end: {
            line: 67,
            column: 17
          }
        },
        loc: {
          start: {
            line: 67,
            column: 115
          },
          end: {
            line: 113,
            column: 1
          }
        },
        line: 67
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 80,
            column: 11
          },
          end: {
            line: 80,
            column: 12
          }
        },
        loc: {
          start: {
            line: 81,
            column: 12
          },
          end: {
            line: 107,
            column: 13
          }
        },
        line: 81
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 140,
            column: 34
          },
          end: {
            line: 140,
            column: 35
          }
        },
        loc: {
          start: {
            line: 140,
            column: 53
          },
          end: {
            line: 140,
            column: 65
          }
        },
        line: 140
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 41,
            column: 8
          },
          end: {
            line: 49,
            column: 9
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 41,
              column: 8
            },
            end: {
              line: 49,
              column: 9
            }
          },
          {
            start: {
              line: 41,
              column: 8
            },
            end: {
              line: 49,
              column: 9
            }
          }
        ],
        line: 41
      },
      '1': {
        loc: {
          start: {
            line: 41,
            column: 12
          },
          end: {
            line: 41,
            column: 40
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 41,
              column: 12
            },
            end: {
              line: 41,
              column: 27
            }
          },
          {
            start: {
              line: 41,
              column: 31
            },
            end: {
              line: 41,
              column: 40
            }
          }
        ],
        line: 41
      },
      '2': {
        loc: {
          start: {
            line: 44,
            column: 10
          },
          end: {
            line: 48,
            column: 11
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 44,
              column: 10
            },
            end: {
              line: 48,
              column: 11
            }
          },
          {
            start: {
              line: 44,
              column: 10
            },
            end: {
              line: 48,
              column: 11
            }
          }
        ],
        line: 44
      },
      '3': {
        loc: {
          start: {
            line: 57,
            column: 8
          },
          end: {
            line: 60,
            column: 9
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 57,
              column: 8
            },
            end: {
              line: 60,
              column: 9
            }
          },
          {
            start: {
              line: 57,
              column: 8
            },
            end: {
              line: 60,
              column: 9
            }
          }
        ],
        line: 57
      },
      '4': {
        loc: {
          start: {
            line: 81,
            column: 12
          },
          end: {
            line: 107,
            column: 13
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 82,
              column: 14
            },
            end: {
              line: 91,
              column: 16
            }
          },
          {
            start: {
              line: 93,
              column: 14
            },
            end: {
              line: 106,
              column: 20
            }
          }
        ],
        line: 81
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0]
    },
    _coverageSchema: '43e27e138ebf9cfc5966b082cf9a028302ed4184',
    hash: '4de07297358948e397d8af63f8d726eac6c23e37'
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  return (coverage[path] = coverageData);
})();

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.connectSendTextBox = exports.default = void 0;

var _glamor = require('glamor');

var _classnames = _interopRequireDefault(require('classnames'));

var _propTypes = _interopRequireDefault(require('prop-types'));

var _react = _interopRequireDefault(require('react'));

var _TypeFocusSink = require('../Utils/TypeFocusSink');

var _Localize = require('../Localization/Localize');

var _connectToWebChat = _interopRequireDefault(require('../connectToWebChat'));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

var ROOT_CSS =
  (cov_1pox2976ep.s[0]++,
  (0, _glamor.css)({
    display: 'flex',
    '& > div, input': {
      flex: 1
    }
  }));
cov_1pox2976ep.s[1]++;

var connectSendTextBox = function connectSendTextBox() {
  cov_1pox2976ep.f[0]++;
  cov_1pox2976ep.s[2]++;

  for (var _len = arguments.length, selectors = new Array(_len), _key = 0; _key < _len; _key++) {
    selectors[_key] = arguments[_key];
  }

  return _connectToWebChat.default.apply(
    void 0,
    [
      function(_ref) {
        var direction = _ref.direction,
          disabled = _ref.disabled,
          focusSendBox = _ref.focusSendBox,
          language = _ref.language,
          scrollToEnd = _ref.scrollToEnd,
          sendBoxValue = _ref.sendBoxValue,
          setSendBox = _ref.setSendBox,
          stopDictate = _ref.stopDictate,
          submitSendBox = _ref.submitSendBox;
        cov_1pox2976ep.f[1]++;
        cov_1pox2976ep.s[3]++;
        return {
          direction: direction,
          disabled: disabled,
          language: language,
          onChange: function onChange(_ref2) {
            var value = _ref2.target.value;
            cov_1pox2976ep.f[2]++;
            cov_1pox2976ep.s[4]++;
            setSendBox(value);
            cov_1pox2976ep.s[5]++;
            stopDictate();
          },
          onKeyPress: function onKeyPress(event) {
            cov_1pox2976ep.f[3]++;

            var _ref3 = (cov_1pox2976ep.s[6]++, event),
              key = _ref3.key,
              shiftKey = _ref3.shiftKey;

            cov_1pox2976ep.s[7]++;

            if ((cov_1pox2976ep.b[1][0]++, key === 'Enter') && (cov_1pox2976ep.b[1][1]++, !shiftKey)) {
              cov_1pox2976ep.b[0][0]++;
              cov_1pox2976ep.s[8]++;
              event.preventDefault();
              cov_1pox2976ep.s[9]++;

              if (sendBoxValue) {
                cov_1pox2976ep.b[2][0]++;
                cov_1pox2976ep.s[10]++;
                scrollToEnd();
                cov_1pox2976ep.s[11]++;
                submitSendBox();
                cov_1pox2976ep.s[12]++;
                focusSendBox();
              } else {
                cov_1pox2976ep.b[2][1]++;
              }
            } else {
              cov_1pox2976ep.b[0][1]++;
            }
          },
          onSubmit: function onSubmit(event) {
            cov_1pox2976ep.f[4]++;
            cov_1pox2976ep.s[13]++;
            event.preventDefault(); // Consider clearing the send box only after we received POST_ACTIVITY_PENDING
            // E.g. if the connection is bad, sending the message essentially do nothing but just clearing the send box

            cov_1pox2976ep.s[14]++;

            if (sendBoxValue) {
              cov_1pox2976ep.b[3][0]++;
              cov_1pox2976ep.s[15]++;
              scrollToEnd();
              cov_1pox2976ep.s[16]++;
              submitSendBox();
            } else {
              cov_1pox2976ep.b[3][1]++;
            }
          },
          value: sendBoxValue
        };
      }
    ].concat(selectors)
  );
};

exports.connectSendTextBox = connectSendTextBox;
cov_1pox2976ep.s[17]++;

var TextBox = function TextBox(_ref4) {
  var className = _ref4.className,
    direction = _ref4.direction,
    disabled = _ref4.disabled,
    language = _ref4.language,
    onChange = _ref4.onChange,
    onKeyPress = _ref4.onKeyPress,
    onSubmit = _ref4.onSubmit,
    styleSet = _ref4.styleSet,
    value = _ref4.value;
  cov_1pox2976ep.f[5]++;
  var typeYourMessageString = (cov_1pox2976ep.s[18]++, (0, _Localize.localize)('Type your message', language));

  var _ref5 = (cov_1pox2976ep.s[19]++, styleSet),
    sendBoxTextWrap = _ref5.options.sendBoxTextWrap;

  cov_1pox2976ep.s[20]++;
  return _react.default.createElement(
    'form',
    {
      className: (0, _classnames.default)(
        ROOT_CSS + '',
        styleSet.sendBoxTextArea + '',
        styleSet.sendBoxTextBox + '',
        className + ''
      ),
      onSubmit: onSubmit
    },
    _react.default.createElement(_TypeFocusSink.Context.Consumer, null, function(_ref6) {
      var sendFocusRef = _ref6.sendFocusRef;
      cov_1pox2976ep.f[6]++;
      cov_1pox2976ep.s[21]++;
      return !sendBoxTextWrap
        ? (cov_1pox2976ep.b[4][0]++,
          _react.default.createElement('input', {
            'aria-label': typeYourMessageString,
            'data-id': 'webchat-sendbox-input',
            disabled: disabled,
            onChange: onChange,
            placeholder: typeYourMessageString,
            ref: sendFocusRef,
            type: 'text',
            value: value
          }))
        : (cov_1pox2976ep.b[4][1]++,
          _react.default.createElement(
            'div',
            null,
            _react.default.createElement('textarea', {
              'aria-label': typeYourMessageString,
              'data-id': 'webchat-sendbox-input',
              disabled: disabled,
              onChange: onChange,
              onKeyPress: onKeyPress,
              placeholder: typeYourMessageString,
              ref: sendFocusRef,
              rows: '1',
              value: value
            }),
            _react.default.createElement('div', null, value + '\n')
          ));
    })
  );
};

cov_1pox2976ep.s[22]++;
TextBox.defaultProps = {
  className: '',
  direction: 'ltr',
  disabled: false,
  value: ''
};
cov_1pox2976ep.s[23]++;
TextBox.propTypes = {
  className: _propTypes.default.string,
  direction: _propTypes.default.string,
  disabled: _propTypes.default.bool,
  language: _propTypes.default.string.isRequired,
  onChange: _propTypes.default.func.isRequired,
  onKeyPress: _propTypes.default.func.isRequired,
  onSubmit: _propTypes.default.func.isRequired,
  styleSet: _propTypes.default.shape({
    options: _propTypes.default.shape({
      sendBoxTextWrap: _propTypes.default.bool.isRequired
    }).isRequired,
    sendBoxTextArea: _propTypes.default.any.isRequired,
    sendBoxTextBox: _propTypes.default.any.isRequired
  }).isRequired,
  value: _propTypes.default.string
};

var _default = connectSendTextBox(function(_ref7) {
  var styleSet = _ref7.styleSet;
  cov_1pox2976ep.f[7]++;
  cov_1pox2976ep.s[24]++;
  return {
    styleSet: styleSet
  };
})(TextBox);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9TZW5kQm94L1RleHRCb3guanMiXSwibmFtZXMiOlsiUk9PVF9DU1MiLCJkaXNwbGF5IiwiZmxleCIsImNvbm5lY3RTZW5kVGV4dEJveCIsInNlbGVjdG9ycyIsImRpcmVjdGlvbiIsImRpc2FibGVkIiwiZm9jdXNTZW5kQm94IiwibGFuZ3VhZ2UiLCJzY3JvbGxUb0VuZCIsInNlbmRCb3hWYWx1ZSIsInNldFNlbmRCb3giLCJzdG9wRGljdGF0ZSIsInN1Ym1pdFNlbmRCb3giLCJvbkNoYW5nZSIsInZhbHVlIiwidGFyZ2V0Iiwib25LZXlQcmVzcyIsImV2ZW50Iiwia2V5Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsIm9uU3VibWl0IiwiVGV4dEJveCIsImNsYXNzTmFtZSIsInN0eWxlU2V0IiwidHlwZVlvdXJNZXNzYWdlU3RyaW5nIiwic2VuZEJveFRleHRXcmFwIiwib3B0aW9ucyIsInNlbmRCb3hUZXh0QXJlYSIsInNlbmRCb3hUZXh0Qm94Iiwic2VuZEZvY3VzUmVmIiwiZGVmYXVsdFByb3BzIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwic3RyaW5nIiwiYm9vbCIsImlzUmVxdWlyZWQiLCJmdW5jIiwic2hhcGUiLCJhbnkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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dkJaLE1BQUFBLGVBQWUsRUFBRU8sbUJBQVVFLElBQVYsQ0FBZUM7QUFEVCxLQUFoQixFQUVOQSxVQUhxQjtBQUl4QlIsSUFBQUEsZUFBZSxFQUFFSyxtQkFBVU0sR0FBVixDQUFjSCxVQUpQO0FBS3hCUCxJQUFBQSxjQUFjLEVBQUVJLG1CQUFVTSxHQUFWLENBQWNIO0FBTE4sR0FBaEIsRUFNUEEsVUFkZTtBQWVsQnRCLEVBQUFBLEtBQUssRUFBRW1CLG1CQUFVQztBQWZDLENBQXBCOztlQWtCZWhDLGtCQUFrQixDQUFDLGlCQUFtQjtBQUFBLE1BQWhCc0IsUUFBZ0IsU0FBaEJBLFFBQWdCO0FBQUE7QUFBQTtBQUFBO0FBQUVBLElBQUFBLFFBQVEsRUFBUkE7QUFBRjtBQUFZLENBQWhDLENBQWxCLENBQXFERixPQUFyRCxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnZ2xhbW9yJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IENvbnRleHQgYXMgVHlwZUZvY3VzU2lua0NvbnRleHQgfSBmcm9tICcuLi9VdGlscy9UeXBlRm9jdXNTaW5rJztcbmltcG9ydCB7IGxvY2FsaXplIH0gZnJvbSAnLi4vTG9jYWxpemF0aW9uL0xvY2FsaXplJztcbmltcG9ydCBjb25uZWN0VG9XZWJDaGF0IGZyb20gJy4uL2Nvbm5lY3RUb1dlYkNoYXQnO1xuXG5jb25zdCBST09UX0NTUyA9IGNzcyh7XG4gIGRpc3BsYXk6ICdmbGV4JyxcblxuICAnJiA+IGRpdiwgaW5wdXQnOiB7XG4gICAgZmxleDogMVxuICB9XG59KTtcblxuY29uc3QgY29ubmVjdFNlbmRUZXh0Qm94ID0gKC4uLnNlbGVjdG9ycykgPT5cbiAgY29ubmVjdFRvV2ViQ2hhdChcbiAgICAoe1xuICAgICAgZGlyZWN0aW9uLFxuICAgICAgZGlzYWJsZWQsXG4gICAgICBmb2N1c1NlbmRCb3gsXG4gICAgICBsYW5ndWFnZSxcbiAgICAgIHNjcm9sbFRvRW5kLFxuICAgICAgc2VuZEJveFZhbHVlLFxuICAgICAgc2V0U2VuZEJveCxcbiAgICAgIHN0b3BEaWN0YXRlLFxuICAgICAgc3VibWl0U2VuZEJveFxuICAgIH0pID0+ICh7XG4gICAgICBkaXJlY3Rpb24sXG4gICAgICBkaXNhYmxlZCxcbiAgICAgIGxhbmd1YWdlLFxuICAgICAgb25DaGFuZ2U6ICh7IHRhcmdldDogeyB2YWx1ZSB9IH0pID0+IHtcbiAgICAgICAgc2V0U2VuZEJveCh2YWx1ZSk7XG4gICAgICAgIHN0b3BEaWN0YXRlKCk7XG4gICAgICB9LFxuICAgICAgb25LZXlQcmVzczogZXZlbnQgPT4ge1xuICAgICAgICBjb25zdCB7IGtleSwgc2hpZnRLZXkgfSA9IGV2ZW50O1xuXG4gICAgICAgIGlmIChrZXkgPT09ICdFbnRlcicgJiYgIXNoaWZ0S2V5KSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgIGlmIChzZW5kQm94VmFsdWUpIHtcbiAgICAgICAgICAgIHNjcm9sbFRvRW5kKCk7XG4gICAgICAgICAgICBzdWJtaXRTZW5kQm94KCk7XG4gICAgICAgICAgICBmb2N1c1NlbmRCb3goKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvblN1Ym1pdDogZXZlbnQgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIC8vIENvbnNpZGVyIGNsZWFyaW5nIHRoZSBzZW5kIGJveCBvbmx5IGFmdGVyIHdlIHJlY2VpdmVkIFBPU1RfQUNUSVZJVFlfUEVORElOR1xuICAgICAgICAvLyBFLmcuIGlmIHRoZSBjb25uZWN0aW9uIGlzIGJhZCwgc2VuZGluZyB0aGUgbWVzc2FnZSBlc3NlbnRpYWxseSBkbyBub3RoaW5nIGJ1dCBqdXN0IGNsZWFyaW5nIHRoZSBzZW5kIGJveFxuXG4gICAgICAgIGlmIChzZW5kQm94VmFsdWUpIHtcbiAgICAgICAgICBzY3JvbGxUb0VuZCgpO1xuICAgICAgICAgIHN1Ym1pdFNlbmRCb3goKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHZhbHVlOiBzZW5kQm94VmFsdWVcbiAgICB9KSxcbiAgICAuLi5zZWxlY3RvcnNcbiAgKTtcblxuY29uc3QgVGV4dEJveCA9ICh7IGNsYXNzTmFtZSwgZGlyZWN0aW9uLCBkaXNhYmxlZCwgbGFuZ3VhZ2UsIG9uQ2hhbmdlLCBvbktleVByZXNzLCBvblN1Ym1pdCwgc3R5bGVTZXQsIHZhbHVlIH0pID0+IHtcbiAgY29uc3QgdHlwZVlvdXJNZXNzYWdlU3RyaW5nID0gbG9jYWxpemUoJ1R5cGUgeW91ciBtZXNzYWdlJywgbGFuZ3VhZ2UpO1xuICBjb25zdCB7XG4gICAgb3B0aW9uczogeyBzZW5kQm94VGV4dFdyYXAgfVxuICB9ID0gc3R5bGVTZXQ7XG5cbiAgcmV0dXJuIChcbiAgICA8Zm9ybVxuICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFJPT1RfQ1NTICsgJycsIHN0eWxlU2V0LnNlbmRCb3hUZXh0QXJlYSArICcnLCBzdHlsZVNldC5zZW5kQm94VGV4dEJveCArICcnLCBjbGFzc05hbWUgKyAnJyl9XG4gICAgICBvblN1Ym1pdD17b25TdWJtaXR9XG4gICAgPlxuICAgICAge1xuICAgICAgICA8VHlwZUZvY3VzU2lua0NvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgICAgeyh7IHNlbmRGb2N1c1JlZiB9KSA9PlxuICAgICAgICAgICAgIXNlbmRCb3hUZXh0V3JhcCA/IChcbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17dHlwZVlvdXJNZXNzYWdlU3RyaW5nfVxuICAgICAgICAgICAgICAgIGRhdGEtaWQ9XCJ3ZWJjaGF0LXNlbmRib3gtaW5wdXRcIlxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2V9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3R5cGVZb3VyTWVzc2FnZVN0cmluZ31cbiAgICAgICAgICAgICAgICByZWY9e3NlbmRGb2N1c1JlZn1cbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e3R5cGVZb3VyTWVzc2FnZVN0cmluZ31cbiAgICAgICAgICAgICAgICAgIGRhdGEtaWQ9XCJ3ZWJjaGF0LXNlbmRib3gtaW5wdXRcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgb25LZXlQcmVzcz17b25LZXlQcmVzc31cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0eXBlWW91ck1lc3NhZ2VTdHJpbmd9XG4gICAgICAgICAgICAgICAgICByZWY9e3NlbmRGb2N1c1JlZn1cbiAgICAgICAgICAgICAgICAgIHJvd3M9XCIxXCJcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxkaXY+e3ZhbHVlICsgJ1xcbid9PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgPC9UeXBlRm9jdXNTaW5rQ29udGV4dC5Db25zdW1lcj5cbiAgICAgIH1cbiAgICA8L2Zvcm0+XG4gICk7XG59O1xuXG5UZXh0Qm94LmRlZmF1bHRQcm9wcyA9IHtcbiAgY2xhc3NOYW1lOiAnJyxcbiAgZGlyZWN0aW9uOiAnbHRyJyxcbiAgZGlzYWJsZWQ6IGZhbHNlLFxuICB2YWx1ZTogJydcbn07XG5cblRleHRCb3gucHJvcFR5cGVzID0ge1xuICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGRpcmVjdGlvbjogUHJvcFR5cGVzLnN0cmluZyxcbiAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuICBsYW5ndWFnZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgb25LZXlQcmVzczogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgb25TdWJtaXQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIHN0eWxlU2V0OiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIG9wdGlvbnM6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBzZW5kQm94VGV4dFdyYXA6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWRcbiAgICB9KS5pc1JlcXVpcmVkLFxuICAgIHNlbmRCb3hUZXh0QXJlYTogUHJvcFR5cGVzLmFueS5pc1JlcXVpcmVkLFxuICAgIHNlbmRCb3hUZXh0Qm94OiBQcm9wVHlwZXMuYW55LmlzUmVxdWlyZWRcbiAgfSkuaXNSZXF1aXJlZCxcbiAgdmFsdWU6IFByb3BUeXBlcy5zdHJpbmdcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3RTZW5kVGV4dEJveCgoeyBzdHlsZVNldCB9KSA9PiAoeyBzdHlsZVNldCB9KSkoVGV4dEJveCk7XG5cbmV4cG9ydCB7IGNvbm5lY3RTZW5kVGV4dEJveCB9O1xuIl19
