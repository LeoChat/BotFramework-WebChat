'use strict';

var cov_1lxakwg6wb = (function() {
  var path = '/home/guy/leo/BotFramework-WebChat/packages/component/src/Middleware/Attachment/createCoreMiddleware.js';
  var hash = '8e4d7c96d81ef8024e55d7e0027dd25a1bb2ed52';
  var global = new Function('return this')();
  var gcv = '__coverage__';
  var coverageData = {
    path: '/home/guy/leo/BotFramework-WebChat/packages/component/src/Middleware/Attachment/createCoreMiddleware.js',
    statementMap: {
      '0': {
        start: {
          line: 13,
          column: 2
        },
        end: {
          line: 45,
          column: 4
        }
      },
      '1': {
        start: {
          line: 13,
          column: 15
        },
        end: {
          line: 45,
          column: 3
        }
      },
      '2': {
        start: {
          line: 14,
          column: 23
        },
        end: {
          line: 34,
          column: 7
        }
      },
      '3': {
        start: {
          line: 20,
          column: 6
        },
        end: {
          line: 34,
          column: 7
        }
      },
      '4': {
        start: {
          line: 36,
          column: 4
        },
        end: {
          line: 42,
          column: 6
        }
      },
      '5': {
        start: {
          line: 44,
          column: 4
        },
        end: {
          line: 44,
          column: 22
        }
      }
    },
    fnMap: {
      '0': {
        name: 'createCoreMiddleware',
        decl: {
          start: {
            line: 12,
            column: 24
          },
          end: {
            line: 12,
            column: 44
          }
        },
        loc: {
          start: {
            line: 12,
            column: 47
          },
          end: {
            line: 46,
            column: 1
          }
        },
        line: 12
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 13,
            column: 9
          },
          end: {
            line: 13,
            column: 10
          }
        },
        loc: {
          start: {
            line: 13,
            column: 15
          },
          end: {
            line: 45,
            column: 3
          }
        },
        line: 13
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 13,
            column: 15
          },
          end: {
            line: 13,
            column: 16
          }
        },
        loc: {
          start: {
            line: 13,
            column: 23
          },
          end: {
            line: 45,
            column: 3
          }
        },
        line: 13
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 14,
            column: 23
          },
          end: {
            line: 14,
            column: 24
          }
        },
        loc: {
          start: {
            line: 20,
            column: 6
          },
          end: {
            line: 34,
            column: 7
          }
        },
        line: 20
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 15,
            column: 6
          },
          end: {
            line: 15,
            column: 19
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 15,
              column: 17
            },
            end: {
              line: 15,
              column: 19
            }
          }
        ],
        line: 15
      },
      '1': {
        loc: {
          start: {
            line: 16,
            column: 16
          },
          end: {
            line: 16,
            column: 39
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 16,
              column: 37
            },
            end: {
              line: 16,
              column: 39
            }
          }
        ],
        line: 16
      },
      '2': {
        loc: {
          start: {
            line: 18,
            column: 18
          },
          end: {
            line: 18,
            column: 64
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 18,
              column: 62
            },
            end: {
              line: 18,
              column: 64
            }
          }
        ],
        line: 18
      },
      '3': {
        loc: {
          start: {
            line: 20,
            column: 6
          },
          end: {
            line: 34,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 21,
              column: 8
            },
            end: {
              line: 21,
              column: 72
            }
          },
          {
            start: {
              line: 22,
              column: 10
            },
            end: {
              line: 34,
              column: 7
            }
          }
        ],
        line: 20
      },
      '4': {
        loc: {
          start: {
            line: 20,
            column: 6
          },
          end: {
            line: 20,
            column: 71
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 20,
              column: 6
            },
            end: {
              line: 20,
              column: 21
            }
          },
          {
            start: {
              line: 20,
              column: 25
            },
            end: {
              line: 20,
              column: 54
            }
          },
          {
            start: {
              line: 20,
              column: 58
            },
            end: {
              line: 20,
              column: 71
            }
          }
        ],
        line: 20
      },
      '5': {
        loc: {
          start: {
            line: 22,
            column: 10
          },
          end: {
            line: 34,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 23,
              column: 8
            },
            end: {
              line: 23,
              column: 71
            }
          },
          {
            start: {
              line: 24,
              column: 10
            },
            end: {
              line: 34,
              column: 7
            }
          }
        ],
        line: 22
      },
      '6': {
        loc: {
          start: {
            line: 24,
            column: 10
          },
          end: {
            line: 34,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 25,
              column: 8
            },
            end: {
              line: 25,
              column: 71
            }
          },
          {
            start: {
              line: 26,
              column: 10
            },
            end: {
              line: 34,
              column: 7
            }
          }
        ],
        line: 24
      },
      '7': {
        loc: {
          start: {
            line: 26,
            column: 10
          },
          end: {
            line: 34,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 27,
              column: 8
            },
            end: {
              line: 27,
              column: 71
            }
          },
          {
            start: {
              line: 28,
              column: 10
            },
            end: {
              line: 34,
              column: 7
            }
          }
        ],
        line: 26
      },
      '8': {
        loc: {
          start: {
            line: 28,
            column: 10
          },
          end: {
            line: 34,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 29,
              column: 8
            },
            end: {
              line: 29,
              column: 74
            }
          },
          {
            start: {
              line: 30,
              column: 10
            },
            end: {
              line: 34,
              column: 7
            }
          }
        ],
        line: 28
      },
      '9': {
        loc: {
          start: {
            line: 28,
            column: 10
          },
          end: {
            line: 28,
            column: 66
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 28,
              column: 10
            },
            end: {
              line: 28,
              column: 20
            }
          },
          {
            start: {
              line: 28,
              column: 24
            },
            end: {
              line: 28,
              column: 66
            }
          }
        ],
        line: 28
      },
      '10': {
        loc: {
          start: {
            line: 30,
            column: 10
          },
          end: {
            line: 34,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 31,
              column: 8
            },
            end: {
              line: 31,
              column: 70
            }
          },
          {
            start: {
              line: 33,
              column: 8
            },
            end: {
              line: 33,
              column: 38
            }
          }
        ],
        line: 30
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0
    },
    b: {
      '0': [0],
      '1': [0],
      '2': [0],
      '3': [0, 0],
      '4': [0, 0, 0],
      '5': [0, 0],
      '6': [0, 0],
      '7': [0, 0],
      '8': [0, 0],
      '9': [0, 0],
      '10': [0, 0]
    },
    _coverageSchema: '43e27e138ebf9cfc5966b082cf9a028302ed4184',
    hash: '8e4d7c96d81ef8024e55d7e0027dd25a1bb2ed52'
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  return (coverage[path] = coverageData);
})();

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = createCoreMiddleware;

var _propTypes = _interopRequireDefault(require('prop-types'));

var _react = _interopRequireDefault(require('react'));

var _AudioAttachment = _interopRequireDefault(require('../../Attachment/AudioAttachment'));

var _DownloadAttachment = _interopRequireDefault(require('../../Attachment/DownloadAttachment'));

var _ImageAttachment = _interopRequireDefault(require('../../Attachment/ImageAttachment'));

var _UploadAttachment = _interopRequireDefault(require('../../Attachment/UploadAttachment'));

var _TextAttachment = _interopRequireDefault(require('../../Attachment/TextAttachment'));

var _VideoAttachment = _interopRequireDefault(require('../../Attachment/VideoAttachment'));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

// TODO: [P4] Rename this file or the whole middleware, it looks either too simple or too comprehensive now
function createCoreMiddleware() {
  cov_1lxakwg6wb.f[0]++;
  cov_1lxakwg6wb.s[0]++;
  return function() {
    cov_1lxakwg6wb.f[1]++;
    cov_1lxakwg6wb.s[1]++;
    return function(next) {
      cov_1lxakwg6wb.f[2]++;
      cov_1lxakwg6wb.s[2]++;

      var Attachment = function Attachment(_ref) {
        var _ref$activity = _ref.activity,
          activity = _ref$activity === void 0 ? (cov_1lxakwg6wb.b[0][0]++, {}) : _ref$activity,
          _ref$activity2 = _ref.activity;
        _ref$activity2 = _ref$activity2 === void 0 ? (cov_1lxakwg6wb.b[1][0]++, {}) : _ref$activity2;
        var role = _ref$activity2.from.role,
          attachment = _ref.attachment,
          _ref$attachment = _ref.attachment;
        _ref$attachment = _ref$attachment === void 0 ? (cov_1lxakwg6wb.b[2][0]++, {}) : _ref$attachment;
        var contentType = _ref$attachment.contentType,
          contentUrl = _ref$attachment.contentUrl,
          thumbnailUrl = _ref$attachment.thumbnailUrl;
        cov_1lxakwg6wb.f[3]++;
        cov_1lxakwg6wb.s[3]++;
        return (cov_1lxakwg6wb.b[4][0]++, role === 'user') &&
          (cov_1lxakwg6wb.b[4][1]++, !/^text\//.test(contentType)) &&
          (cov_1lxakwg6wb.b[4][2]++, !thumbnailUrl)
          ? (cov_1lxakwg6wb.b[3][0]++,
            _react.default.createElement(_UploadAttachment.default, {
              activity: activity,
              attachment: attachment
            }))
          : (cov_1lxakwg6wb.b[3][1]++,
            /^audio\//.test(contentType)
              ? (cov_1lxakwg6wb.b[5][0]++,
                _react.default.createElement(_AudioAttachment.default, {
                  activity: activity,
                  attachment: attachment
                }))
              : (cov_1lxakwg6wb.b[5][1]++,
                /^image\//.test(contentType)
                  ? (cov_1lxakwg6wb.b[6][0]++,
                    _react.default.createElement(_ImageAttachment.default, {
                      activity: activity,
                      attachment: attachment
                    }))
                  : (cov_1lxakwg6wb.b[6][1]++,
                    /^video\//.test(contentType)
                      ? (cov_1lxakwg6wb.b[7][0]++,
                        _react.default.createElement(_VideoAttachment.default, {
                          activity: activity,
                          attachment: attachment
                        }))
                      : (cov_1lxakwg6wb.b[7][1]++,
                        (cov_1lxakwg6wb.b[9][0]++, contentUrl) ||
                        (cov_1lxakwg6wb.b[9][1]++, contentType === 'application/octet-stream')
                          ? (cov_1lxakwg6wb.b[8][0]++,
                            _react.default.createElement(_DownloadAttachment.default, {
                              activity: activity,
                              attachment: attachment
                            }))
                          : (cov_1lxakwg6wb.b[8][1]++,
                            /^text\//.test(contentType)
                              ? (cov_1lxakwg6wb.b[10][0]++,
                                _react.default.createElement(_TextAttachment.default, {
                                  activity: activity,
                                  attachment: attachment
                                }))
                              : (cov_1lxakwg6wb.b[10][1]++,
                                next({
                                  activity: activity,
                                  attachment: attachment
                                })))))));
      };

      cov_1lxakwg6wb.s[4]++;
      Attachment.propTypes = {
        activity: _propTypes.default.any.isRequired,
        attachment: _propTypes.default.shape({
          contentType: _propTypes.default.string.isRequired,
          contentUrl: _propTypes.default.string.isRequired
        }).isRequired
      };
      cov_1lxakwg6wb.s[5]++;
      return Attachment;
    };
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9NaWRkbGV3YXJlL0F0dGFjaG1lbnQvY3JlYXRlQ29yZU1pZGRsZXdhcmUuanMiXSwibmFtZXMiOlsiY3JlYXRlQ29yZU1pZGRsZXdhcmUiLCJuZXh0IiwiQXR0YWNobWVudCIsImFjdGl2aXR5Iiwicm9sZSIsImZyb20iLCJhdHRhY2htZW50IiwiY29udGVudFR5cGUiLCJjb250ZW50VXJsIiwidGh1bWJuYWlsVXJsIiwidGVzdCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImFueSIsImlzUmVxdWlyZWQiLCJzaGFwZSIsInN0cmluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVBO0FBQ2UsU0FBU0Esb0JBQVQsR0FBZ0M7QUFBQTtBQUFBO0FBQzdDLFNBQU8sWUFBTTtBQUFBO0FBQUE7QUFBQSxxQkFBQUMsSUFBSSxFQUFJO0FBQUE7QUFBQTs7QUFDbkIsVUFBTUMsVUFBVSxHQUFHLFNBQWJBLFVBQWEsT0FNakI7QUFBQSxpQ0FMQUMsUUFLQTtBQUFBLFlBTEFBLFFBS0EseURBTFcsRUFLWDtBQUFBLGtDQUpBQSxRQUlBO0FBQUEsZ0ZBSitCLEVBSS9CO0FBQUEsWUFKb0JDLElBSXBCLGtCQUpZQyxJQUlaLENBSm9CRCxJQUlwQjtBQUFBLFlBSEFFLFVBR0EsUUFIQUEsVUFHQTtBQUFBLG1DQUZBQSxVQUVBO0FBQUEsa0ZBRndELEVBRXhEO0FBQUEsWUFGY0MsV0FFZCxtQkFGY0EsV0FFZDtBQUFBLFlBRjJCQyxVQUUzQixtQkFGMkJBLFVBRTNCO0FBQUEsWUFGdUNDLFlBRXZDLG1CQUZ1Q0EsWUFFdkM7QUFBQTtBQUFBO0FBQUEsMENBQUFMLElBQUksS0FBSyxNQUFULGdDQUFtQixDQUFDLFVBQVdNLElBQVgsQ0FBZ0JILFdBQWhCLENBQXBCLGdDQUFvRCxDQUFDRSxZQUFyRCwrQkFDRSw2QkFBQyx5QkFBRDtBQUFrQixVQUFBLFFBQVEsRUFBRU4sUUFBNUI7QUFBc0MsVUFBQSxVQUFVLEVBQUVHO0FBQWxELFVBREYsK0JBRUksV0FBWUksSUFBWixDQUFpQkgsV0FBakIsK0JBQ0YsNkJBQUMsd0JBQUQ7QUFBaUIsVUFBQSxRQUFRLEVBQUVKLFFBQTNCO0FBQXFDLFVBQUEsVUFBVSxFQUFFRztBQUFqRCxVQURFLCtCQUVBLFdBQVlJLElBQVosQ0FBaUJILFdBQWpCLCtCQUNGLDZCQUFDLHdCQUFEO0FBQWlCLFVBQUEsUUFBUSxFQUFFSixRQUEzQjtBQUFxQyxVQUFBLFVBQVUsRUFBRUc7QUFBakQsVUFERSwrQkFFQSxXQUFZSSxJQUFaLENBQWlCSCxXQUFqQiwrQkFDRiw2QkFBQyx3QkFBRDtBQUFpQixVQUFBLFFBQVEsRUFBRUosUUFBM0I7QUFBcUMsVUFBQSxVQUFVLEVBQUVHO0FBQWpELFVBREUsK0JBRUEsMkJBQUFFLFVBQVUsZ0NBQUlELFdBQVcsS0FBSywwQkFBcEIsQ0FBViw4QkFDRiw2QkFBQywyQkFBRDtBQUFvQixVQUFBLFFBQVEsRUFBRUosUUFBOUI7QUFBd0MsVUFBQSxVQUFVLEVBQUVHO0FBQXBELFVBREUsK0JBRUEsVUFBV0ksSUFBWCxDQUFnQkgsV0FBaEIsZ0NBQ0YsNkJBQUMsdUJBQUQ7QUFBZ0IsVUFBQSxRQUFRLEVBQUVKLFFBQTFCO0FBQW9DLFVBQUEsVUFBVSxFQUFFRztBQUFoRCxVQURFLGdDQUdGTCxJQUFJLENBQUM7QUFBRUUsVUFBQUEsUUFBUSxFQUFSQSxRQUFGO0FBQVlHLFVBQUFBLFVBQVUsRUFBVkE7QUFBWixTQUFELENBSEYsQ0FGQSxDQUZBLENBRkEsQ0FGQSxDQUZKO0FBY0MsT0FwQkg7O0FBRG1CO0FBdUJuQkosTUFBQUEsVUFBVSxDQUFDUyxTQUFYLEdBQXVCO0FBQ3JCUixRQUFBQSxRQUFRLEVBQUVTLG1CQUFVQyxHQUFWLENBQWNDLFVBREg7QUFFckJSLFFBQUFBLFVBQVUsRUFBRU0sbUJBQVVHLEtBQVYsQ0FBZ0I7QUFDMUJSLFVBQUFBLFdBQVcsRUFBRUssbUJBQVVJLE1BQVYsQ0FBaUJGLFVBREo7QUFFMUJOLFVBQUFBLFVBQVUsRUFBRUksbUJBQVVJLE1BQVYsQ0FBaUJGO0FBRkgsU0FBaEIsRUFHVEE7QUFMa0IsT0FBdkI7QUF2Qm1CO0FBK0JuQixhQUFPWixVQUFQO0FBQ0QsS0FoQ1k7QUFnQ1osR0FoQ0Q7QUFpQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IEF1ZGlvQXR0YWNobWVudCBmcm9tICcuLi8uLi9BdHRhY2htZW50L0F1ZGlvQXR0YWNobWVudCc7XG5pbXBvcnQgRG93bmxvYWRBdHRhY2htZW50IGZyb20gJy4uLy4uL0F0dGFjaG1lbnQvRG93bmxvYWRBdHRhY2htZW50JztcbmltcG9ydCBJbWFnZUF0dGFjaG1lbnQgZnJvbSAnLi4vLi4vQXR0YWNobWVudC9JbWFnZUF0dGFjaG1lbnQnO1xuaW1wb3J0IFVwbG9hZEF0dGFjaG1lbnQgZnJvbSAnLi4vLi4vQXR0YWNobWVudC9VcGxvYWRBdHRhY2htZW50JztcbmltcG9ydCBUZXh0QXR0YWNobWVudCBmcm9tICcuLi8uLi9BdHRhY2htZW50L1RleHRBdHRhY2htZW50JztcbmltcG9ydCBWaWRlb0F0dGFjaG1lbnQgZnJvbSAnLi4vLi4vQXR0YWNobWVudC9WaWRlb0F0dGFjaG1lbnQnO1xuXG4vLyBUT0RPOiBbUDRdIFJlbmFtZSB0aGlzIGZpbGUgb3IgdGhlIHdob2xlIG1pZGRsZXdhcmUsIGl0IGxvb2tzIGVpdGhlciB0b28gc2ltcGxlIG9yIHRvbyBjb21wcmVoZW5zaXZlIG5vd1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlQ29yZU1pZGRsZXdhcmUoKSB7XG4gIHJldHVybiAoKSA9PiBuZXh0ID0+IHtcbiAgICBjb25zdCBBdHRhY2htZW50ID0gKHtcbiAgICAgIGFjdGl2aXR5ID0ge30sXG4gICAgICBhY3Rpdml0eTogeyBmcm9tOiB7IHJvbGUgfSB9ID0ge30sXG4gICAgICBhdHRhY2htZW50LFxuICAgICAgYXR0YWNobWVudDogeyBjb250ZW50VHlwZSwgY29udGVudFVybCwgdGh1bWJuYWlsVXJsIH0gPSB7fVxuICAgIH0pID0+XG4gICAgICByb2xlID09PSAndXNlcicgJiYgIS9edGV4dFxcLy91LnRlc3QoY29udGVudFR5cGUpICYmICF0aHVtYm5haWxVcmwgPyAoXG4gICAgICAgIDxVcGxvYWRBdHRhY2htZW50IGFjdGl2aXR5PXthY3Rpdml0eX0gYXR0YWNobWVudD17YXR0YWNobWVudH0gLz5cbiAgICAgICkgOiAvXmF1ZGlvXFwvL3UudGVzdChjb250ZW50VHlwZSkgPyAoXG4gICAgICAgIDxBdWRpb0F0dGFjaG1lbnQgYWN0aXZpdHk9e2FjdGl2aXR5fSBhdHRhY2htZW50PXthdHRhY2htZW50fSAvPlxuICAgICAgKSA6IC9eaW1hZ2VcXC8vdS50ZXN0KGNvbnRlbnRUeXBlKSA/IChcbiAgICAgICAgPEltYWdlQXR0YWNobWVudCBhY3Rpdml0eT17YWN0aXZpdHl9IGF0dGFjaG1lbnQ9e2F0dGFjaG1lbnR9IC8+XG4gICAgICApIDogL152aWRlb1xcLy91LnRlc3QoY29udGVudFR5cGUpID8gKFxuICAgICAgICA8VmlkZW9BdHRhY2htZW50IGFjdGl2aXR5PXthY3Rpdml0eX0gYXR0YWNobWVudD17YXR0YWNobWVudH0gLz5cbiAgICAgICkgOiBjb250ZW50VXJsIHx8IGNvbnRlbnRUeXBlID09PSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyA/IChcbiAgICAgICAgPERvd25sb2FkQXR0YWNobWVudCBhY3Rpdml0eT17YWN0aXZpdHl9IGF0dGFjaG1lbnQ9e2F0dGFjaG1lbnR9IC8+XG4gICAgICApIDogL150ZXh0XFwvL3UudGVzdChjb250ZW50VHlwZSkgPyAoXG4gICAgICAgIDxUZXh0QXR0YWNobWVudCBhY3Rpdml0eT17YWN0aXZpdHl9IGF0dGFjaG1lbnQ9e2F0dGFjaG1lbnR9IC8+XG4gICAgICApIDogKFxuICAgICAgICBuZXh0KHsgYWN0aXZpdHksIGF0dGFjaG1lbnQgfSlcbiAgICAgICk7XG5cbiAgICBBdHRhY2htZW50LnByb3BUeXBlcyA9IHtcbiAgICAgIGFjdGl2aXR5OiBQcm9wVHlwZXMuYW55LmlzUmVxdWlyZWQsXG4gICAgICBhdHRhY2htZW50OiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICBjb250ZW50VHlwZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICBjb250ZW50VXJsOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcbiAgICAgIH0pLmlzUmVxdWlyZWRcbiAgICB9O1xuXG4gICAgcmV0dXJuIEF0dGFjaG1lbnQ7XG4gIH07XG59XG4iXX0=
