'use strict';

var cov_5ceb091o1 = (function() {
  var path = '/home/guy/leo/BotFramework-WebChat/packages/component/src/Activity/Bubble.js';
  var hash = '5260f452e645ef8f37261d1b317d8434d5b67767';
  var global = new Function('return this')();
  var gcv = '__coverage__';
  var coverageData = {
    path: '/home/guy/leo/BotFramework-WebChat/packages/component/src/Activity/Bubble.js',
    statementMap: {
      '0': {
        start: {
          line: 11,
          column: 17
        },
        end: {
          line: 22,
          column: 2
        }
      },
      '1': {
        start: {
          line: 25,
          column: 2
        },
        end: {
          line: 27,
          column: 3
        }
      },
      '2': {
        start: {
          line: 26,
          column: 4
        },
        end: {
          line: 26,
          column: 17
        }
      },
      '3': {
        start: {
          line: 29,
          column: 22
        },
        end: {
          line: 29,
          column: 33
        }
      },
      '4': {
        start: {
          line: 30,
          column: 26
        },
        end: {
          line: 30,
          column: 41
        }
      },
      '5': {
        start: {
          line: 34,
          column: 4
        },
        end: {
          line: 34,
          column: 96
        }
      },
      '6': {
        start: {
          line: 37,
          column: 28
        },
        end: {
          line: 37,
          column: 116
        }
      },
      '7': {
        start: {
          line: 39,
          column: 13
        },
        end: {
          line: 39,
          column: 49
        }
      },
      '8': {
        start: {
          line: 40,
          column: 13
        },
        end: {
          line: 40,
          column: 53
        }
      },
      '9': {
        start: {
          line: 41,
          column: 13
        },
        end: {
          line: 41,
          column: 73
        }
      },
      '10': {
        start: {
          line: 43,
          column: 2
        },
        end: {
          line: 54,
          column: 4
        }
      },
      '11': {
        start: {
          line: 58,
          column: 2
        },
        end: {
          line: 58,
          column: 24
        }
      },
      '12': {
        start: {
          line: 61,
          column: 15
        },
        end: {
          line: 103,
          column: 1
        }
      },
      '13': {
        start: {
          line: 62,
          column: 39
        },
        end: {
          line: 62,
          column: 52
        }
      },
      '14': {
        start: {
          line: 73,
          column: 6
        },
        end: {
          line: 73,
          column: 23
        }
      },
      '15': {
        start: {
          line: 75,
          column: 52
        },
        end: {
          line: 87,
          column: 7
        }
      },
      '16': {
        start: {
          line: 89,
          column: 2
        },
        end: {
          line: 102,
          column: 4
        }
      },
      '17': {
        start: {
          line: 105,
          column: 0
        },
        end: {
          line: 111,
          column: 2
        }
      },
      '18': {
        start: {
          line: 113,
          column: 0
        },
        end: {
          line: 119,
          column: 2
        }
      }
    },
    fnMap: {
      '0': {
        name: 'acuteNubSVG',
        decl: {
          start: {
            line: 24,
            column: 9
          },
          end: {
            line: 24,
            column: 20
          }
        },
        loc: {
          start: {
            line: 24,
            column: 69
          },
          end: {
            line: 55,
            column: 1
          }
        },
        line: 24
      },
      '1': {
        name: 'isPositive',
        decl: {
          start: {
            line: 57,
            column: 9
          },
          end: {
            line: 57,
            column: 19
          }
        },
        loc: {
          start: {
            line: 57,
            column: 27
          },
          end: {
            line: 59,
            column: 1
          }
        },
        line: 57
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 61,
            column: 15
          },
          end: {
            line: 61,
            column: 16
          }
        },
        loc: {
          start: {
            line: 61,
            column: 86
          },
          end: {
            line: 103,
            column: 1
          }
        },
        line: 61
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 24,
            column: 49
          },
          end: {
            line: 24,
            column: 67
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 24,
              column: 62
            },
            end: {
              line: 24,
              column: 67
            }
          }
        ],
        line: 24
      },
      '1': {
        loc: {
          start: {
            line: 25,
            column: 2
          },
          end: {
            line: 27,
            column: 3
          }
        },
        type: 'if',
        locations: [
          {
            start: {
              line: 25,
              column: 2
            },
            end: {
              line: 27,
              column: 3
            }
          },
          {
            start: {
              line: 25,
              column: 2
            },
            end: {
              line: 27,
              column: 3
            }
          }
        ],
        line: 25
      },
      '2': {
        loc: {
          start: {
            line: 34,
            column: 4
          },
          end: {
            line: 34,
            column: 96
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 34,
              column: 21
            },
            end: {
              line: 34,
              column: 23
            }
          },
          {
            start: {
              line: 34,
              column: 26
            },
            end: {
              line: 34,
              column: 96
            }
          }
        ],
        line: 34
      },
      '3': {
        loc: {
          start: {
            line: 37,
            column: 28
          },
          end: {
            line: 37,
            column: 116
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 37,
              column: 41
            },
            end: {
              line: 37,
              column: 111
            }
          },
          {
            start: {
              line: 37,
              column: 114
            },
            end: {
              line: 37,
              column: 116
            }
          }
        ],
        line: 37
      },
      '4': {
        loc: {
          start: {
            line: 75,
            column: 52
          },
          end: {
            line: 87,
            column: 7
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 76,
              column: 6
            },
            end: {
              line: 81,
              column: 7
            }
          },
          {
            start: {
              line: 82,
              column: 6
            },
            end: {
              line: 87,
              column: 7
            }
          }
        ],
        line: 75
      },
      '5': {
        loc: {
          start: {
            line: 96,
            column: 8
          },
          end: {
            line: 96,
            column: 28
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 96,
              column: 8
            },
            end: {
              line: 96,
              column: 22
            }
          },
          {
            start: {
              line: 96,
              column: 26
            },
            end: {
              line: 96,
              column: 28
            }
          }
        ],
        line: 96
      },
      '6': {
        loc: {
          start: {
            line: 100,
            column: 7
          },
          end: {
            line: 100,
            column: 77
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 100,
              column: 7
            },
            end: {
              line: 100,
              column: 10
            }
          },
          {
            start: {
              line: 100,
              column: 14
            },
            end: {
              line: 100,
              column: 77
            }
          }
        ],
        line: 100
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0
    },
    b: {
      '0': [0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0],
      '6': [0, 0]
    },
    _coverageSchema: '43e27e138ebf9cfc5966b082cf9a028302ed4184',
    hash: '5260f452e645ef8f37261d1b317d8434d5b67767'
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  return (coverage[path] = coverageData);
})();

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = void 0;

var _glamor = require('glamor');

var _classnames = _interopRequireDefault(require('classnames'));

var _propTypes = _interopRequireDefault(require('prop-types'));

var _react = _interopRequireDefault(require('react'));

var _useStyleOptions = _interopRequireDefault(require('../hooks/useStyleOptions'));

var _useStyleSet = _interopRequireDefault(require('../hooks/useStyleSet'));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();
}

function _nonIterableRest() {
  throw new TypeError('Invalid attempt to destructure non-iterable instance');
}

function _iterableToArrayLimit(arr, i) {
  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === '[object Arguments]')) {
    return;
  }
  var _arr = [];
  var _n = true;
  var _d = false;
  var _e = undefined;
  try {
    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);
      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i['return'] != null) _i['return']();
    } finally {
      if (_d) throw _e;
    }
  }
  return _arr;
}

function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}

var ROOT_CSS =
  (cov_5ceb091o1.s[0]++,
  (0, _glamor.css)({
    position: 'relative',
    '& > .webchat__bubble__content': {
      // This is for hiding content outside of the bubble, for example, content outside of border radius
      overflow: 'hidden'
    },
    '& > .webchat__bubble__nub': {
      position: 'absolute'
    }
  }));

function acuteNubSVG(nubSize, strokeWidth, side) {
  var upSideDown = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : (cov_5ceb091o1.b[0][0]++, false);
  cov_5ceb091o1.f[0]++;
  cov_5ceb091o1.s[1]++;

  if (!nubSize) {
    cov_5ceb091o1.b[1][0]++;
    cov_5ceb091o1.s[2]++;
    return false;
  } else {
    cov_5ceb091o1.b[1][1]++;
  }

  var halfNubSize = (cov_5ceb091o1.s[3]++, nubSize / 2);
  var halfStrokeWidth = (cov_5ceb091o1.s[4]++, strokeWidth / 2); // Horizontally mirror the nub if it is from user

  var horizontalTransform =
    (cov_5ceb091o1.s[5]++,
    side === 'bot'
      ? (cov_5ceb091o1.b[2][0]++, '')
      : (cov_5ceb091o1.b[2][1]++,
        'translate('.concat(halfNubSize, ' 0) scale(-1 1) translate(').concat(-halfNubSize, ' 0)'))); // Vertically mirror the nub if it is up-side-down

  var verticalTransform =
    (cov_5ceb091o1.s[6]++,
    upSideDown
      ? (cov_5ceb091o1.b[3][0]++,
        'translate(0 '.concat(halfNubSize, ') scale(1 -1) translate(0 ').concat(-halfNubSize, ')'))
      : (cov_5ceb091o1.b[3][1]++, ''));
  var p1 = (cov_5ceb091o1.s[7]++, [nubSize, halfStrokeWidth].join(' '));
  var p2 = (cov_5ceb091o1.s[8]++, [strokeWidth, halfStrokeWidth].join(' '));
  var p3 = (cov_5ceb091o1.s[9]++, [nubSize + strokeWidth, nubSize + halfStrokeWidth].join(' '));
  cov_5ceb091o1.s[10]++;
  return _react.default.createElement(
    'svg',
    {
      className: 'webchat__bubble__nub',
      version: '1.1',
      viewBox: '0 0 '.concat(nubSize, ' ').concat(nubSize),
      xmlns: 'http://www.w3.org/2000/svg'
    },
    _react.default.createElement(
      'g',
      {
        transform: ''.concat(horizontalTransform, ' ').concat(verticalTransform)
      },
      _react.default.createElement('path', {
        d: 'M'
          .concat(p1, ' L')
          .concat(p2, ' L')
          .concat(p3)
      })
    )
  );
}

function isPositive(value) {
  cov_5ceb091o1.f[1]++;
  cov_5ceb091o1.s[11]++;
  return 1 / value >= 0;
}

cov_5ceb091o1.s[12]++;

var Bubble = function Bubble(_ref) {
  var ariaHidden = _ref['aria-hidden'],
    children = _ref.children,
    className = _ref.className,
    fromUser = _ref.fromUser,
    nub = _ref.nub;
  cov_5ceb091o1.f[2]++;

  var _ref2 = (cov_5ceb091o1.s[13]++, (0, _useStyleSet.default)()),
    _ref3 = _slicedToArray(_ref2, 1),
    bubbleStyleSet = _ref3[0].bubble;

  var _ref4 = (cov_5ceb091o1.s[14]++, (0, _useStyleOptions.default)()),
    _ref5 = _slicedToArray(_ref4, 1),
    _ref5$ = _ref5[0],
    bubbleBorderWidth = _ref5$.bubbleBorderWidth,
    bubbleFromUserBorderWidth = _ref5$.bubbleFromUserBorderWidth,
    bubbleFromUserNubSize = _ref5$.bubbleFromUserNubSize,
    bubbleNubSize = _ref5$.bubbleNubSize,
    bubbleNubOffset = _ref5$.bubbleNubOffset,
    bubbleFromUserNubOffset = _ref5$.bubbleFromUserNubOffset;

  var _ref6 =
      (cov_5ceb091o1.s[15]++,
      fromUser
        ? (cov_5ceb091o1.b[4][0]++,
          {
            borderWidth: bubbleFromUserBorderWidth,
            nubOffset: bubbleFromUserNubOffset,
            nubSize: bubbleFromUserNubSize,
            side: 'user'
          })
        : (cov_5ceb091o1.b[4][1]++,
          {
            borderWidth: bubbleBorderWidth,
            nubOffset: bubbleNubOffset,
            nubSize: bubbleNubSize,
            side: 'bot'
          })),
    borderWidth = _ref6.borderWidth,
    nubOffset = _ref6.nubOffset,
    nubSize = _ref6.nubSize,
    side = _ref6.side;

  cov_5ceb091o1.s[16]++;
  return _react.default.createElement(
    'div',
    {
      'aria-hidden': ariaHidden,
      className: (0, _classnames.default)(
        ROOT_CSS + '',
        bubbleStyleSet + '',
        {
          'from-user': fromUser,
          webchat__bubble_has_nub: nub
        },
        (cov_5ceb091o1.b[5][0]++, className + '') || (cov_5ceb091o1.b[5][1]++, '')
      )
    },
    _react.default.createElement(
      'div',
      {
        className: 'webchat__bubble__content'
      },
      children
    ),
    (cov_5ceb091o1.b[6][0]++, nub) &&
      (cov_5ceb091o1.b[6][1]++, acuteNubSVG(nubSize, borderWidth, side, !isPositive(nubOffset)))
  );
};

cov_5ceb091o1.s[17]++;
Bubble.defaultProps = {
  'aria-hidden': false,
  children: undefined,
  className: '',
  fromUser: false,
  nub: true
};
cov_5ceb091o1.s[18]++;
Bubble.propTypes = {
  'aria-hidden': _propTypes.default.bool,
  children: _propTypes.default.any,
  className: _propTypes.default.string,
  fromUser: _propTypes.default.bool,
  nub: _propTypes.default.bool
};
var _default = Bubble;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9BY3Rpdml0eS9CdWJibGUuanMiXSwibmFtZXMiOlsiUk9PVF9DU1MiLCJwb3NpdGlvbiIsIm92ZXJmbG93IiwiYWN1dGVOdWJTVkciLCJudWJTaXplIiwic3Ryb2tlV2lkdGgiLCJzaWRlIiwidXBTaWRlRG93biIsImhhbGZOdWJTaXplIiwiaGFsZlN0cm9rZVdpZHRoIiwiaG9yaXpvbnRhbFRyYW5zZm9ybSIsInZlcnRpY2FsVHJhbnNmb3JtIiwicDEiLCJqb2luIiwicDIiLCJwMyIsImlzUG9zaXRpdmUiLCJ2YWx1ZSIsIkJ1YmJsZSIsImFyaWFIaWRkZW4iLCJjaGlsZHJlbiIsImNsYXNzTmFtZSIsImZyb21Vc2VyIiwibnViIiwiYnViYmxlU3R5bGVTZXQiLCJidWJibGUiLCJidWJibGVCb3JkZXJXaWR0aCIsImJ1YmJsZUZyb21Vc2VyQm9yZGVyV2lkdGgiLCJidWJibGVGcm9tVXNlck51YlNpemUiLCJidWJibGVOdWJTaXplIiwiYnViYmxlTnViT2Zmc2V0IiwiYnViYmxlRnJvbVVzZXJOdWJPZmZzZXQiLCJib3JkZXJXaWR0aCIsIm51Yk9mZnNldCIsIndlYmNoYXRfX2J1YmJsZV9oYXNfbnViIiwiZGVmYXVsdFByb3BzIiwidW5kZWZpbmVkIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwiYm9vbCIsImFueSIsInN0cmluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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U0FBUyxFQUFDO0FBQWYsS0FBMkNELFFBQTNDLENBVEYsRUFVRywwQkFBQUcsR0FBRywrQkFBSXBCLFdBQVcsQ0FBQ0MsT0FBRCxFQUFVNEIsV0FBVixFQUF1QjFCLElBQXZCLEVBQTZCLENBQUNVLFVBQVUsQ0FBQ2lCLFNBQUQsQ0FBeEMsQ0FBZixDQVZOLENBREY7QUFjRCxDQTFDRDs7O0FBNENBZixNQUFNLENBQUNpQixZQUFQLEdBQXNCO0FBQ3BCLGlCQUFlLEtBREs7QUFFcEJmLEVBQUFBLFFBQVEsRUFBRWdCLFNBRlU7QUFHcEJmLEVBQUFBLFNBQVMsRUFBRSxFQUhTO0FBSXBCQyxFQUFBQSxRQUFRLEVBQUUsS0FKVTtBQUtwQkMsRUFBQUEsR0FBRyxFQUFFO0FBTGUsQ0FBdEI7O0FBUUFMLE1BQU0sQ0FBQ21CLFNBQVAsR0FBbUI7QUFDakIsaUJBQWVDLG1CQUFVQyxJQURSO0FBRWpCbkIsRUFBQUEsUUFBUSxFQUFFa0IsbUJBQVVFLEdBRkg7QUFHakJuQixFQUFBQSxTQUFTLEVBQUVpQixtQkFBVUcsTUFISjtBQUlqQm5CLEVBQUFBLFFBQVEsRUFBRWdCLG1CQUFVQyxJQUpIO0FBS2pCaEIsRUFBQUEsR0FBRyxFQUFFZSxtQkFBVUM7QUFMRSxDQUFuQjtlQVFlckIsTSIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludCBuby1tYWdpYy1udW1iZXJzOiBbXCJlcnJvclwiLCB7IFwiaWdub3JlXCI6IFstMSwgMCwgMSwgMiwgMTBdIH1dICovXG5cbmltcG9ydCB7IGNzcyB9IGZyb20gJ2dsYW1vcic7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgdXNlU3R5bGVPcHRpb25zIGZyb20gJy4uL2hvb2tzL3VzZVN0eWxlT3B0aW9ucyc7XG5pbXBvcnQgdXNlU3R5bGVTZXQgZnJvbSAnLi4vaG9va3MvdXNlU3R5bGVTZXQnO1xuXG5jb25zdCBST09UX0NTUyA9IGNzcyh7XG4gIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuXG4gICcmID4gLndlYmNoYXRfX2J1YmJsZV9fY29udGVudCc6IHtcbiAgICAvLyBUaGlzIGlzIGZvciBoaWRpbmcgY29udGVudCBvdXRzaWRlIG9mIHRoZSBidWJibGUsIGZvciBleGFtcGxlLCBjb250ZW50IG91dHNpZGUgb2YgYm9yZGVyIHJhZGl1c1xuICAgIG92ZXJmbG93OiAnaGlkZGVuJ1xuICB9LFxuXG4gICcmID4gLndlYmNoYXRfX2J1YmJsZV9fbnViJzoge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnXG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBhY3V0ZU51YlNWRyhudWJTaXplLCBzdHJva2VXaWR0aCwgc2lkZSwgdXBTaWRlRG93biA9IGZhbHNlKSB7XG4gIGlmICghbnViU2l6ZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IGhhbGZOdWJTaXplID0gbnViU2l6ZSAvIDI7XG4gIGNvbnN0IGhhbGZTdHJva2VXaWR0aCA9IHN0cm9rZVdpZHRoIC8gMjtcblxuICAvLyBIb3Jpem9udGFsbHkgbWlycm9yIHRoZSBudWIgaWYgaXQgaXMgZnJvbSB1c2VyXG4gIGNvbnN0IGhvcml6b250YWxUcmFuc2Zvcm0gPVxuICAgIHNpZGUgPT09ICdib3QnID8gJycgOiBgdHJhbnNsYXRlKCR7aGFsZk51YlNpemV9IDApIHNjYWxlKC0xIDEpIHRyYW5zbGF0ZSgkey1oYWxmTnViU2l6ZX0gMClgO1xuXG4gIC8vIFZlcnRpY2FsbHkgbWlycm9yIHRoZSBudWIgaWYgaXQgaXMgdXAtc2lkZS1kb3duXG4gIGNvbnN0IHZlcnRpY2FsVHJhbnNmb3JtID0gdXBTaWRlRG93biA/IGB0cmFuc2xhdGUoMCAke2hhbGZOdWJTaXplfSkgc2NhbGUoMSAtMSkgdHJhbnNsYXRlKDAgJHstaGFsZk51YlNpemV9KWAgOiAnJztcblxuICBjb25zdCBwMSA9IFtudWJTaXplLCBoYWxmU3Ryb2tlV2lkdGhdLmpvaW4oJyAnKTtcbiAgY29uc3QgcDIgPSBbc3Ryb2tlV2lkdGgsIGhhbGZTdHJva2VXaWR0aF0uam9pbignICcpO1xuICBjb25zdCBwMyA9IFtudWJTaXplICsgc3Ryb2tlV2lkdGgsIG51YlNpemUgKyBoYWxmU3Ryb2tlV2lkdGhdLmpvaW4oJyAnKTtcblxuICByZXR1cm4gKFxuICAgIDxzdmdcbiAgICAgIGNsYXNzTmFtZT1cIndlYmNoYXRfX2J1YmJsZV9fbnViXCJcbiAgICAgIHZlcnNpb249XCIxLjFcIlxuICAgICAgdmlld0JveD17YDAgMCAke251YlNpemV9ICR7bnViU2l6ZX1gfVxuICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgPlxuICAgICAgPGcgdHJhbnNmb3JtPXtgJHtob3Jpem9udGFsVHJhbnNmb3JtfSAke3ZlcnRpY2FsVHJhbnNmb3JtfWB9PlxuICAgICAgICA8cGF0aCBkPXtgTSR7cDF9IEwke3AyfSBMJHtwM31gfSAvPlxuICAgICAgPC9nPlxuICAgIDwvc3ZnPlxuICApO1xufVxuXG5mdW5jdGlvbiBpc1Bvc2l0aXZlKHZhbHVlKSB7XG4gIHJldHVybiAxIC8gdmFsdWUgPj0gMDtcbn1cblxuY29uc3QgQnViYmxlID0gKHsgJ2FyaWEtaGlkZGVuJzogYXJpYUhpZGRlbiwgY2hpbGRyZW4sIGNsYXNzTmFtZSwgZnJvbVVzZXIsIG51YiB9KSA9PiB7XG4gIGNvbnN0IFt7IGJ1YmJsZTogYnViYmxlU3R5bGVTZXQgfV0gPSB1c2VTdHlsZVNldCgpO1xuXG4gIGNvbnN0IFtcbiAgICB7XG4gICAgICBidWJibGVCb3JkZXJXaWR0aCxcbiAgICAgIGJ1YmJsZUZyb21Vc2VyQm9yZGVyV2lkdGgsXG4gICAgICBidWJibGVGcm9tVXNlck51YlNpemUsXG4gICAgICBidWJibGVOdWJTaXplLFxuICAgICAgYnViYmxlTnViT2Zmc2V0LFxuICAgICAgYnViYmxlRnJvbVVzZXJOdWJPZmZzZXRcbiAgICB9XG4gIF0gPSB1c2VTdHlsZU9wdGlvbnMoKTtcblxuICBjb25zdCB7IGJvcmRlcldpZHRoLCBudWJPZmZzZXQsIG51YlNpemUsIHNpZGUgfSA9IGZyb21Vc2VyXG4gICAgPyB7XG4gICAgICAgIGJvcmRlcldpZHRoOiBidWJibGVGcm9tVXNlckJvcmRlcldpZHRoLFxuICAgICAgICBudWJPZmZzZXQ6IGJ1YmJsZUZyb21Vc2VyTnViT2Zmc2V0LFxuICAgICAgICBudWJTaXplOiBidWJibGVGcm9tVXNlck51YlNpemUsXG4gICAgICAgIHNpZGU6ICd1c2VyJ1xuICAgICAgfVxuICAgIDoge1xuICAgICAgICBib3JkZXJXaWR0aDogYnViYmxlQm9yZGVyV2lkdGgsXG4gICAgICAgIG51Yk9mZnNldDogYnViYmxlTnViT2Zmc2V0LFxuICAgICAgICBudWJTaXplOiBidWJibGVOdWJTaXplLFxuICAgICAgICBzaWRlOiAnYm90J1xuICAgICAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGFyaWEtaGlkZGVuPXthcmlhSGlkZGVufVxuICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICBST09UX0NTUyArICcnLFxuICAgICAgICBidWJibGVTdHlsZVNldCArICcnLFxuICAgICAgICB7ICdmcm9tLXVzZXInOiBmcm9tVXNlciwgd2ViY2hhdF9fYnViYmxlX2hhc19udWI6IG51YiB9LFxuICAgICAgICBjbGFzc05hbWUgKyAnJyB8fCAnJ1xuICAgICAgKX1cbiAgICA+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIndlYmNoYXRfX2J1YmJsZV9fY29udGVudFwiPntjaGlsZHJlbn08L2Rpdj5cbiAgICAgIHtudWIgJiYgYWN1dGVOdWJTVkcobnViU2l6ZSwgYm9yZGVyV2lkdGgsIHNpZGUsICFpc1Bvc2l0aXZlKG51Yk9mZnNldCkpfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuQnViYmxlLmRlZmF1bHRQcm9wcyA9IHtcbiAgJ2FyaWEtaGlkZGVuJzogZmFsc2UsXG4gIGNoaWxkcmVuOiB1bmRlZmluZWQsXG4gIGNsYXNzTmFtZTogJycsXG4gIGZyb21Vc2VyOiBmYWxzZSxcbiAgbnViOiB0cnVlXG59O1xuXG5CdWJibGUucHJvcFR5cGVzID0ge1xuICAnYXJpYS1oaWRkZW4nOiBQcm9wVHlwZXMuYm9vbCxcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5hbnksXG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgZnJvbVVzZXI6IFByb3BUeXBlcy5ib29sLFxuICBudWI6IFByb3BUeXBlcy5ib29sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBCdWJibGU7XG4iXX0=
