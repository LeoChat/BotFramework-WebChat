'use strict';

var cov_tutjemcux = (function() {
  var path = '/home/guy/leo/BotFramework-WebChat/packages/component/src/Activity/StackedLayout.js';
  var hash = '934ee661e2b04ce49be560176ecaa56f3d07f4f2';
  var global = new Function('return this')();
  var gcv = '__coverage__';
  var coverageData = {
    path: '/home/guy/leo/BotFramework-WebChat/packages/component/src/Activity/StackedLayout.js',
    statementMap: {
      '0': {
        start: {
          line: 25,
          column: 4
        },
        end: {
          line: 25,
          column: 13
        }
      },
      '1': {
        start: {
          line: 27,
          column: 17
        },
        end: {
          line: 64,
          column: 2
        }
      },
      '2': {
        start: {
          line: 66,
          column: 29
        },
        end: {
          line: 85,
          column: 3
        }
      },
      '3': {
        start: {
          line: 67,
          column: 2
        },
        end: {
          line: 85,
          column: 3
        }
      },
      '4': {
        start: {
          line: 76,
          column: 10
        },
        end: {
          line: 83,
          column: 5
        }
      },
      '5': {
        start: {
          line: 87,
          column: 22
        },
        end: {
          line: 169,
          column: 1
        }
      },
      '6': {
        start: {
          line: 88,
          column: 92
        },
        end: {
          line: 88,
          column: 109
        }
      },
      '7': {
        start: {
          line: 89,
          column: 53
        },
        end: {
          line: 89,
          column: 66
        }
      },
      '8': {
        start: {
          line: 97,
          column: 6
        },
        end: {
          line: 97,
          column: 14
        }
      },
      '9': {
        start: {
          line: 99,
          column: 30
        },
        end: {
          line: 99,
          column: 60
        }
      },
      '10': {
        start: {
          line: 100,
          column: 19
        },
        end: {
          line: 100,
          column: 34
        }
      },
      '11': {
        start: {
          line: 101,
          column: 25
        },
        end: {
          line: 101,
          column: 67
        }
      },
      '12': {
        start: {
          line: 102,
          column: 20
        },
        end: {
          line: 104,
          column: 22
        }
      },
      '13': {
        start: {
          line: 105,
          column: 19
        },
        end: {
          line: 105,
          column: 67
        }
      },
      '14': {
        start: {
          line: 107,
          column: 23
        },
        end: {
          line: 107,
          column: 45
        }
      },
      '15': {
        start: {
          line: 108,
          column: 24
        },
        end: {
          line: 108,
          column: 47
        }
      },
      '16': {
        start: {
          line: 110,
          column: 20
        },
        end: {
          line: 110,
          column: 59
        }
      },
      '17': {
        start: {
          line: 112,
          column: 23
        },
        end: {
          line: 112,
          column: 83
        }
      },
      '18': {
        start: {
          line: 113,
          column: 24
        },
        end: {
          line: 113,
          column: 85
        }
      },
      '19': {
        start: {
          line: 115,
          column: 20
        },
        end: {
          line: 115,
          column: 59
        }
      },
      '20': {
        start: {
          line: 117,
          column: 2
        },
        end: {
          line: 168,
          column: 4
        }
      },
      '21': {
        start: {
          line: 146,
          column: 10
        },
        end: {
          line: 155,
          column: 16
        }
      },
      '22': {
        start: {
          line: 171,
          column: 0
        },
        end: {
          line: 174,
          column: 2
        }
      },
      '23': {
        start: {
          line: 176,
          column: 0
        },
        end: {
          line: 195,
          column: 2
        }
      },
      '24': {
        start: {
          line: 197,
          column: 61
        },
        end: {
          line: 199,
          column: 1
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 66,
            column: 29
          },
          end: {
            line: 66,
            column: 30
          }
        },
        loc: {
          start: {
            line: 67,
            column: 2
          },
          end: {
            line: 85,
            column: 3
          }
        },
        line: 67
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 68,
            column: 4
          },
          end: {
            line: 68,
            column: 5
          }
        },
        loc: {
          start: {
            line: 76,
            column: 10
          },
          end: {
            line: 83,
            column: 5
          }
        },
        line: 76
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 87,
            column: 22
          },
          end: {
            line: 87,
            column: 23
          }
        },
        loc: {
          start: {
            line: 87,
            column: 86
          },
          end: {
            line: 169,
            column: 1
          }
        },
        line: 87
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 145,
            column: 25
          },
          end: {
            line: 145,
            column: 26
          }
        },
        loc: {
          start: {
            line: 146,
            column: 10
          },
          end: {
            line: 155,
            column: 16
          }
        },
        line: 146
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 197,
            column: 36
          },
          end: {
            line: 197,
            column: 37
          }
        },
        loc: {
          start: {
            line: 197,
            column: 61
          },
          end: {
            line: 199,
            column: 1
          }
        },
        line: 197
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 75,
            column: 18
          },
          end: {
            line: 75,
            column: 46
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 75,
              column: 44
            },
            end: {
              line: 75,
              column: 46
            }
          }
        ],
        line: 75
      },
      '1': {
        loc: {
          start: {
            line: 75,
            column: 26
          },
          end: {
            line: 75,
            column: 39
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 75,
              column: 37
            },
            end: {
              line: 75,
              column: 39
            }
          }
        ],
        line: 75
      },
      '2': {
        loc: {
          start: {
            line: 77,
            column: 22
          },
          end: {
            line: 77,
            column: 78
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 77,
              column: 40
            },
            end: {
              line: 77,
              column: 58
            }
          },
          {
            start: {
              line: 77,
              column: 61
            },
            end: {
              line: 77,
              column: 78
            }
          }
        ],
        line: 77
      },
      '3': {
        loc: {
          start: {
            line: 92,
            column: 4
          },
          end: {
            line: 92,
            column: 20
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 92,
              column: 18
            },
            end: {
              line: 92,
              column: 20
            }
          }
        ],
        line: 92
      },
      '4': {
        loc: {
          start: {
            line: 93,
            column: 17
          },
          end: {
            line: 93,
            column: 90
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 93,
              column: 88
            },
            end: {
              line: 93,
              column: 90
            }
          }
        ],
        line: 93
      },
      '5': {
        loc: {
          start: {
            line: 93,
            column: 32
          },
          end: {
            line: 93,
            column: 76
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 93,
              column: 74
            },
            end: {
              line: 93,
              column: 76
            }
          }
        ],
        line: 93
      },
      '6': {
        loc: {
          start: {
            line: 94,
            column: 10
          },
          end: {
            line: 94,
            column: 23
          }
        },
        type: 'default-arg',
        locations: [
          {
            start: {
              line: 94,
              column: 21
            },
            end: {
              line: 94,
              column: 23
            }
          }
        ],
        line: 94
      },
      '7': {
        loc: {
          start: {
            line: 99,
            column: 30
          },
          end: {
            line: 99,
            column: 60
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 99,
              column: 30
            },
            end: {
              line: 99,
              column: 52
            }
          },
          {
            start: {
              line: 99,
              column: 56
            },
            end: {
              line: 99,
              column: 60
            }
          }
        ],
        line: 99
      },
      '8': {
        loc: {
          start: {
            line: 101,
            column: 25
          },
          end: {
            line: 101,
            column: 67
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 101,
              column: 25
            },
            end: {
              line: 101,
              column: 42
            }
          },
          {
            start: {
              line: 101,
              column: 46
            },
            end: {
              line: 101,
              column: 67
            }
          }
        ],
        line: 101
      },
      '9': {
        loc: {
          start: {
            line: 105,
            column: 19
          },
          end: {
            line: 105,
            column: 67
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 105,
              column: 30
            },
            end: {
              line: 105,
              column: 51
            }
          },
          {
            start: {
              line: 105,
              column: 54
            },
            end: {
              line: 105,
              column: 67
            }
          }
        ],
        line: 105
      },
      '10': {
        loc: {
          start: {
            line: 110,
            column: 20
          },
          end: {
            line: 110,
            column: 59
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 110,
              column: 31
            },
            end: {
              line: 110,
              column: 43
            }
          },
          {
            start: {
              line: 110,
              column: 46
            },
            end: {
              line: 110,
              column: 59
            }
          }
        ],
        line: 110
      },
      '11': {
        loc: {
          start: {
            line: 115,
            column: 20
          },
          end: {
            line: 115,
            column: 59
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 115,
              column: 31
            },
            end: {
              line: 115,
              column: 44
            }
          },
          {
            start: {
              line: 115,
              column: 47
            },
            end: {
              line: 115,
              column: 59
            }
          }
        ],
        line: 115
      },
      '12': {
        loc: {
          start: {
            line: 121,
            column: 44
          },
          end: {
            line: 121,
            column: 91
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 121,
              column: 44
            },
            end: {
              line: 121,
              column: 52
            }
          },
          {
            start: {
              line: 121,
              column: 56
            },
            end: {
              line: 121,
              column: 74
            }
          },
          {
            start: {
              line: 121,
              column: 78
            },
            end: {
              line: 121,
              column: 91
            }
          }
        ],
        line: 121
      },
      '13': {
        loc: {
          start: {
            line: 122,
            column: 45
          },
          end: {
            line: 122,
            column: 102
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 122,
              column: 45
            },
            end: {
              line: 122,
              column: 54
            }
          },
          {
            start: {
              line: 122,
              column: 58
            },
            end: {
              line: 122,
              column: 77
            }
          },
          {
            start: {
              line: 122,
              column: 81
            },
            end: {
              line: 122,
              column: 102
            }
          }
        ],
        line: 122
      },
      '14': {
        loc: {
          start: {
            line: 123,
            column: 43
          },
          end: {
            line: 123,
            column: 70
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 123,
              column: 43
            },
            end: {
              line: 123,
              column: 57
            }
          },
          {
            start: {
              line: 123,
              column: 61
            },
            end: {
              line: 123,
              column: 70
            }
          }
        ],
        line: 123
      },
      '15': {
        loc: {
          start: {
            line: 126,
            column: 7
          },
          end: {
            line: 126,
            column: 108
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 126,
              column: 7
            },
            end: {
              line: 126,
              column: 22
            }
          },
          {
            start: {
              line: 126,
              column: 26
            },
            end: {
              line: 126,
              column: 78
            }
          },
          {
            start: {
              line: 126,
              column: 82
            },
            end: {
              line: 126,
              column: 108
            }
          }
        ],
        line: 126
      },
      '16': {
        loc: {
          start: {
            line: 126,
            column: 29
          },
          end: {
            line: 126,
            column: 77
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 126,
              column: 40
            },
            end: {
              line: 126,
              column: 61
            }
          },
          {
            start: {
              line: 126,
              column: 64
            },
            end: {
              line: 126,
              column: 77
            }
          }
        ],
        line: 126
      },
      '17': {
        loc: {
          start: {
            line: 129,
            column: 9
          },
          end: {
            line: 143,
            column: 9
          }
        },
        type: 'binary-expr',
        locations: [
          {
            start: {
              line: 129,
              column: 9
            },
            end: {
              line: 129,
              column: 30
            }
          },
          {
            start: {
              line: 130,
              column: 10
            },
            end: {
              line: 142,
              column: 16
            }
          }
        ],
        line: 129
      },
      '18': {
        loc: {
          start: {
            line: 158,
            column: 11
          },
          end: {
            line: 162,
            column: 11
          }
        },
        type: 'cond-expr',
        locations: [
          {
            start: {
              line: 159,
              column: 12
            },
            end: {
              line: 159,
              column: 68
            }
          },
          {
            start: {
              line: 161,
              column: 12
            },
            end: {
              line: 161,
              column: 101
            }
          }
        ],
        line: 158
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0
    },
    b: {
      '0': [0],
      '1': [0],
      '2': [0, 0],
      '3': [0],
      '4': [0],
      '5': [0],
      '6': [0],
      '7': [0, 0],
      '8': [0, 0],
      '9': [0, 0],
      '10': [0, 0],
      '11': [0, 0],
      '12': [0, 0, 0],
      '13': [0, 0, 0],
      '14': [0, 0],
      '15': [0, 0, 0],
      '16': [0, 0],
      '17': [0, 0],
      '18': [0, 0]
    },
    _coverageSchema: '43e27e138ebf9cfc5966b082cf9a028302ed4184',
    hash: '934ee661e2b04ce49be560176ecaa56f3d07f4f2'
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  return (coverage[path] = coverageData);
})();

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.connectStackedLayout = exports.default = void 0;

var _botframeworkWebchatCore = require('botframework-webchat-core');

var _glamor = require('glamor');

var _classnames = _interopRequireDefault(require('classnames'));

var _propTypes = _interopRequireDefault(require('prop-types'));

var _react = _interopRequireDefault(require('react'));

var _remark = _interopRequireDefault(require('remark'));

var _stripMarkdown = _interopRequireDefault(require('strip-markdown'));

var _Avatar = _interopRequireDefault(require('./Avatar'));

var _Bubble = _interopRequireDefault(require('./Bubble'));

var _connectToWebChat = _interopRequireDefault(require('../connectToWebChat'));

var _ScreenReaderText = _interopRequireDefault(require('../ScreenReaderText'));

var _SendStatus = _interopRequireDefault(require('./SendStatus'));

var _textFormatToContentType = _interopRequireDefault(require('../Utils/textFormatToContentType'));

var _Timestamp = _interopRequireDefault(require('./Timestamp'));

var _useLocalize = _interopRequireDefault(require('../hooks/useLocalize'));

var _useStyleOptions = _interopRequireDefault(require('../hooks/useStyleOptions'));

var _useStyleSet = _interopRequireDefault(require('../hooks/useStyleSet'));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();
}

function _nonIterableRest() {
  throw new TypeError('Invalid attempt to destructure non-iterable instance');
}

function _iterableToArrayLimit(arr, i) {
  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === '[object Arguments]')) {
    return;
  }
  var _arr = [];
  var _n = true;
  var _d = false;
  var _e = undefined;
  try {
    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);
      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i['return'] != null) _i['return']();
    } finally {
      if (_d) throw _e;
    }
  }
  return _arr;
}

function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}

var _ref = (cov_tutjemcux.s[0]++, _botframeworkWebchatCore.Constants),
  _ref$ActivityClientSt = _ref.ActivityClientState,
  SENDING = _ref$ActivityClientSt.SENDING,
  SEND_FAILED = _ref$ActivityClientSt.SEND_FAILED;

var ROOT_CSS =
  (cov_tutjemcux.s[1]++,
  (0, _glamor.css)({
    display: 'flex',
    '& > .avatar': {
      flexShrink: 0
    },
    '& > .content': {
      flexGrow: 1,
      overflow: 'hidden',
      '& > .webchat__row': {
        display: 'flex',
        '& > .bubble, & > .timestamp': {
          flexGrow: 1,
          overflow: 'hidden'
        },
        '& > .filler': {
          flexGrow: 10000,
          flexShrink: 1
        }
      }
    },
    '& > .filler': {
      flexShrink: 0
    },
    '&.from-user': {
      flexDirection: 'row-reverse',
      '& > .content > .webchat__row': {
        flexDirection: 'row-reverse'
      }
    }
  }));
cov_tutjemcux.s[2]++;

var connectStackedLayout = function connectStackedLayout() {
  cov_tutjemcux.f[0]++;
  cov_tutjemcux.s[3]++;

  for (var _len = arguments.length, selectors = new Array(_len), _key = 0; _key < _len; _key++) {
    selectors[_key] = arguments[_key];
  }

  return _connectToWebChat.default.apply(
    void 0,
    [
      function(_ref2, _ref3) {
        var language = _ref2.language,
          _ref2$styleSet$option = _ref2.styleSet.options,
          botAvatarInitials = _ref2$styleSet$option.botAvatarInitials,
          userAvatarInitials = _ref2$styleSet$option.userAvatarInitials;
        var _ref3$activity = _ref3.activity;
        _ref3$activity = _ref3$activity === void 0 ? (cov_tutjemcux.b[0][0]++, {}) : _ref3$activity;
        var _ref3$activity$from = _ref3$activity.from;
        _ref3$activity$from = _ref3$activity$from === void 0 ? (cov_tutjemcux.b[1][0]++, {}) : _ref3$activity$from;
        var role = _ref3$activity$from.role;
        cov_tutjemcux.f[1]++;
        cov_tutjemcux.s[4]++;
        return {
          avatarInitials:
            role === 'user'
              ? (cov_tutjemcux.b[2][0]++, userAvatarInitials)
              : (cov_tutjemcux.b[2][1]++, botAvatarInitials),
          language: language,
          // TODO: [P4] We want to deprecate botAvatarInitials/userAvatarInitials because they are not as helpful as avatarInitials
          botAvatarInitials: botAvatarInitials,
          userAvatarInitials: userAvatarInitials
        };
      }
    ].concat(selectors)
  );
};

exports.connectStackedLayout = connectStackedLayout;
cov_tutjemcux.s[5]++;

var StackedLayout = function StackedLayout(_ref4) {
  var activity = _ref4.activity,
    avatarInitials = _ref4.avatarInitials,
    children = _ref4.children,
    timestampClassName = _ref4.timestampClassName;
  cov_tutjemcux.f[2]++;

  var _ref5 = (cov_tutjemcux.s[6]++, (0, _useStyleOptions.default)()),
    _ref6 = _slicedToArray(_ref5, 1),
    _ref6$ = _ref6[0],
    botAvatarInitials = _ref6$.botAvatarInitials,
    bubbleNubSize = _ref6$.bubbleNubSize,
    bubbleFromUserNubSize = _ref6$.bubbleFromUserNubSize,
    userAvatarInitials = _ref6$.userAvatarInitials;

  var _ref7 = (cov_tutjemcux.s[7]++, (0, _useStyleSet.default)()),
    _ref8 = _slicedToArray(_ref7, 1),
    stackedLayoutStyleSet = _ref8[0].stackedLayout;

  var _ref9 = (cov_tutjemcux.s[8]++, activity),
    _ref9$attachments = _ref9.attachments,
    attachments = _ref9$attachments === void 0 ? (cov_tutjemcux.b[3][0]++, []) : _ref9$attachments,
    _ref9$channelData = _ref9.channelData;

  _ref9$channelData = _ref9$channelData === void 0 ? (cov_tutjemcux.b[4][0]++, {}) : _ref9$channelData;
  var _ref9$channelData$mes = _ref9$channelData.messageBack;
  _ref9$channelData$mes = _ref9$channelData$mes === void 0 ? (cov_tutjemcux.b[5][0]++, {}) : _ref9$channelData$mes;
  var messageBackDisplayText = _ref9$channelData$mes.displayText,
    state = _ref9$channelData.state,
    _ref9$from = _ref9.from;
  _ref9$from = _ref9$from === void 0 ? (cov_tutjemcux.b[6][0]++, {}) : _ref9$from;
  var role = _ref9$from.role,
    text = _ref9.text,
    textFormat = _ref9.textFormat;
  var activityDisplayText =
    (cov_tutjemcux.s[9]++, (cov_tutjemcux.b[7][0]++, messageBackDisplayText) || (cov_tutjemcux.b[7][1]++, text));
  var fromUser = (cov_tutjemcux.s[10]++, role === 'user');
  var showSendStatus =
    (cov_tutjemcux.s[11]++,
    (cov_tutjemcux.b[8][0]++, state === SENDING) || (cov_tutjemcux.b[8][1]++, state === SEND_FAILED));
  var plainText =
    (cov_tutjemcux.s[12]++,
    (0, _remark.default)()
      .use(_stripMarkdown.default)
      .processSync(text));
  var indented =
    (cov_tutjemcux.s[13]++,
    fromUser ? (cov_tutjemcux.b[9][0]++, bubbleFromUserNubSize) : (cov_tutjemcux.b[9][1]++, bubbleNubSize));
  var botRoleLabel = (cov_tutjemcux.s[14]++, (0, _useLocalize.default)('BotSent'));
  var userRoleLabel = (cov_tutjemcux.s[15]++, (0, _useLocalize.default)('UserSent'));
  var roleLabel =
    (cov_tutjemcux.s[16]++,
    fromUser ? (cov_tutjemcux.b[10][0]++, botRoleLabel) : (cov_tutjemcux.b[10][1]++, userRoleLabel));
  var botAriaLabel =
    (cov_tutjemcux.s[17]++, (0, _useLocalize.default)('Bot said something', avatarInitials, plainText));
  var userAriaLabel =
    (cov_tutjemcux.s[18]++, (0, _useLocalize.default)('User said something', avatarInitials, plainText));
  var ariaLabel =
    (cov_tutjemcux.s[19]++,
    fromUser ? (cov_tutjemcux.b[11][0]++, userAriaLabel) : (cov_tutjemcux.b[11][1]++, botAriaLabel));
  cov_tutjemcux.s[20]++;
  return _react.default.createElement(
    'div',
    {
      className: (0, _classnames.default)(ROOT_CSS + '', stackedLayoutStyleSet + '', {
        'from-user': fromUser,
        webchat__stacked_extra_left_indent:
          (cov_tutjemcux.b[12][0]++, fromUser) &&
          (cov_tutjemcux.b[12][1]++, !botAvatarInitials) &&
          (cov_tutjemcux.b[12][2]++, bubbleNubSize),
        webchat__stacked_extra_right_indent:
          (cov_tutjemcux.b[13][0]++, !fromUser) &&
          (cov_tutjemcux.b[13][1]++, !userAvatarInitials) &&
          (cov_tutjemcux.b[13][2]++, bubbleFromUserNubSize),
        webchat__stacked_indented_content:
          (cov_tutjemcux.b[14][0]++, avatarInitials) && (cov_tutjemcux.b[14][1]++, !indented)
      })
    },
    (cov_tutjemcux.b[15][0]++, !avatarInitials) &&
      (cov_tutjemcux.b[15][1]++,
      !!(fromUser ? (cov_tutjemcux.b[16][0]++, bubbleFromUserNubSize) : (cov_tutjemcux.b[16][1]++, bubbleNubSize))) &&
      (cov_tutjemcux.b[15][2]++,
      _react.default.createElement('div', {
        className: 'avatar'
      })),
    _react.default.createElement(_Avatar.default, {
      'aria-hidden': true,
      className: 'avatar',
      fromUser: fromUser
    }),
    _react.default.createElement(
      'div',
      {
        className: 'content'
      },
      (cov_tutjemcux.b[17][0]++, !!activityDisplayText) &&
        (cov_tutjemcux.b[17][1]++,
        _react.default.createElement(
          'div',
          {
            className: 'webchat__row message'
          },
          _react.default.createElement(_ScreenReaderText.default, {
            text: ariaLabel
          }),
          _react.default.createElement(
            _Bubble.default,
            {
              'aria-hidden': true,
              className: 'bubble',
              fromUser: fromUser,
              nub: true
            },
            children({
              activity: activity,
              attachment: {
                content: activityDisplayText,
                contentType: (0, _textFormatToContentType.default)(textFormat)
              }
            })
          ),
          _react.default.createElement('div', {
            className: 'filler'
          })
        )),
      attachments.map(function(attachment, index) {
        cov_tutjemcux.f[3]++;
        cov_tutjemcux.s[21]++;
        return _react.default.createElement(
          'div',
          {
            'aria-label': ' ',
            className: (0, _classnames.default)('webchat__row attachment', {
              webchat__stacked_item_indented: indented
            }),
            key: index
          },
          _react.default.createElement(_ScreenReaderText.default, {
            text: roleLabel
          }),
          _react.default.createElement(
            _Bubble.default,
            {
              className: 'attachment bubble',
              fromUser: fromUser,
              key: index,
              nub: false
            },
            children({
              attachment: attachment
            })
          )
        );
      }),
      _react.default.createElement(
        'div',
        {
          className: (0, _classnames.default)('webchat__row', {
            webchat__stacked_item_indented: indented
          })
        },
        showSendStatus
          ? (cov_tutjemcux.b[18][0]++,
            _react.default.createElement(_SendStatus.default, {
              activity: activity,
              className: 'timestamp'
            }))
          : (cov_tutjemcux.b[18][1]++,
            _react.default.createElement(_Timestamp.default, {
              activity: activity,
              className: (0, _classnames.default)('timestamp', timestampClassName)
            })),
        _react.default.createElement('div', {
          className: 'filler'
        })
      )
    ),
    _react.default.createElement('div', {
      className: 'filler'
    })
  );
};

cov_tutjemcux.s[22]++;
StackedLayout.defaultProps = {
  children: undefined,
  timestampClassName: ''
};
cov_tutjemcux.s[23]++;
StackedLayout.propTypes = {
  activity: _propTypes.default.shape({
    attachments: _propTypes.default.array,
    channelData: _propTypes.default.shape({
      messageBack: _propTypes.default.shape({
        displayText: _propTypes.default.string
      })
    }),
    from: _propTypes.default.shape({
      role: _propTypes.default.string.isRequired
    }).isRequired,
    text: _propTypes.default.string,
    textFormat: _propTypes.default.string,
    timestamp: _propTypes.default.string,
    type: _propTypes.default.string.isRequired
  }).isRequired,
  avatarInitials: _propTypes.default.string.isRequired,
  children: _propTypes.default.any,
  timestampClassName: _propTypes.default.string
};

var _default = connectStackedLayout(function(_ref10) {
  var avatarInitials = _ref10.avatarInitials;
  cov_tutjemcux.f[4]++;
  cov_tutjemcux.s[24]++;
  return {
    avatarInitials: avatarInitials
  };
})(StackedLayout);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9BY3Rpdml0eS9TdGFja2VkTGF5b3V0LmpzIl0sIm5hbWVzIjpbIkNvbnN0YW50cyIsIkFjdGl2aXR5Q2xpZW50U3RhdGUiLCJTRU5ESU5HIiwiU0VORF9GQUlMRUQiLCJST09UX0NTUyIsImRpc3BsYXkiLCJmbGV4U2hyaW5rIiwiZmxleEdyb3ciLCJvdmVyZmxvdyIsImZsZXhEaXJlY3Rpb24iLCJjb25uZWN0U3RhY2tlZExheW91dCIsInNlbGVjdG9ycyIsImxhbmd1YWdlIiwic3R5bGVTZXQiLCJvcHRpb25zIiwiYm90QXZhdGFySW5pdGlhbHMiLCJ1c2VyQXZhdGFySW5pdGlhbHMiLCJhY3Rpdml0eSIsImZyb20iLCJyb2xlIiwiYXZhdGFySW5pdGlhbHMiLCJTdGFja2VkTGF5b3V0IiwiY2hpbGRyZW4iLCJ0aW1lc3RhbXBDbGFzc05hbWUiLCJidWJibGVOdWJTaXplIiwiYnViYmxlRnJvbVVzZXJOdWJTaXplIiwic3RhY2tlZExheW91dFN0eWxlU2V0Iiwic3RhY2tlZExheW91dCIsImF0dGFjaG1lbnRzIiwiY2hhbm5lbERhdGEiLCJtZXNzYWdlQmFjayIsIm1lc3NhZ2VCYWNrRGlzcGxheVRleHQiLCJkaXNwbGF5VGV4dCIsInN0YXRlIiwidGV4dCIsInRleHRGb3JtYXQiLCJhY3Rpdml0eURpc3BsYXlUZXh0IiwiZnJvbVVzZXIiLCJzaG93U2VuZFN0YXR1cyIsInBsYWluVGV4dCIsInVzZSIsInN0cmlwTWFya2Rvd24iLCJwcm9jZXNzU3luYyIsImluZGVudGVkIiwiYm90Um9sZUxhYmVsIiwidXNlclJvbGVMYWJlbCIsInJvbGVMYWJlbCIsImJvdEFyaWFMYWJlbCIsInVzZXJBcmlhTGFiZWwiLCJhcmlhTGFiZWwiLCJ3ZWJjaGF0X19zdGFja2VkX2V4dHJhX2xlZnRfaW5kZW50Iiwid2ViY2hhdF9fc3RhY2tlZF9leHRyYV9yaWdodF9pbmRlbnQiLCJ3ZWJjaGF0X19zdGFja2VkX2luZGVudGVkX2NvbnRlbnQiLCJhdHRhY2htZW50IiwiY29udGVudCIsImNvbnRlbnRUeXBlIiwibWFwIiwiaW5kZXgiLCJ3ZWJjaGF0X19zdGFja2VkX2l0ZW1faW5kZW50ZWQiLCJkZWZhdWx0UHJvcHMiLCJ1bmRlZmluZWQiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJzaGFwZSIsImFycmF5Iiwic3RyaW5nIiwiaXNSZXF1aXJlZCIsInRpbWVzdGFtcCIsInR5cGUiLCJhbnkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7Ozs7O2tDQUlJQSxrQztpQ0FERkMsbUI7SUFBdUJDLE8seUJBQUFBLE87SUFBU0MsVyx5QkFBQUEsVzs7QUFHbEMsSUFBTUMsUUFBUSwwQkFBRyxpQkFBSTtBQUNuQkMsRUFBQUEsT0FBTyxFQUFFLE1BRFU7QUFHbkIsaUJBQWU7QUFDYkMsSUFBQUEsVUFBVSxFQUFFO0FBREMsR0FISTtBQU9uQixrQkFBZ0I7QUFDZEMsSUFBQUEsUUFBUSxFQUFFLENBREk7QUFFZEMsSUFBQUEsUUFBUSxFQUFFLFFBRkk7QUFJZCx5QkFBcUI7QUFDbkJILE1BQUFBLE9BQU8sRUFBRSxNQURVO0FBR25CLHFDQUErQjtBQUM3QkUsUUFBQUEsUUFBUSxFQUFFLENBRG1CO0FBRTdCQyxRQUFBQSxRQUFRLEVBQUU7QUFGbUIsT0FIWjtBQVFuQixxQkFBZTtBQUNiRCxRQUFBQSxRQUFRLEVBQUUsS0FERztBQUViRCxRQUFBQSxVQUFVLEVBQUU7QUFGQztBQVJJO0FBSlAsR0FQRztBQTBCbkIsaUJBQWU7QUFDYkEsSUFBQUEsVUFBVSxFQUFFO0FBREMsR0ExQkk7QUE4Qm5CLGlCQUFlO0FBQ2JHLElBQUFBLGFBQWEsRUFBRSxhQURGO0FBR2Isb0NBQWdDO0FBQzlCQSxNQUFBQSxhQUFhLEVBQUU7QUFEZTtBQUhuQjtBQTlCSSxDQUFKLENBQUgsQ0FBZDs7O0FBdUNBLElBQU1DLG9CQUFvQixHQUFHLFNBQXZCQSxvQkFBdUIsR0FDM0I7QUFBQTtBQUFBOztBQUFBLG9DQUQrQkMsU0FDL0I7QUFEK0JBLElBQUFBLFNBQy9CO0FBQUE7O0FBQUEsa0RBQ0Usd0JBUU07QUFBQSxRQU5GQyxRQU1FLFNBTkZBLFFBTUU7QUFBQSxzQ0FMRkMsUUFLRSxDQUpBQyxPQUlBO0FBQUEsUUFKV0MsaUJBSVgseUJBSldBLGlCQUlYO0FBQUEsUUFKOEJDLGtCQUk5Qix5QkFKOEJBLGtCQUk5QjtBQUFBLCtCQURGQyxRQUNFO0FBQUEsMkVBRGtDLEVBQ2xDO0FBQUEsNkNBRFVDLElBQ1Y7QUFBQSxxRkFEMkIsRUFDM0I7QUFBQSxRQURrQkMsSUFDbEIsdUJBRGtCQSxJQUNsQjtBQUFBO0FBQUE7QUFBQTtBQUNKQyxNQUFBQSxjQUFjLEVBQUVELElBQUksS0FBSyxNQUFULDZCQUFrQkgsa0JBQWxCLDhCQUF1Q0QsaUJBQXZDLENBRFo7QUFFSkgsTUFBQUEsUUFBUSxFQUFSQSxRQUZJO0FBSUo7QUFDQUcsTUFBQUEsaUJBQWlCLEVBQWpCQSxpQkFMSTtBQU1KQyxNQUFBQSxrQkFBa0IsRUFBbEJBO0FBTkk7QUFPTCxHQWhCSCxTQWlCS0wsU0FqQkw7QUFrQkMsQ0FuQkg7Ozs7O0FBcUJBLElBQU1VLGFBQWEsR0FBRyxTQUFoQkEsYUFBZ0IsUUFBZ0U7QUFBQSxNQUE3REosUUFBNkQsU0FBN0RBLFFBQTZEO0FBQUEsTUFBbkRHLGNBQW1ELFNBQW5EQSxjQUFtRDtBQUFBLE1BQW5DRSxRQUFtQyxTQUFuQ0EsUUFBbUM7QUFBQSxNQUF6QkMsa0JBQXlCLFNBQXpCQSxrQkFBeUI7QUFBQTs7QUFBQSxxQ0FDTSwrQkFETjtBQUFBO0FBQUE7QUFBQSxNQUMzRVIsaUJBRDJFLFVBQzNFQSxpQkFEMkU7QUFBQSxNQUN4RFMsYUFEd0QsVUFDeERBLGFBRHdEO0FBQUEsTUFDekNDLHFCQUR5QyxVQUN6Q0EscUJBRHlDO0FBQUEsTUFDbEJULGtCQURrQixVQUNsQkEsa0JBRGtCOztBQUFBLHFDQUVqQywyQkFGaUM7QUFBQTtBQUFBLE1BRTVEVSxxQkFGNEQsWUFFM0VDLGFBRjJFOztBQUFBLHFDQVVoRlYsUUFWZ0Y7QUFBQSxnQ0FLbEZXLFdBTGtGO0FBQUEsTUFLbEZBLFdBTGtGLDREQUtwRSxFQUxvRTtBQUFBLGdDQU1sRkMsV0FOa0Y7O0FBQUEsK0VBTUUsRUFORjtBQUFBLGdEQU1uRUMsV0FObUU7QUFBQSx1RkFNWixFQU5ZO0FBQUEsTUFNdkNDLHNCQU51Qyx5QkFNcERDLFdBTm9EO0FBQUEsTUFNUkMsS0FOUSxxQkFNUkEsS0FOUTtBQUFBLHlCQU9sRmYsSUFQa0Y7QUFBQSxpRUFPakUsRUFQaUU7QUFBQSxNQU8xRUMsSUFQMEUsY0FPMUVBLElBUDBFO0FBQUEsTUFRbEZlLElBUmtGLFNBUWxGQSxJQVJrRjtBQUFBLE1BU2xGQyxVQVRrRixTQVNsRkEsVUFUa0Y7QUFZcEYsTUFBTUMsbUJBQW1CLDBCQUFHLDBCQUFBTCxzQkFBc0IsK0JBQUlHLElBQUosQ0FBekIsQ0FBekI7QUFDQSxNQUFNRyxRQUFRLDJCQUFHbEIsSUFBSSxLQUFLLE1BQVosQ0FBZDtBQUNBLE1BQU1tQixjQUFjLDJCQUFHLDBCQUFBTCxLQUFLLEtBQUsvQixPQUFWLCtCQUFxQitCLEtBQUssS0FBSzlCLFdBQS9CLENBQUgsQ0FBcEI7QUFDQSxNQUFNb0MsU0FBUywyQkFBRyx1QkFDZkMsR0FEZSxDQUNYQyxzQkFEVyxFQUVmQyxXQUZlLENBRUhSLElBRkcsQ0FBSCxDQUFmO0FBR0EsTUFBTVMsUUFBUSwyQkFBR04sUUFBUSw2QkFBR1oscUJBQUgsOEJBQTJCRCxhQUEzQixDQUFYLENBQWQ7QUFFQSxNQUFNb0IsWUFBWSwyQkFBRywwQkFBWSxTQUFaLENBQUgsQ0FBbEI7QUFDQSxNQUFNQyxhQUFhLDJCQUFHLDBCQUFZLFVBQVosQ0FBSCxDQUFuQjtBQUVBLE1BQU1DLFNBQVMsMkJBQUdULFFBQVEsOEJBQUdPLFlBQUgsK0JBQWtCQyxhQUFsQixDQUFYLENBQWY7QUFFQSxNQUFNRSxZQUFZLDJCQUFHLDBCQUFZLG9CQUFaLEVBQWtDM0IsY0FBbEMsRUFBa0RtQixTQUFsRCxDQUFILENBQWxCO0FBQ0EsTUFBTVMsYUFBYSwyQkFBRywwQkFBWSxxQkFBWixFQUFtQzVCLGNBQW5DLEVBQW1EbUIsU0FBbkQsQ0FBSCxDQUFuQjtBQUVBLE1BQU1VLFNBQVMsMkJBQUdaLFFBQVEsOEJBQUdXLGFBQUgsK0JBQW1CRCxZQUFuQixDQUFYLENBQWY7QUE1Qm9GO0FBOEJwRixTQUNFO0FBQ0UsSUFBQSxTQUFTLEVBQUUseUJBQVczQyxRQUFRLEdBQUcsRUFBdEIsRUFBMEJzQixxQkFBcUIsR0FBRyxFQUFsRCxFQUFzRDtBQUMvRCxtQkFBYVcsUUFEa0Q7QUFFL0RhLE1BQUFBLGtDQUFrQyxFQUFFLDJCQUFBYixRQUFRLGdDQUFJLENBQUN0QixpQkFBTCxDQUFSLCtCQUFrQ1MsYUFBbEMsQ0FGMkI7QUFHL0QyQixNQUFBQSxtQ0FBbUMsRUFBRSw0QkFBQ2QsUUFBRCxnQ0FBYSxDQUFDckIsa0JBQWQsZ0NBQW9DUyxxQkFBcEMsQ0FIMEI7QUFJL0QyQixNQUFBQSxpQ0FBaUMsRUFBRSwyQkFBQWhDLGNBQWMsZ0NBQUksQ0FBQ3VCLFFBQUw7QUFKYyxLQUF0RDtBQURiLEtBUUcsNEJBQUN2QixjQUFELGdDQUFtQixDQUFDLEVBQUVpQixRQUFRLDhCQUFHWixxQkFBSCwrQkFBMkJELGFBQTNCLENBQVYsQ0FBcEIsZ0NBQTJFO0FBQUssSUFBQSxTQUFTLEVBQUM7QUFBZixJQUEzRSxDQVJILEVBU0UsNkJBQUMsZUFBRDtBQUFRLG1CQUFhLElBQXJCO0FBQTJCLElBQUEsU0FBUyxFQUFDLFFBQXJDO0FBQThDLElBQUEsUUFBUSxFQUFFYTtBQUF4RCxJQVRGLEVBVUU7QUFBSyxJQUFBLFNBQVMsRUFBQztBQUFmLEtBQ0csNEJBQUMsQ0FBQ0QsbUJBQUYsZ0NBQ0M7QUFBSyxJQUFBLFNBQVMsRUFBQztBQUFmLEtBQ0UsNkJBQUMseUJBQUQ7QUFBa0IsSUFBQSxJQUFJLEVBQUVhO0FBQXhCLElBREYsRUFFRSw2QkFBQyxlQUFEO0FBQVEsbUJBQWEsSUFBckI7QUFBMkIsSUFBQSxTQUFTLEVBQUMsUUFBckM7QUFBOEMsSUFBQSxRQUFRLEVBQUVaLFFBQXhEO0FBQWtFLElBQUEsR0FBRyxFQUFFO0FBQXZFLEtBQ0dmLFFBQVEsQ0FBQztBQUNSTCxJQUFBQSxRQUFRLEVBQVJBLFFBRFE7QUFFUm9DLElBQUFBLFVBQVUsRUFBRTtBQUNWQyxNQUFBQSxPQUFPLEVBQUVsQixtQkFEQztBQUVWbUIsTUFBQUEsV0FBVyxFQUFFLHNDQUF3QnBCLFVBQXhCO0FBRkg7QUFGSixHQUFELENBRFgsQ0FGRixFQVdFO0FBQUssSUFBQSxTQUFTLEVBQUM7QUFBZixJQVhGLENBREQsQ0FESCxFQWlCR1AsV0FBVyxDQUFDNEIsR0FBWixDQUFnQixVQUFDSCxVQUFELEVBQWFJLEtBQWIsRUFDZjtBQUFBO0FBQUE7QUFBQTtBQUNFLG9CQUFXLEdBRGI7QUFFRSxNQUFBLFNBQVMsRUFBRSx5QkFBVyx5QkFBWCxFQUFzQztBQUFFQyxRQUFBQSw4QkFBOEIsRUFBRWY7QUFBbEMsT0FBdEMsQ0FGYjtBQUdFLE1BQUEsR0FBRyxFQUFFYztBQUhQLE9BS0UsNkJBQUMseUJBQUQ7QUFBa0IsTUFBQSxJQUFJLEVBQUVYO0FBQXhCLE1BTEYsRUFNRSw2QkFBQyxlQUFEO0FBQVEsTUFBQSxTQUFTLEVBQUMsbUJBQWxCO0FBQXNDLE1BQUEsUUFBUSxFQUFFVCxRQUFoRDtBQUEwRCxNQUFBLEdBQUcsRUFBRW9CLEtBQS9EO0FBQXNFLE1BQUEsR0FBRyxFQUFFO0FBQTNFLE9BQ0duQyxRQUFRLENBQUM7QUFBRStCLE1BQUFBLFVBQVUsRUFBVkE7QUFBRixLQUFELENBRFgsQ0FORjtBQVNNLEdBVlAsQ0FqQkgsRUE2QkU7QUFBSyxJQUFBLFNBQVMsRUFBRSx5QkFBVyxjQUFYLEVBQTJCO0FBQUVLLE1BQUFBLDhCQUE4QixFQUFFZjtBQUFsQyxLQUEzQjtBQUFoQixLQUNHTCxjQUFjLDhCQUNiLDZCQUFDLG1CQUFEO0FBQVksSUFBQSxRQUFRLEVBQUVyQixRQUF0QjtBQUFnQyxJQUFBLFNBQVMsRUFBQztBQUExQyxJQURhLCtCQUdiLDZCQUFDLGtCQUFEO0FBQVcsSUFBQSxRQUFRLEVBQUVBLFFBQXJCO0FBQStCLElBQUEsU0FBUyxFQUFFLHlCQUFXLFdBQVgsRUFBd0JNLGtCQUF4QjtBQUExQyxJQUhhLENBRGpCLEVBTUU7QUFBSyxJQUFBLFNBQVMsRUFBQztBQUFmLElBTkYsQ0E3QkYsQ0FWRixFQWdERTtBQUFLLElBQUEsU0FBUyxFQUFDO0FBQWYsSUFoREYsQ0FERjtBQW9ERCxDQWxGRDs7O0FBb0ZBRixhQUFhLENBQUNzQyxZQUFkLEdBQTZCO0FBQzNCckMsRUFBQUEsUUFBUSxFQUFFc0MsU0FEaUI7QUFFM0JyQyxFQUFBQSxrQkFBa0IsRUFBRTtBQUZPLENBQTdCOztBQUtBRixhQUFhLENBQUN3QyxTQUFkLEdBQTBCO0FBQ3hCNUMsRUFBQUEsUUFBUSxFQUFFNkMsbUJBQVVDLEtBQVYsQ0FBZ0I7QUFDeEJuQyxJQUFBQSxXQUFXLEVBQUVrQyxtQkFBVUUsS0FEQztBQUV4Qm5DLElBQUFBLFdBQVcsRUFBRWlDLG1CQUFVQyxLQUFWLENBQWdCO0FBQzNCakMsTUFBQUEsV0FBVyxFQUFFZ0MsbUJBQVVDLEtBQVYsQ0FBZ0I7QUFDM0IvQixRQUFBQSxXQUFXLEVBQUU4QixtQkFBVUc7QUFESSxPQUFoQjtBQURjLEtBQWhCLENBRlc7QUFPeEIvQyxJQUFBQSxJQUFJLEVBQUU0QyxtQkFBVUMsS0FBVixDQUFnQjtBQUNwQjVDLE1BQUFBLElBQUksRUFBRTJDLG1CQUFVRyxNQUFWLENBQWlCQztBQURILEtBQWhCLEVBRUhBLFVBVHFCO0FBVXhCaEMsSUFBQUEsSUFBSSxFQUFFNEIsbUJBQVVHLE1BVlE7QUFXeEI5QixJQUFBQSxVQUFVLEVBQUUyQixtQkFBVUcsTUFYRTtBQVl4QkUsSUFBQUEsU0FBUyxFQUFFTCxtQkFBVUcsTUFaRztBQWF4QkcsSUFBQUEsSUFBSSxFQUFFTixtQkFBVUcsTUFBVixDQUFpQkM7QUFiQyxHQUFoQixFQWNQQSxVQWZxQjtBQWdCeEI5QyxFQUFBQSxjQUFjLEVBQUUwQyxtQkFBVUcsTUFBVixDQUFpQkMsVUFoQlQ7QUFpQnhCNUMsRUFBQUEsUUFBUSxFQUFFd0MsbUJBQVVPLEdBakJJO0FBa0J4QjlDLEVBQUFBLGtCQUFrQixFQUFFdUMsbUJBQVVHO0FBbEJOLENBQTFCOztlQXFCZXZELG9CQUFvQixDQUFDLGtCQUF5QjtBQUFBLE1BQXRCVSxjQUFzQixVQUF0QkEsY0FBc0I7QUFBQTtBQUFBO0FBQUE7QUFDM0RBLElBQUFBLGNBQWMsRUFBZEE7QUFEMkQ7QUFFNUQsQ0FGa0MsQ0FBcEIsQ0FFWEMsYUFGVyxDIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50IHJlYWN0L25vLWFycmF5LWluZGV4LWtleTogXCJvZmZcIiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tc3luYyAqL1xuXG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tICdib3RmcmFtZXdvcmstd2ViY2hhdC1jb3JlJztcbmltcG9ydCB7IGNzcyB9IGZyb20gJ2dsYW1vcic7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHJlbWFyayBmcm9tICdyZW1hcmsnO1xuaW1wb3J0IHN0cmlwTWFya2Rvd24gZnJvbSAnc3RyaXAtbWFya2Rvd24nO1xuXG5pbXBvcnQgQXZhdGFyIGZyb20gJy4vQXZhdGFyJztcbmltcG9ydCBCdWJibGUgZnJvbSAnLi9CdWJibGUnO1xuaW1wb3J0IGNvbm5lY3RUb1dlYkNoYXQgZnJvbSAnLi4vY29ubmVjdFRvV2ViQ2hhdCc7XG5pbXBvcnQgU2NyZWVuUmVhZGVyVGV4dCBmcm9tICcuLi9TY3JlZW5SZWFkZXJUZXh0JztcbmltcG9ydCBTZW5kU3RhdHVzIGZyb20gJy4vU2VuZFN0YXR1cyc7XG5pbXBvcnQgdGV4dEZvcm1hdFRvQ29udGVudFR5cGUgZnJvbSAnLi4vVXRpbHMvdGV4dEZvcm1hdFRvQ29udGVudFR5cGUnO1xuaW1wb3J0IFRpbWVzdGFtcCBmcm9tICcuL1RpbWVzdGFtcCc7XG5pbXBvcnQgdXNlTG9jYWxpemUgZnJvbSAnLi4vaG9va3MvdXNlTG9jYWxpemUnO1xuaW1wb3J0IHVzZVN0eWxlT3B0aW9ucyBmcm9tICcuLi9ob29rcy91c2VTdHlsZU9wdGlvbnMnO1xuaW1wb3J0IHVzZVN0eWxlU2V0IGZyb20gJy4uL2hvb2tzL3VzZVN0eWxlU2V0JztcblxuY29uc3Qge1xuICBBY3Rpdml0eUNsaWVudFN0YXRlOiB7IFNFTkRJTkcsIFNFTkRfRkFJTEVEIH1cbn0gPSBDb25zdGFudHM7XG5cbmNvbnN0IFJPT1RfQ1NTID0gY3NzKHtcbiAgZGlzcGxheTogJ2ZsZXgnLFxuXG4gICcmID4gLmF2YXRhcic6IHtcbiAgICBmbGV4U2hyaW5rOiAwXG4gIH0sXG5cbiAgJyYgPiAuY29udGVudCc6IHtcbiAgICBmbGV4R3JvdzogMSxcbiAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG5cbiAgICAnJiA+IC53ZWJjaGF0X19yb3cnOiB7XG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG5cbiAgICAgICcmID4gLmJ1YmJsZSwgJiA+IC50aW1lc3RhbXAnOiB7XG4gICAgICAgIGZsZXhHcm93OiAxLFxuICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbidcbiAgICAgIH0sXG5cbiAgICAgICcmID4gLmZpbGxlcic6IHtcbiAgICAgICAgZmxleEdyb3c6IDEwMDAwLFxuICAgICAgICBmbGV4U2hyaW5rOiAxXG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gICcmID4gLmZpbGxlcic6IHtcbiAgICBmbGV4U2hyaW5rOiAwXG4gIH0sXG5cbiAgJyYuZnJvbS11c2VyJzoge1xuICAgIGZsZXhEaXJlY3Rpb246ICdyb3ctcmV2ZXJzZScsXG5cbiAgICAnJiA+IC5jb250ZW50ID4gLndlYmNoYXRfX3Jvdyc6IHtcbiAgICAgIGZsZXhEaXJlY3Rpb246ICdyb3ctcmV2ZXJzZSdcbiAgICB9XG4gIH1cbn0pO1xuXG5jb25zdCBjb25uZWN0U3RhY2tlZExheW91dCA9ICguLi5zZWxlY3RvcnMpID0+XG4gIGNvbm5lY3RUb1dlYkNoYXQoXG4gICAgKFxuICAgICAge1xuICAgICAgICBsYW5ndWFnZSxcbiAgICAgICAgc3R5bGVTZXQ6IHtcbiAgICAgICAgICBvcHRpb25zOiB7IGJvdEF2YXRhckluaXRpYWxzLCB1c2VyQXZhdGFySW5pdGlhbHMgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgeyBhY3Rpdml0eTogeyBmcm9tOiB7IHJvbGUgfSA9IHt9IH0gPSB7fSB9XG4gICAgKSA9PiAoe1xuICAgICAgYXZhdGFySW5pdGlhbHM6IHJvbGUgPT09ICd1c2VyJyA/IHVzZXJBdmF0YXJJbml0aWFscyA6IGJvdEF2YXRhckluaXRpYWxzLFxuICAgICAgbGFuZ3VhZ2UsXG5cbiAgICAgIC8vIFRPRE86IFtQNF0gV2Ugd2FudCB0byBkZXByZWNhdGUgYm90QXZhdGFySW5pdGlhbHMvdXNlckF2YXRhckluaXRpYWxzIGJlY2F1c2UgdGhleSBhcmUgbm90IGFzIGhlbHBmdWwgYXMgYXZhdGFySW5pdGlhbHNcbiAgICAgIGJvdEF2YXRhckluaXRpYWxzLFxuICAgICAgdXNlckF2YXRhckluaXRpYWxzXG4gICAgfSksXG4gICAgLi4uc2VsZWN0b3JzXG4gICk7XG5cbmNvbnN0IFN0YWNrZWRMYXlvdXQgPSAoeyBhY3Rpdml0eSwgYXZhdGFySW5pdGlhbHMsIGNoaWxkcmVuLCB0aW1lc3RhbXBDbGFzc05hbWUgfSkgPT4ge1xuICBjb25zdCBbeyBib3RBdmF0YXJJbml0aWFscywgYnViYmxlTnViU2l6ZSwgYnViYmxlRnJvbVVzZXJOdWJTaXplLCB1c2VyQXZhdGFySW5pdGlhbHMgfV0gPSB1c2VTdHlsZU9wdGlvbnMoKTtcbiAgY29uc3QgW3sgc3RhY2tlZExheW91dDogc3RhY2tlZExheW91dFN0eWxlU2V0IH1dID0gdXNlU3R5bGVTZXQoKTtcblxuICBjb25zdCB7XG4gICAgYXR0YWNobWVudHMgPSBbXSxcbiAgICBjaGFubmVsRGF0YTogeyBtZXNzYWdlQmFjazogeyBkaXNwbGF5VGV4dDogbWVzc2FnZUJhY2tEaXNwbGF5VGV4dCB9ID0ge30sIHN0YXRlIH0gPSB7fSxcbiAgICBmcm9tOiB7IHJvbGUgfSA9IHt9LFxuICAgIHRleHQsXG4gICAgdGV4dEZvcm1hdFxuICB9ID0gYWN0aXZpdHk7XG5cbiAgY29uc3QgYWN0aXZpdHlEaXNwbGF5VGV4dCA9IG1lc3NhZ2VCYWNrRGlzcGxheVRleHQgfHwgdGV4dDtcbiAgY29uc3QgZnJvbVVzZXIgPSByb2xlID09PSAndXNlcic7XG4gIGNvbnN0IHNob3dTZW5kU3RhdHVzID0gc3RhdGUgPT09IFNFTkRJTkcgfHwgc3RhdGUgPT09IFNFTkRfRkFJTEVEO1xuICBjb25zdCBwbGFpblRleHQgPSByZW1hcmsoKVxuICAgIC51c2Uoc3RyaXBNYXJrZG93bilcbiAgICAucHJvY2Vzc1N5bmModGV4dCk7XG4gIGNvbnN0IGluZGVudGVkID0gZnJvbVVzZXIgPyBidWJibGVGcm9tVXNlck51YlNpemUgOiBidWJibGVOdWJTaXplO1xuXG4gIGNvbnN0IGJvdFJvbGVMYWJlbCA9IHVzZUxvY2FsaXplKCdCb3RTZW50Jyk7XG4gIGNvbnN0IHVzZXJSb2xlTGFiZWwgPSB1c2VMb2NhbGl6ZSgnVXNlclNlbnQnKTtcblxuICBjb25zdCByb2xlTGFiZWwgPSBmcm9tVXNlciA/IGJvdFJvbGVMYWJlbCA6IHVzZXJSb2xlTGFiZWw7XG5cbiAgY29uc3QgYm90QXJpYUxhYmVsID0gdXNlTG9jYWxpemUoJ0JvdCBzYWlkIHNvbWV0aGluZycsIGF2YXRhckluaXRpYWxzLCBwbGFpblRleHQpO1xuICBjb25zdCB1c2VyQXJpYUxhYmVsID0gdXNlTG9jYWxpemUoJ1VzZXIgc2FpZCBzb21ldGhpbmcnLCBhdmF0YXJJbml0aWFscywgcGxhaW5UZXh0KTtcblxuICBjb25zdCBhcmlhTGFiZWwgPSBmcm9tVXNlciA/IHVzZXJBcmlhTGFiZWwgOiBib3RBcmlhTGFiZWw7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoUk9PVF9DU1MgKyAnJywgc3RhY2tlZExheW91dFN0eWxlU2V0ICsgJycsIHtcbiAgICAgICAgJ2Zyb20tdXNlcic6IGZyb21Vc2VyLFxuICAgICAgICB3ZWJjaGF0X19zdGFja2VkX2V4dHJhX2xlZnRfaW5kZW50OiBmcm9tVXNlciAmJiAhYm90QXZhdGFySW5pdGlhbHMgJiYgYnViYmxlTnViU2l6ZSxcbiAgICAgICAgd2ViY2hhdF9fc3RhY2tlZF9leHRyYV9yaWdodF9pbmRlbnQ6ICFmcm9tVXNlciAmJiAhdXNlckF2YXRhckluaXRpYWxzICYmIGJ1YmJsZUZyb21Vc2VyTnViU2l6ZSxcbiAgICAgICAgd2ViY2hhdF9fc3RhY2tlZF9pbmRlbnRlZF9jb250ZW50OiBhdmF0YXJJbml0aWFscyAmJiAhaW5kZW50ZWRcbiAgICAgIH0pfVxuICAgID5cbiAgICAgIHshYXZhdGFySW5pdGlhbHMgJiYgISEoZnJvbVVzZXIgPyBidWJibGVGcm9tVXNlck51YlNpemUgOiBidWJibGVOdWJTaXplKSAmJiA8ZGl2IGNsYXNzTmFtZT1cImF2YXRhclwiIC8+fVxuICAgICAgPEF2YXRhciBhcmlhLWhpZGRlbj17dHJ1ZX0gY2xhc3NOYW1lPVwiYXZhdGFyXCIgZnJvbVVzZXI9e2Zyb21Vc2VyfSAvPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50XCI+XG4gICAgICAgIHshIWFjdGl2aXR5RGlzcGxheVRleHQgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2ViY2hhdF9fcm93IG1lc3NhZ2VcIj5cbiAgICAgICAgICAgIDxTY3JlZW5SZWFkZXJUZXh0IHRleHQ9e2FyaWFMYWJlbH0gLz5cbiAgICAgICAgICAgIDxCdWJibGUgYXJpYS1oaWRkZW49e3RydWV9IGNsYXNzTmFtZT1cImJ1YmJsZVwiIGZyb21Vc2VyPXtmcm9tVXNlcn0gbnViPXt0cnVlfT5cbiAgICAgICAgICAgICAge2NoaWxkcmVuKHtcbiAgICAgICAgICAgICAgICBhY3Rpdml0eSxcbiAgICAgICAgICAgICAgICBhdHRhY2htZW50OiB7XG4gICAgICAgICAgICAgICAgICBjb250ZW50OiBhY3Rpdml0eURpc3BsYXlUZXh0LFxuICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IHRleHRGb3JtYXRUb0NvbnRlbnRUeXBlKHRleHRGb3JtYXQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvQnViYmxlPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWxsZXJcIiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgICB7LyogQmVjYXVzZSBvZiBkaWZmZXJlbmNlcyBpbiBicm93c2VyIGltcGxlbWVudGF0aW9ucywgYXJpYS1sYWJlbD1cIiBcIiBpcyB1c2VkIHRvIG1ha2UgdGhlIHNjcmVlbiByZWFkZXIgbm90IHJlcGVhdCB0aGUgc2FtZSB0ZXh0IG11bHRpcGxlIHRpbWVzIGluIENocm9tZSB2NzUgKi99XG4gICAgICAgIHthdHRhY2htZW50cy5tYXAoKGF0dGFjaG1lbnQsIGluZGV4KSA9PiAoXG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgYXJpYS1sYWJlbD1cIiBcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCd3ZWJjaGF0X19yb3cgYXR0YWNobWVudCcsIHsgd2ViY2hhdF9fc3RhY2tlZF9pdGVtX2luZGVudGVkOiBpbmRlbnRlZCB9KX1cbiAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFNjcmVlblJlYWRlclRleHQgdGV4dD17cm9sZUxhYmVsfSAvPlxuICAgICAgICAgICAgPEJ1YmJsZSBjbGFzc05hbWU9XCJhdHRhY2htZW50IGJ1YmJsZVwiIGZyb21Vc2VyPXtmcm9tVXNlcn0ga2V5PXtpbmRleH0gbnViPXtmYWxzZX0+XG4gICAgICAgICAgICAgIHtjaGlsZHJlbih7IGF0dGFjaG1lbnQgfSl9XG4gICAgICAgICAgICA8L0J1YmJsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSl9XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCd3ZWJjaGF0X19yb3cnLCB7IHdlYmNoYXRfX3N0YWNrZWRfaXRlbV9pbmRlbnRlZDogaW5kZW50ZWQgfSl9PlxuICAgICAgICAgIHtzaG93U2VuZFN0YXR1cyA/IChcbiAgICAgICAgICAgIDxTZW5kU3RhdHVzIGFjdGl2aXR5PXthY3Rpdml0eX0gY2xhc3NOYW1lPVwidGltZXN0YW1wXCIgLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPFRpbWVzdGFtcCBhY3Rpdml0eT17YWN0aXZpdHl9IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygndGltZXN0YW1wJywgdGltZXN0YW1wQ2xhc3NOYW1lKX0gLz5cbiAgICAgICAgICApfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmlsbGVyXCIgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmlsbGVyXCIgLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cblN0YWNrZWRMYXlvdXQuZGVmYXVsdFByb3BzID0ge1xuICBjaGlsZHJlbjogdW5kZWZpbmVkLFxuICB0aW1lc3RhbXBDbGFzc05hbWU6ICcnXG59O1xuXG5TdGFja2VkTGF5b3V0LnByb3BUeXBlcyA9IHtcbiAgYWN0aXZpdHk6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgYXR0YWNobWVudHM6IFByb3BUeXBlcy5hcnJheSxcbiAgICBjaGFubmVsRGF0YTogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgIG1lc3NhZ2VCYWNrOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICBkaXNwbGF5VGV4dDogUHJvcFR5cGVzLnN0cmluZ1xuICAgICAgfSlcbiAgICB9KSxcbiAgICBmcm9tOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgcm9sZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG4gICAgfSkuaXNSZXF1aXJlZCxcbiAgICB0ZXh0OiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHRleHRGb3JtYXQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdGltZXN0YW1wOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHR5cGU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxuICB9KS5pc1JlcXVpcmVkLFxuICBhdmF0YXJJbml0aWFsczogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICBjaGlsZHJlbjogUHJvcFR5cGVzLmFueSxcbiAgdGltZXN0YW1wQ2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0U3RhY2tlZExheW91dCgoeyBhdmF0YXJJbml0aWFscyB9KSA9PiAoe1xuICBhdmF0YXJJbml0aWFsc1xufSkpKFN0YWNrZWRMYXlvdXQpO1xuXG5leHBvcnQgeyBjb25uZWN0U3RhY2tlZExheW91dCB9O1xuIl19
